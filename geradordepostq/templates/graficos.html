<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="/menu-global.html" as="fetch" crossorigin>
    <link rel="preload" href="/global-body-elements.html" as="fetch" crossorigin>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Gráficos - LinkedIn/Instagram</title>
    <link rel="stylesheet" href="../css/base.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="template-container" style="background: white;">
        <!-- Header -->
        <div class="charts-header p-20 text-center" style="background: var(--primary-color);">
            <div class="title medium editable" style="color: white; margin-bottom: 8px;">
                ESTATÍSTICAS DE SAÚDE
            </div>
            <div class="subtitle small editable" style="color: rgba(255,255,255,0.9);">
                Dados importantes para enfermagem
            </div>
        </div>

        <!-- Conteúdo dos gráficos -->
        <div class="charts-content p-15" style="flex: 1; display: flex; flex-direction: column;">
            
            <!-- Gráfico principal -->
            <div class="main-chart mb-15" style="background: #f8f9fa; padding: 15px; border-radius: 10px; flex: 1;">
                <div class="chart-title editable subtitle small mb-10 text-center" style="color: var(--primary-color);">
                    Principais Causas de Internação
                </div>
                <div class="chart-container" style="position: relative; height: 180px;">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>

            <!-- Estatísticas rápidas -->
            <div class="quick-stats" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 15px;">
                <div class="stat-card text-center" style="background: #e3f2fd; padding: 12px; border-radius: 8px;">
                    <div class="stat-number editable title small" style="color: var(--primary-color); margin-bottom: 4px;">85%</div>
                    <div class="stat-label editable text small" style="color: var(--text-color);">Taxa de recuperação</div>
                </div>
                
                <div class="stat-card text-center" style="background: #f3e5f5; padding: 12px; border-radius: 8px;">
                    <div class="stat-number editable title small" style="color: var(--primary-color); margin-bottom: 4px;">24h</div>
                    <div class="stat-label editable text small" style="color: var(--text-color);">Atendimento</div>
                </div>
                
                <div class="stat-card text-center" style="background: #e8f5e8; padding: 12px; border-radius: 8px;">
                    <div class="stat-number editable title small" style="color: var(--primary-color); margin-bottom: 4px;">98%</div>
                    <div class="stat-label editable text small" style="color: var(--text-color);">Satisfação</div>
                </div>
            </div>

            <!-- Footer -->
            <div class="charts-footer text-center">
                <div class="text small" style="color: var(--medium-gray); margin-bottom: 5px;">
                    Fonte: Ministério da Saúde 2024
                </div>
                <div class="text small editable" style="color: var(--primary-color); font-weight: 600;">
                    @dados_saude_br
                </div>
            </div>
        </div>
    </div>

    <!-- Controles de edição -->
    <div class="editor-controls" style="position: fixed; bottom: 20px; left: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); z-index: 1000;">
        <button onclick="changeChartType()" class="btn btn-secondary" style="margin-right: 10px; font-size: 12px; padding: 8px 12px;">
            Tipo de Gráfico
        </button>
        <button onclick="editChartData()" class="btn btn-secondary" style="margin-right: 10px; font-size: 12px; padding: 8px 12px;">
            Editar Dados
        </button>
        <button onclick="changeTemplate('tabelas')" class="btn btn-primary" style="font-size: 12px; padding: 8px 12px;">
            Próximo Template
        </button>
    </div>

    <script src="../js/editor.js"></script>
    <script>
        let currentChart = null;
        let currentChartType = 'doughnut';
        
        const chartData = {
            labels: ['Cardiovascular', 'Respiratório', 'Neurológico', 'Digestivo', 'Outros'],
            datasets: [{
                data: [30, 25, 20, 15, 10],
                backgroundColor: [
                    '#1a3e74',
                    '#2a5a94',
                    '#4a90e2',
                    '#7bb3f0',
                    '#a8d0f7'
                ],
                borderWidth: 0
            }]
        };

        function createChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }
            
            const config = {
                type: currentChartType,
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 10,
                                    family: 'Inter'
                                },
                                padding: 8,
                                usePointStyle: true
                            }
                        }
                    }
                }
            };

            // Configurações específicas por tipo de gráfico
            if (currentChartType === 'bar') {
                config.options.scales = {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    }
                };
            }
            
            currentChart = new Chart(ctx, config);
        }

        function changeChartType() {
            const types = ['doughnut', 'bar', 'pie', 'line'];
            const currentIndex = types.indexOf(currentChartType);
            const nextIndex = (currentIndex + 1) % types.length;
            currentChartType = types[nextIndex];
            
            createChart();
        }

        function editChartData() {
            const newLabels = prompt('Digite os rótulos separados por vírgula:', chartData.labels.join(', '));
            if (newLabels) {
                chartData.labels = newLabels.split(',').map(label => label.trim());
                
                const newData = prompt('Digite os valores separados por vírgula:', chartData.datasets[0].data.join(', '));
                if (newData) {
                    chartData.datasets[0].data = newData.split(',').map(value => parseInt(value.trim()));
                    
                    // Ajustar cores se necessário
                    while (chartData.datasets[0].backgroundColor.length < chartData.labels.length) {
                        const randomColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
                        chartData.datasets[0].backgroundColor.push(randomColor);
                    }
                    
                    createChart();
                }
            }
        }

        // Inicializar gráfico
        document.addEventListener('DOMContentLoaded', function() {
            createChart();
            
            // Animação das estatísticas
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 500 + (index * 100));
            });
        });
    </script>



<script type="text/javascript">
	atOptions = {
		'key' : '1e009bba81deb2bc366b3c4ac030f6be',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/1e009bba81deb2bc366b3c4ac030f6be/invoke.js" defer></script>
<script src="/lang-selector.js" defer></script>
</body>
</html>

