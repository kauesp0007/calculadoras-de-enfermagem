<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso Restrito</title>
    <!-- Inclui o CDN do Tailwind CSS para estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter para toda a página */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos adicionais para uma transição suave na seção de conteúdo */
        .hidden-content {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: opacity 0.5s ease-in-out, max-height 0.5s ease-in-out;
        }
        .visible-content {
            opacity: 1;
            max-height: 1000px; /* Um valor alto para acomodar o conteúdo */
            overflow: visible;
        }
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <!-- Container principal para o formulário de login -->
    <div id="login-container" class="bg-white p-8 sm:p-10 rounded-3xl shadow-2xl w-full max-w-md">
        <div class="text-center">
            <!-- Título da tela de acesso -->
            <h2 class="text-3xl font-extrabold text-gray-900 mb-2">Acesso Restrito</h2>
            <!-- Subtítulo ou descrição -->
            <p class="text-gray-500 mb-8">Por favor, insira suas credenciais para acessar o conteúdo.</p>
        </div>

        <!-- Formulário de login -->
        <form id="loginForm" class="space-y-6">
            <!-- Grupo de campo para o e-mail -->
            <div>
                <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
                <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    placeholder="Seu e-mail"
                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition-colors"
                >
            </div>
            
            <!-- Grupo de campo para a senha -->
            <div class="relative">
                <label for="password" class="block text-sm font-medium text-gray-700">Senha</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    required
                    placeholder="Sua senha"
                    class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 pr-12 transition-colors"
                >
            </div>

            <!-- Botão de submissão do formulário -->
            <div>
                <button
                    type="submit"
                    id="loginButton"
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
                >
                    Entrar
                </button>
            </div>
            
            <!-- Link para recuperação de senha (apenas para exemplo) -->
            <div class="text-center mt-4">
                <a href="#" class="text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors">
                    Esqueceu a senha?
                </a>
            </div>
            
            <!-- Mensagem de erro -->
            <div id="errorMessage" class="text-center text-red-500 mt-4 hidden">
                Credenciais inválidas.
            </div>
        </form>
    </div>

    <!-- Conteúdo restrito (invisível inicialmente) -->
    <div id="protected-content" class="hidden-content hidden absolute top-0 left-0 w-full p-8 text-gray-800">
        <div class="bg-white p-8 sm:p-10 rounded-3xl shadow-2xl w-full max-w-2xl mx-auto">
            <h2 class="text-3xl font-bold mb-4">Bem-vindo(a) à página restrita!</h2>
            <p class="mb-4">Este é o conteúdo que só pode ser visualizado após inserir a senha correta.</p>
            <p>Você pode adicionar aqui o conteúdo que deseja proteger, como documentos, links ou informações confidenciais.</p>
            <button id="logoutButton" class="mt-8 py-2 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors">
                Sair
            </button>
        </div>
    </div>

    <!-- Script JavaScript para lidar com a submissão e a lógica de autenticação do Firebase -->
    <script type="module">
        // Importa as funções do SDK do Firebase como módulos
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
        
        document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('loginForm');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const errorMessage = document.getElementById('errorMessage');
            const loginContainer = document.getElementById('login-container');
            const protectedContent = document.getElementById('protected-content');
            const logoutButton = document.getElementById('logoutButton');

            let auth;

            // Sua configuração do Firebase.
            const firebaseConfig = {
                apiKey: "AIzaSyC1US-K0KoiE9OS4IGalxkNUwqSicTPbeA",
                authDomain: "acesso-restrito-github.firebaseapp.com",
                projectId: "acesso-restrito-github",
                storageBucket: "acesso-restrito-github.firebasestorage.app",
                messagingSenderId: "32644970643",
                appId: "1:32644970643:web:92f5f3653ddeaa8ac0b566"
            };
            
            // Função para inicializar o Firebase e lidar com a autenticação inicial
            function initializeFirebase() {
                try {
                    // Inicializa os serviços do Firebase
                    const app = initializeApp(firebaseConfig);
                    auth = getAuth(app);

                    // Define o listener para mudanças de estado de autenticação
                    onAuthStateChanged(auth, (user) => {
                        if (user) {
                            // Usuário autenticado
                            console.log('Usuário autenticado:', user.email);
                            // Ao logar, redireciona o usuário para a página principal
                            window.location.href = 'https://www.calculadorasdeenfermagem.com.br/institucional/index.html';
                            showProtectedContent(); // Esta linha não será executada, pois o redirecionamento acontece antes
                        } else {
                            // Usuário não autenticado
                            console.log('Nenhum usuário autenticado.');
                            showLoginForm();
                        }
                    });

                } catch (error) {
                    console.error("Erro ao inicializar o Firebase:", error);
                    // Oculta tudo para evitar comportamento inesperado em caso de erro
                    loginContainer.classList.add('hidden');
                    protectedContent.classList.remove('visible-content');
                    protectedContent.classList.add('hidden-content');
                }
            }
            
            // Função para mostrar a tela de login
            function showLoginForm() {
                protectedContent.classList.remove('visible-content');
                protectedContent.classList.add('hidden-content');
                loginContainer.classList.remove('hidden');
            }

            // Função para mostrar o conteúdo protegido
            function showProtectedContent() {
                loginContainer.classList.add('hidden');
                protectedContent.classList.remove('hidden-content');
                protectedContent.classList.add('visible-content');
            }

            // Lida com a submissão do formulário de login
            loginForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                const email = emailInput.value;
                const password = passwordInput.value;

                try {
                    // Tenta fazer o login com e-mail e senha usando o Firebase
                    await signInWithEmailAndPassword(auth, email, password);
                    console.log('Login bem-sucedido!');
                    errorMessage.classList.add('hidden');
                    // O redirecionamento acontece no listener de estado de autenticação (onAuthStateChanged)
                } catch (error) {
                    // Trata os erros de login do Firebase
                    console.error('Erro de login:', error.code, error.message);
                    errorMessage.textContent = 'Credenciais inválidas.';
                    errorMessage.classList.remove('hidden');
                    passwordInput.value = ''; // Limpa o campo da senha
                }
            });

            // Lida com o botão de logout
            logoutButton.addEventListener('click', async () => {
                try {
                    await signOut(auth);
                    console.log('Logout realizado.');
                } catch (error) {
                    console.error('Erro ao fazer logout:', error.message);
                }
            });

            // Inicia o processo de inicialização do Firebase
            initializeFirebase();
        });
    </script>
<script type='text/javascript' src='//pl27876671.effectivegatecpm.com/81/6f/74/816f749f9688a0cf1cae1bcf24b9b5e4.js'></script>
<script type='text/javascript' src='//pl27876671.effectivegatecpm.com/81/6f/74/816f749f9688a0cf1cae1bcf24b9b5e4.js'></script>

<script type="text/javascript">
	atOptions = {
		'key' : '1e009bba81deb2bc366b3c4ac030f6be',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/1e009bba81deb2bc366b3c4ac030f6be/invoke.js"></script>
</body>
</html>
