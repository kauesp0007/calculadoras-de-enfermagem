<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Calculadoras de Enfermagem — Escalas Clínicas e Ferramentas de Dosagem para Profissionais de Saúde</title>
    <meta name="robots" content="index, follow, max-snippet:320, max-image-preview:large" />
    <meta name="keywords" content="calculadoras de enfermagem, escalas clínicas, dosagem de medicamentos, IMC, gotejamento, risco de queda, vacinas" />
    <meta name="theme-color" content="#1A3E74" />
    <meta property="og:locale" content="pt_BR" />
    
    <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/" />
<link rel="alternate" hreflang="pt-br" href="https://www.calculadorasdeenfermagem.com.br/" />
<link rel="alternate" hreflang="en" href="https://www.calculadorasdeenfermagem.com.br/en/" />
<link rel="alternate" hreflang="es" href="https://www.calculadorasdeenfermagem.com.br/es/" />
<link rel="alternate" hreflang="fr" href="https://www.calculadorasdeenfermagem.com.br/fr/" />
<link rel="alternate" hreflang="de" href="https://www.calculadorasdeenfermagem.com.br/de/" />
<link rel="alternate" hreflang="it" href="https://www.calculadorasdeenfermagem.com.br/it/" />
<link rel="alternate" hreflang="ja" href="https://www.calculadorasdeenfermagem.com.br/ja/" />
<link rel="alternate" hreflang="zh" href="https://www.calculadorasdeenfermagem.com.br/zh/" />
<link rel="alternate" hreflang="hi" href="https://www.calculadorasdeenfermagem.com.br/hi/" />
<link rel="alternate" hreflang="ar" href="https://www.calculadorasdeenfermagem.com.br/ar/" />
<link rel="alternate" hreflang="ru" href="https://www.calculadorasdeenfermagem.com.br/ru/" />
<link rel="alternate" hreflang="tr" href="https://www.calculadorasdeenfermagem.com.br/tr/" />
<link rel="alternate" hreflang="ko" href="https://www.calculadorasdeenfermagem.com.br/ko/" />
<link rel="alternate" hreflang="nl" href="https://www.calculadorasdeenfermagem.com.br/nl/" />
<link rel="alternate" hreflang="pl" href="https://www.calculadorasdeenfermagem.com.br/pl/" />
<link rel="alternate" hreflang="sv" href="https://www.calculadorasdeenfermagem.com.br/sv/" />
<link rel="alternate" hreflang="id" href="https://www.calculadorasdeenfermagem.com.br/id/" />
<link rel="alternate" hreflang="vi" href="https://www.calculadorasdeenfermagem.com.br/vi/" />
<link rel="alternate" hreflang="uk" href="https://www.calculadorasdeenfermagem.com.br/uk/" />
<link rel="alternate" hreflang="x-default" href="https://www.calculadorasdeenfermagem.com.br/" />
    
    <link rel="icon" href="https://www.calculadorasdeenfermagem.com.br/favicon.ico" type="image/x-icon">
    
    <meta name="description" content="Calculadoras de escalas clínicas e de dosagem de medicamentos para otimizar a prática diária e a segurança do paciente." />
    
    <link rel="manifest" href="manifest.json">

    <meta property="og:title" content="Calculadoras de Enfermagem — Escalas Clínicas e Doses" />
    <meta property="og:description" content="Ferramentas práticas para profissionais e estudantes de enfermagem: calculadoras de escalas clínicas, dosagens e vacinas para agilizar decisões e aumentar segurança do paciente." />
    <meta property="og:url" content="https://www.calculadorasdeenfermagem.com.br/" />
    <meta property="og:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Calculadoras de Enfermagem" />
    <meta name="twitter:description" content="Acesse ferramentas práticas e confiáveis para cálculos clínicos em enfermagem." />
    <meta name="twitter:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />
    <meta name="twitter:site" content="@calculadorasdeenf" />
    
    <script type="application/ld+json">
    {
      "@context":"https://schema.org",
      "@graph":[
        {
          "@type":"Organization",
          "@id":"https://www.calculadorasdeenfermagem.com.br/#org",
          "name":"Calculadoras de Enfermagem",
          "url":"https://www.calculadorasdeenfermagem.com.br/",
          "logo":"https://www.calculadorasdeenfermagem.com.br/iconpages.webp",
          "sameAs":[
            "https://www.instagram.com/calculadorasdeenfermagem/",
            "https://www.youtube.com/channel/UC_6runTDHz8u5S1Yab842pg",
            "https://www.tiktok.com/@calculadorasdeenf",
            "https://linkedin.com/company/calculadoras-de-enfermagem"
          ]
        },
        {
          "@type":"WebSite",
          "@id":"https://www.calculadorasdeenfermagem.com.br/#website",
          "url":"https://www.calculadorasdeenfermagem.com.br/",
          "name":"Calculadoras de Enfermagem",
          "publisher":{"@id":"https://www.calculadorasdeenfermagem.com.br/#org"},
          "potentialAction":
            {
              "@type":"SearchAction",
              "target":"https://www.calculadorasdeenfermagem.com.br/?s={search_term_string}",
              "query-input":"required name=search_term_string"
            }
        },
        {
          "@type":"WebPage",
          "url":"https://www.calculadorasdeenfermagem.com.br/",
          "name":"Calculadoras de Enfermagem — Página Inicial",
          "description":"Calculadoras e escalas clínicas para profissionais de enfermagem. Encontre ferramentas de dosagem, IMC, gotejamento, escalas de risco e tabelas de vacinas.",
          "breadcrumb":
            {
              "@type":"BreadcrumbList",
              "itemListElement":
                [
                  {"@type":"ListItem","position":1,"name":"Início","item":"https://www.calculadorasdeenfermagem.com.br/"}
                ]
            }
        },
        {
          "@type":"FAQPage",
          "mainEntity":
            [
              {
                "@type":"Question",
                "name":"Quem deve usar estas calculadoras?",
                "acceptedAnswer":{"@type":"Answer","text":"Profissionais e estudantes de enfermagem que precisam de apoio rápido para cálculos clínicos, dosagens e escalas de risco."}
              },
              {
                "@type":"Question",
                "name":"As ferramentas substituem o julgamento clínico?",
                "acceptedAnswer":{"@type":"Answer","text":"Não. As calculadoras são auxiliares; recomenda-se validar resultados com protocolos locais e o julgamento profissional."}
              },
              {
                "@type":"Question",
                "name":"Como posso sugerir uma calculadora?",
                "acceptedAnswer":{"@type":"Answer","text":"Entre em contato via nossas redes sociais ou formulário de contato no site para propor novas ferramentas."}
              }
            ]
        }
      ]
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #1A3E74;
            --primary-color-hover: #15325e;
            --accessibility-active: #FFA500;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .main-title {
            font-family: 'Nunito Sans', sans-serif;
            font-weight: 800;
            color: var(--primary-color);
        }
        .section-title {
            font-family: 'Nunito Sans', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--primary-color);
        }
        .nav-link {
            transition: color 0.2s;
        }
        .nav-link:hover {
            color: var(--primary-color);
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: var(--primary-color-hover);
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .side-widgets-container {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }
        .accessibility-widget {
            display: flex;
            flex-direction: column;
        }
        .accessibility-widget button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem;
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-top-left-radius: 0.5rem;
            border-bottom-left-radius: 0.5rem;
        }
        .accessibility-widget button:hover {
            background-color: var(--primary-color-hover);
        }
        .floating-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-right: 4px;  
        }
        .floating-buttons button {
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        .floating-buttons button:hover {
            transform: scale(1.1);
        }

        #accessibility-menu { 
            position: fixed; 
            right: -400px; 
            top: 0; 
            width: 350px; 
            height: 100%; 
            background-color: white; 
            box-shadow: -5px 0 15px rgba(0,0,0,0.1); 
            transition: right 0.3s ease-in-out; 
            z-index: 999; 
            overflow-y: auto; 
        }
        #accessibility-menu.open { 
            right: 0; 
        }
        .acc-feature { 
            border: 2px solid transparent; 
            border-radius: 0.25rem; 
            padding: 0.5rem; 
            transition: all 0.2s; 
        }
        .acc-feature.active { 
            border-color: var(--accessibility-active) !important; 
        }
        .acc-feature.active h4 { 
            color: var(--accessibility-active); 
        }
        .acc-option { 
            border: 1px solid #ccc; 
            border-radius: 0.25rem; 
            padding: 0.25rem; 
            transition: all 0.2s; 
        }
        .acc-option.active { 
            background-color: var(--accessibility-active); 
            color: white; 
            border-color: var(--accessibility-active); 
        }
        .contrast-dark { 
            filter: invert(1) hue-rotate(180deg); 
            background-color: #111; 
        }
        .contrast-light { 
            filter: brightness(1.2) contrast(1.2); 
        }
        .contrast-inverted { 
            filter: invert(1); 
        }
        .saturation-low { 
            filter: saturate(50%); 
        }
        .saturation-high { 
            filter: saturate(200%); 
        }
        .saturation-mono { 
            filter: grayscale(100%); 
        }
        .links-highlighted a:is(:hover, :focus) { 
            text-decoration: underline !important; 
            background-color: yellow; 
            color: black !important; 
            outline: 2px solid black; 
        }
        .font-serif { 
            font-family: serif !important; 
        }
        .font-bold-force { 
            font-weight: bold !important; 
        }
        #reading-mask { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.7); 
            pointer-events: none; 
            z-index: 2000; 
            mix-blend-mode: multiply; 
        }
        #reading-guide { 
            position: fixed; 
            width: 100%; 
            height: 5px; 
            background: var(--accessibility-active); 
            pointer-events: none; 
            z-index: 2000; 
        }
        
        [vw-access-button] { 
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        
        #cookie-banner { 
            position: fixed; 
            bottom: -200px; 
            left: 0; 
            right: 0; 
            z-index: 998; 
            transition: bottom 0.5s ease-in-out; 
        }
        #cookie-banner.show { 
            bottom: 0; 
        }
        .modal {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0,0,0,0.5); 
            z-index: 1010; 
            align-items: center; 
            justify-content: center;
        }
        .tab { 
            border-bottom: 3px solid transparent; 
            transition: all 0.2s; 
        }
        .tab.active { 
            border-bottom-color: var(--primary-color); 
            color: var(--primary-color); 
            font-weight: 600; 
        }
        .switch { 
            position: relative; 
            display: inline-block; 
            width: 40px; 
            height: 20px; 
        }
        .switch input { 
            opacity: 0; 
            width: 0; 
            height: 0; 
        }
        .slider { 
            position: absolute; 
            cursor: pointer; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background-color: #ccc; 
            transition: .4s; 
            border-radius: 20px; 
        }
        .slider:before { 
            position: absolute; 
            content: ""; 
            height: 12px; 
            width: 12px; 
            left: 4px; 
            bottom: 4px; 
            background-color: white; 
            transition: .4s; 
            border-radius: 50%; 
        }
        input:checked + .slider { 
            background-color: var(--primary-color); 
        }
        input:checked + .slider:before { 
            transform: translateX(20px); 
        }

        .native-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%2Dxmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%2Dpoints%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.25em 1.25em;
            padding-right: 2.5rem; 
        }

        .icon-view-card .card-icon { 
            transition: font-size 0.2s; 
        }
        .icon-size-xl .card-icon { 
            font-size: 4.5rem !important; 
        }
        .icon-size-lg .card-icon { 
            font-size: 3.5rem !important; 
        }
        .icon-size-md .card-icon { 
            font-size: 2.5rem !important; 
        }
        .icon-size-sm .card-icon { 
            font-size: 1.5rem !important; 
        }
        .icon-size-xl .p-5 { 
            padding: 1.5rem; 
        }
        .icon-size-lg .p-5 { 
            padding: 1.25rem; 
        }
        .icon-size-sm .p-5 { 
            padding: 0.75rem; 
        }
        
        .mobile-nav-link, .mobile-nav-summary {
            display: block;
            padding: 0.75rem 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #374151;
            border-radius: 0.375rem;
            transition: all 0.2s;
            cursor: pointer;
        }
        .mobile-nav-link:hover, .mobile-nav-summary:hover {
            background-color: #f3f4f6;
            color: var(--primary-color);
        }
        
        .mobile-nav-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mobile-nav-summary::after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.8rem;
            transition: transform 0.2s;
        }
        
        details[open] > .mobile-nav-summary::after {
            transform: rotate(180deg);
        }

        .mobile-nav-sublink {
            display: block;
            padding: 0.5rem 0.5rem 0.5rem 1rem;
            font-size: 1rem;
            font-weight: 500;
            color: #4b5563;
            border-radius: 0.375rem;
            transition: all 0.2s;
        }
        .mobile-nav-sublink:hover {
            background-color: #f3f4f6;
            color: var(--primary-color);
        }
        
        .mobile-nav-summary-sub {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0.5rem 0.5rem 1rem;
            font-size: 1rem;
            font-weight: 500;
            color: #4b5563;
            border-radius: 0.375rem;
            transition: all 0.2s;
            cursor: pointer;
        }
        .mobile-nav-summary-sub:hover {
            background-color: #f3f4f6;
            color: var(--primary-color);
        }
        .mobile-nav-summary-sub::after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.75rem;
            transition: transform 0.2s;
        }
        details[open] > .mobile-nav-summary-sub::after {
            transform: rotate(180deg);
        }
        
        .mobile-scale-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }

        #mobile-menu {
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        #search-button:active,
        #clear-button:active {
            transform: scale(0.98);
        }

        @media (max-width: 768px) {
            #accessibility-menu {
                width: 100%;
                right: -100%;
            }
            
            #accessibility-menu.open {
                right: 0;
            }
            
            .side-widgets-container {
                bottom: 20px;
                top: auto;
                transform: none;
            }
            
            #controls-container {
                display: flex !important;
            }
        }

        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }
        .line-clamp-3 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }

    </style>

    <!-- Script de Propaganda Adicionado -->
    <script type='text/javascript' src='//pl27876671.effectivegatecpm.com/81/6f/74/816f749f9688a0cf1cae1bcf24b9b5e4.js'></script>
    <!-- Fim do Script de Propaganda -->
</head>
<body class="bg-gray-100">

    <header class="bg-white shadow-md sticky top-0 z-50 w-full">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex-shrink-0">
                <a href="index.html">
                    <img src="https://www.calculadorasdeenfermagem.com.br/icontopbar1.webp" alt="Logotipo Portal de Enfermagem" class="h-10 w-auto">
                </a>
            </div>
            
            <nav class="hidden md:flex items-center space-x-6" aria-label="Navegação Principal">
                <ul class="flex space-x-6">
                    <li><a href="https://www.calculadorasdeenfermagem.com.br/" class="text-gray-700 hover:text-[#1A3E74] font-medium nav-link">Início</a></li>

                    <li class="relative group">
                        <button type="button" class="text-gray-700 hover:text-[#1A3E74] font-medium flex items-center nav-link" aria-haspopup="true" aria-expanded="false">
                            Sobre Nós
                            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                            <i class="fas fa-chevron-down ml-1 w-3 h-3 text-gray-700"></i>
                        </button>
                        <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded-md py-2 w-56 z-30">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/missao.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Missão, Visão e Valores</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/objetivo.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Objetivo do Site</a></li>
                            <li class="relative group/sub">
                                <a href="https://www.calculadorasdeenfermagem.com.br/politicadeacessibilidade.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Acessibilidade Digital
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/politicadeacessibilidade.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Política de Acessibilidade</a></li>
                                </ul>
                            </li>
                            <li class="relative group/sub">
                                <a href="https://www.calculadorasdeenfermagem.com.br/nossocompromisso.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Sustentabilidade Digital
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/nossocompromisso.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Nosso Compromisso</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/impactodigital.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Relatório de Impacto</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/tecnologiaverde.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Tecnologia Verde</a></li>
                                </ul>
                            </li>
                            <li class="relative group/sub">
                                <a href="https://www.calculadorasdeenfermagem.com.br/politica.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Políticas do Site
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/politica.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Política de Privacidade</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/termos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Política de Termos e Condições de Uso</a></li>
                                </ul>
                            </li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/institucional/acessorestrito.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Acesso Administrativo</a></li>
                        </ul>
                    </li>

                    <li class="relative group">
                        <button type="button" class="text-gray-700 hover:text-[#1A3E74] font-medium flex items-center nav-link" aria-haspopup="true" aria-expanded="false">
                            Calculadoras
                            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                            <i class="fas fa-chevron-down ml-1 w-3 h-3 text-gray-700"></i>
                        </button>
                        <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded-md py-2 w-56 z-30">
                            <li class="relative group/sub">
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Calculadoras
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <!-- MENU DESKTOP CALCULADORAS ATUALIZADO -->
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/heparina.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Aspiração de Heparina</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/insulina.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Aspiração de Insulina</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/balancohidrico.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Balanço Hídrico</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/gasometria.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cálculo de Gasometria</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/gotejamento.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cálculo de Gotejamento</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/medicamentos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cálculo de Medicamentos</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/dimensionamento.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Dimensionamento da Equipe de Enfermagem</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/gestacional.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Idade Gestacional e DPP</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/imc.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Índice de Massa Corporal (IMC)</a></li>
                                </ul>
                            </li>

                            <li class="relative group/sub">
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Calendário Vacinal
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-72 z-40 top-0 left-full max-h-96 overflow-y-auto">
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Prematuro</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Crianças (0 a <10 anos)</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Adolescentes (10 a 19 anos)</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Adultos (20 a 59 anos)</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Idosos (mais de 60 anos)</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Gestantes</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Pacientes Especiais</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Ocupacional</a></li>
                                    <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Vacinas Pneumocócicas</a></li>
                                </ul>
                            </li>
                            
                            <li class="relative group/sub">
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Escalas Clínicas
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <!-- MENU DESKTOP ESCALAS ATUALIZADO -->
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full max-h-96 overflow-y-auto">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/aldrete.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Aldrete e Kroulik</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/apache.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de APACHE II</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/apgar.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Apgar</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/asa.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Classificação ASA</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/ballard.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Ballard</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/barthel.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Barthel</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/berg.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Berg</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/bishop.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Bishop</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/braden.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Braden</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/bps.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de BPS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/cam.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala CAM - UTI</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/capurro.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Capurro</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/cincinnati.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Cincinnati</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/cornell.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Cornell</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/cries.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de CRIES</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/curb-65.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de CURB-65</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/gds.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Depressão Geriátrica (GDS)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/downton.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Downton</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/escalanumerica.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Dor (Numérica)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/elpo.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de ELPO</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/fast.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de FAST (AVC)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/flacc.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de FLACC</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/four.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de FOUR</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/fugulin.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Fugulin (SCP)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/glasgow.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Coma de Glasgow</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/gosnell.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Gosnell</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/hamilton.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Hamilton</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/humpty.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Humpty Dumpty</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/johns.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala Johns Hopkins</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/jouvet.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Jouvet</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/katz.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala Katz</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/lachs.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Lachs</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/lanss.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala LANSS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/lawton.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Lawton</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/manchester.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Protocolo de Manchester</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/meem.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de MEEM</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/meows.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de MEOWS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/morse.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Morse</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/news.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de NEWS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/nihss.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de NIHSS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/nips.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de NIPS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/norton.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Norton</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/ofras.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de OFRAS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/painad.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Painad</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/pelod.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de PELOD</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/perroca.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Perroca (SCP)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/pews.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de PEWS</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/prism.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de PRISM</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/qsofa.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de qSOFA</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/rancholosamigos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala Rancho Los Amigos</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/ramsay.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Ramsay (Sedação)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/richmond.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Richmond (RASS)</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/saps.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de SAPS III</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/silverman.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Silverman-Anderson</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/sofa.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de SOFA</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/tinetti.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Tinetti</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/waterlow.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Waterlow</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/downes.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Wood e Downes</a></li>
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/zarit.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Escala de Zarit</a></li>
                                </ul>
                            </li>

                            <li class="relative group/sub">
                                <a href="https://www.calculadorasdeenfermagem.com.br/plano-de-enfermagem.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center justify-between">
                                    Plano de Enfermagem
                                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                    <i class="fas fa-chevron-right ml-1 w-3 h-3 text-gray-700"></i>
                                </a>
                                <ul class="absolute hidden group-hover/sub:block bg-white shadow-lg rounded-md py-2 w-64 z-40 top-0 left-full">
                                    <li><a href="https://www.calculadorasdeenfermagem.com.br/plano-de-enfermagem.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Plano de Enfermagem</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <li class="relative group">
                        <button type="button" class="text-gray-700 hover:text-[#1A3E74] font-medium flex items-center nav-link" aria-haspopup="true" aria-expanded="false">
                            Carreira
                            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                            <i class="fas fa-chevron-down ml-1 w-3 h-3 text-gray-700"></i>
                        </button>
                        <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded-md py-2 w-72 z-30">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/carreiras.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Carreiras</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/como-procurar-emprego.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Como Procurar Emprego?</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/concursos-publicos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Concursos Públicos para Enfermagem</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/cursos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Cursos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/curriculos.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Currículos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/site-de-vagas.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Sites de Vagas para Enfermagem</a></li>
                        </ul>
                    </li>

                    <li class="relative group">
                        <button type="button" class="text-gray-700 hover:text-[#1A3E74] font-medium flex items-center nav-link" aria-haspopup="true" aria-expanded="false">
                            Fale Conosco
                            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                            <i class="fas fa-chevron-down ml-1 w-3 h-3 text-gray-700"></i>
                        </button>
                        <ul class="absolute hidden group-hover:block bg-white shadow-lg rounded-md py-2 w-48 z-30">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/doacoes.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Contribua</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/fale.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Contate-nos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/forum.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Fórum de perguntas e respostas</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            
            <div class="hidden md:flex items-center gap-4">
                 <div id="language-dropdown-wrapper" class="relative z-50">
                     <button id="langButton" class="flex items-center gap-2 p-2 bg-gray-100 rounded-lg shadow-sm hover:bg-gray-200 transition-colors" aria-expanded="false" aria-controls="langMenu">
                         <img id="langFlag" src="https://www.calculadorasdeenfermagem.com.br/bandeira-brasil.webp" alt="Current Language Flag" class="w-6 h-auto rounded-sm">
                         <span id="langText" class="text-sm font-semibold text-gray-700">Português</span>
                         <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                         <i class="fas fa-chevron-down text-xs text-gray-700"></i>
                     </button>
                     <div id="langMenu" class="absolute right-0 mt-3 w-40 bg-white rounded-lg shadow-xl py-1 hidden ring-1 ring-gray-200">
                     </div>
                 </div>
                 <a href="https://www.calculadorasdeenfermagem.com.br/curriculos.html" class="btn-primary font-bold py-2 px-5 rounded-lg text-sm">
                     <i class="fas fa-user-circle mr-2" aria-hidden="true"></i> Área do Usuário
                 </a>
            </div>
            
            <button id="mobile-menu-btn" class="md:hidden text-2xl text-[var(--primary-color)] hover:text-[var(--primary-color-hover)]" aria-label="Abrir menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            
        </div>
    </header>

    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden"></div>
    <div id="mobile-menu" class="fixed top-0 right-0 w-80 max-w-[calc(100%-4rem)] h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-[70] overflow-y-auto" role="dialog" aria-modal="true" aria-labelledby="mobile-menu-title">
        <div class="p-4 flex justify-between items-center border-b flex-shrink-0">
            <h2 id="mobile-menu-title" class="text-lg font-bold text-[var(--primary-color)]" style="font-family: 'Nunito Sans', sans-serif;">Menu</h2>
            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
            <button id="mobile-menu-close-btn" class="text-2xl text-gray-700 hover:text-gray-800" aria-label="Fechar menu">
                &times;
            </button>
        </div>
        <nav class="p-4 flex-grow overflow-y-auto">
            <ul class="space-y-2">
                <li><a href="https://www.calculadorasdeenfermagem.com.br/" class="mobile-nav-link">Início</a></li>
                
                <li>
                    <details>
                        <summary class="mobile-nav-summary">Sobre Nós</summary>
                        <ul class="pl-4 pt-2 space-y-2">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/missao.html" class="mobile-nav-sublink">Missão, Visão e Valores</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/objetivo.html" class="mobile-nav-sublink">Objetivo do Site</a></li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Acessibilidade Digital</summary>
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/politicadeacessibilidade.html" class="mobile-nav-sublink">Política de Acessibilidade</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Sustentabilidade Digital</summary>
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/nossocompromisso.html" class="mobile-nav-sublink">Nosso Compromisso</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/impactodigital.html" class="mobile-nav-sublink">Relatório de Impacto</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/tecnologiaverde.html" class="mobile-nav-sublink">Tecnologia Verde</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Políticas do Site</summary>
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/politica.html" class="mobile-nav-sublink">Política de Privacidade</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/termos.html" class="mobile-nav-sublink">Política de Termos e Condições</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/institucional/acessorestrito.html" class="mobile-nav-sublink">Acesso Administrativo</a></li>
                        </ul>
                    </details>
                </li>
                
                <li>
                    <details>
                        <summary class="mobile-nav-summary">Calculadoras</summary>
                        <ul class="pl-4 pt-2 space-y-2">
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Calculadoras</summary>
                                    <!-- MENU MOBILE CALCULADORAS ATUALIZADO -->
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/heparina.html" class="mobile-nav-sublink">Aspiração de Heparina</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/insulina.html" class="mobile-nav-sublink">Aspiração de Insulina</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/balancohidrico.html" class="mobile-nav-sublink">Balanço Hídrico</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/gasometria.html" class="mobile-nav-sublink">Cálculo de Gasometria</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/gotejamento.html" class="mobile-nav-sublink">Cálculo de Gotejamento</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/medicamentos.html" class="mobile-nav-sublink">Cálculo de Medicamentos</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/dimensionamento.html" class="mobile-nav-sublink">Dimensionamento da Equipe de Enfermagem</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/gestacional.html" class="mobile-nav-sublink">Idade Gestacional e DPP</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/imc.html" class="mobile-nav-sublink">Índice de Massa Corporal (IMC)</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Calendário Vacinal</summary>
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="#" class="mobile-nav-sublink">Prematuro</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Crianças (0 a <10 anos)</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Adolescentes (10 a 19 anos)</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Adultos (20 a 59 anos)</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Idosos (mais de 60 anos)</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Gestantes</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Pacientes Especiais</a></li>
                                        <li><a href="#" class="mobile-nav-sublink">Ocupacional</a></li>
                                        <li><a href="#" classs="mobile-nav-sublink">Vacinas Pneumocócicas</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Escalas Clinicas</summary>
                                    <!-- MENU MOBILE ESCALAS ATUALIZADO -->
                                    <ul class="pl-4 pt-2 space-y-2 mobile-scale-list">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/aldrete.html" class="mobile-nav-sublink">Escala de Aldrete e Kroulik</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/apache.html" class="mobile-nav-sublink">Escala de APACHE II</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/apgar.html" class="mobile-nav-sublink">Escala de Apgar</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/asa.html" class="mobile-nav-sublink">Classificação ASA</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/ballard.html" class="mobile-nav-sublink">Escala de Ballard</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/barthel.html" class="mobile-nav-sublink">Escala de Barthel</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/berg.html" class="mobile-nav-sublink">Escala de Berg</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/bishop.html" class="mobile-nav-sublink">Escala de Bishop</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/braden.html" class="mobile-nav-sublink">Escala de Braden</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/bps.html" class="mobile-nav-sublink">Escala de BPS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/cam.html" class="mobile-nav-sublink">Escala CAM - UTI</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/capurro.html" class="mobile-nav-sublink">Escala de Capurro</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/cincinnati.html" class="mobile-nav-sublink">Escala de Cincinnati</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/cornell.html" class="mobile-nav-sublink">Escala de Cornell</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/cries.html" class="mobile-nav-sublink">Escala de CRIES</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/curb-65.html" class="mobile-nav-sublink">Escala de CURB-65</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/gds.html" class="mobile-nav-sublink">Escala de Depressão Geriátrica (GDS)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/downton.html" class="mobile-nav-sublink">Escala de Downton</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/escalanumerica.html" class="mobile-nav-sublink">Escala de Dor (Numérica)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/elpo.html" class="mobile-nav-sublink">Escala de ELPO</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/fast.html" class="mobile-nav-sublink">Escala de FAST (AVC)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/flacc.html" class="mobile-nav-sublink">Escala de FLACC</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/four.html" class="mobile-nav-sublink">Escala de FOUR</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/fugulin.html" class="mobile-nav-sublink">Escala de Fugulin (SCP)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/glasgow.html" class="mobile-nav-sublink">Escala de Coma de Glasgow</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/gosnell.html" class="mobile-nav-sublink">Escala de Gosnell</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/hamilton.html" class="mobile-nav-sublink">Escala de Hamilton</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/humpty.html" class="mobile-nav-sublink">Escala de Humpty Dumpty</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/johns.html" class="mobile-nav-sublink">Escala Johns Hopkins</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/jouvet.html" class="mobile-nav-sublink">Escala de Jouvet</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/katz.html" class="mobile-nav-sublink">Escala Katz</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/lachs.html" class="mobile-nav-sublink">Escala de Lachs</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/lanss.html" class="mobile-nav-sublink">Escala LANSS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/lawton.html" class="mobile-nav-sublink">Escala de Lawton</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/manchester.html" class="mobile-nav-sublink">Protocolo de Manchester</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/meem.html" class="mobile-nav-sublink">Escala de MEEM</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/meows.html" class="mobile-nav-sublink">Escala de MEOWS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/morse.html" class="mobile-nav-sublink">Escala de Morse</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/news.html" class="mobile-nav-sublink">Escala de NEWS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/nihss.html" class="mobile-nav-sublink">Escala de NIHSS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/nips.html" class="mobile-nav-sublink">Escala de NIPS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/norton.html" class="mobile-nav-sublink">Escala de Norton</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/ofras.html" class="mobile-nav-sublink">Escala de OFRAS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/painad.html" class="mobile-nav-sublink">Escala de Painad</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/pelod.html" class="mobile-nav-sublink">Escala de PELOD</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/perroca.html" class="mobile-nav-sublink">Escala de Perroca (SCP)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/pews.html" class="mobile-nav-sublink">Escala de PEWS</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/prism.html" class="mobile-nav-sublink">Escala de PRISM</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/qsofa.html" class="mobile-nav-sublink">Escala de qSOFA</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/rancholosamigos.html" class="mobile-nav-sublink">Escala Rancho Los Amigos</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/ramsay.html" class="mobile-nav-sublink">Escala de Ramsay (Sedação)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/richmond.html" class="mobile-nav-sublink">Escala de Richmond (RASS)</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/saps.html" class="mobile-nav-sublink">Escala de SAPS III</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/silverman.html" class="mobile-nav-sublink">Escala de Silverman-Anderson</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/sofa.html" class="mobile-nav-sublink">Escala de SOFA</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/tinetti.html" class="mobile-nav-sublink">Escala de Tinetti</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/waterlow.html" class="mobile-nav-sublink">Escala de Waterlow</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/downes.html" class="mobile-nav-sublink">Escala de Wood e Downes</a></li>
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/zarit.html" class="mobile-nav-sublink">Escala de Zarit</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li>
                                <details>
                                    <summary class="mobile-nav-summary-sub">Plano de Enfermagem</summary>
                                    <ul class="pl-4 pt-2 space-y-2">
                                        <li><a href="https://www.calculadorasdeenfermagem.com.br/plano-de-enfermagem.html" class="mobile-nav-sublink">Plano de Enfermagem</a></li>
                                    </ul>
                                </details>
                            </li>
                        </ul>
                    </details>
                </li>

                <li>
                    <details>
                        <summary class="mobile-nav-summary">Carreira</summary>
                        <ul class="pl-4 pt-2 space-y-2">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/carreiras.html" class="mobile-nav-sublink">Carreiras</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/como-procurar-emprego.html" class="mobile-nav-sublink">Como Procurar Emprego?</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/concursos-publicos.html" class="mobile-nav-sublink">Concursos Públicos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/cursos.html" class="mobile-nav-sublink">Cursos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/curriculos.html" class="mobile-nav-sublink">Currículos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/site-de-vagas.html" class="mobile-nav-sublink">Sites de Vagas</a></li>
                        </ul>
                    </details>
                </li>
                
                <li>
                    <details>
                        <summary class="mobile-nav-summary">Fale Conosco</summary>
                        <ul class="pl-4 pt-2 space-y-2">
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/doacoes.html" class="mobile-nav-sublink">Contribua</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/fale.html" class="mobile-nav-sublink">Contate-nos</a></li>
                            <li><a href="https://www.calculadorasdeenfermagem.com.br/forum.html" class="mobile-nav-sublink">Fórum</a></li>
                        </ul>
                    </details>
                </li>
            </ul>
        </nav>
        
        <div class="p-4 border-t flex-shrink-0">
            
            <div id="mobile-language-dropdown-wrapper" class="relative z-50 mb-4">
            </div>
            
            <a href="https://www.calculadorasdeenfermagem.com.br/curriculos.html" class="btn-primary font-bold py-3 px-5 rounded-lg text-sm w-full flex justify-center items-center">
                <i class="fas fa-user-circle mr-2" aria-hidden="true"></i> Área do Usuário
            </a>
        </div>
    </div>

    <!-- O relatório indicou que a tag <main> já estava semanticamente correta, então nenhuma mudança estrutural foi necessária aqui. -->
    <main id="main-content" class="container mx-auto p-8">
        <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
        <nav id="breadcrumbs" class="mb-6 text-sm text-gray-700 fade-in" aria-label="Breadcrumb"></nav>
        
        <section id="calculators-app">
            
            <div id="app" class="max-w-7xl mx-auto p-0 text-gray-800">

                <div id="header-card" class="mb-8 flex flex-col items-center text-center bg-white p-6 md:p-8 rounded-2xl shadow-sm">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-[#1A3E74] mb-3">
                        Calculadoras de Enfermagem
                    </h1>
                    <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
                    <p class="text-lg text-gray-700 max-w-4xl">
                        Ferramentas essenciais para profissionais e estudantes de enfermagem, oferecendo calculadoras de escalas clínicas e de dosagem de medicamentos para otimizar a prática diária e a segurança do&nbsp;paciente.
                    </p>
                </div>

                <div id="quick-access-card" class="mb-8 bg-white p-6 md:p-8 rounded-2xl shadow-sm">
                    <h2 class="text-3xl font-bold text-[#1A3E74] mb-6 pb-3 border-b-4 border-[#1A3E74] inline-block" data-anchor-id="quick-access">
                        Acesso Rápido
                    </h2>
                    <div id="quick-access-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                    </div>
                </div>

                <div id="search-card" class="mb-8 flex flex-col justify-center bg-white p-6 md:p-8 rounded-2xl shadow-sm">
                    <h3 class="text-2xl font-bold text-[#1A3E74] text-center mb-6">
                        Busque suas ferramentas
                    </h3>
                    <div class="flex flex-col sm:flex-row items-center gap-3 w-full max-w-2xl mx-auto">
                        <div class="relative flex-grow w-full">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i id="search-icon" class="fas fa-search w-5 h-5 text-gray-400"></i>
                            </div>
                            <!-- 
                              PONTO 2.1: Adicionado aria-label para acessibilidade.
                              PONTO 3.2: Adicionada classe placeholder-gray-500 para contraste.
                              
                              CORREÇÃO WCAG APLICADA (Relatório Ponto 4.1): 
                              placeholder-gray-500 alterado para placeholder-gray-700
                            -->
                            <input 
                                type="text" 
                                id="search-input" 
                                placeholder="Buscar em todas as ferramentas..."
                                aria-label="Buscar em todas as ferramentas"
                                class="w-full h-[60px] pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl text-lg focus:outline-none focus:ring-2 focus:ring-[#1A3E74] focus:border-transparent placeholder-gray-700"
                            />
                        </div>
                        <div class="flex gap-3 w-full sm:w-auto">
                            <button 
                                type="button"
                                id="search-button"
                                class="flex-1 sm:flex-none px-6 py-3 h-[60px] bg-[#1A3E74] text-white rounded-xl font-semibold shadow-sm hover:bg-[#15325e] transition-colors text-lg w-full sm:w-[140px] flex justify-center items-center" 
                            >
                                Buscar
                            </button>
                            <button 
                                type="button"
                                id="clear-button"
                                class="flex-1 sm:flex-none px-4 py-3 h-[60px] bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors flex justify-center items-center w-full sm:w-[140px]" 
                                title="Limpar busca"
                            >
                                <i id="clear-icon" class="fas fa-sync-alt w-5 h-5 mr-2"></i>
                                Limpar
                            </button>
                        </div>
                    </div>
                </div>

                <div id="tools-card" class="bg-white p-6 md:p-8 rounded-2xl shadow-sm">
                    
                    <div id="controls-container" class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
                    </div>

                    <div id="calculators-section" class="mb-12">
                        <h2 id="calculators-header" class="text-3xl font-bold text-[#1A3E74] mb-6 pb-3 border-b-4 border-[#1A3E74] inline-block" data-anchor-id="calculadoras">
                            Calculadoras
                        </h2>
                        <div id="calculators-container" class="tool-list-container">
                        </div>
                    </div>

                    <div id="scales-section" class="mb-12">
                        <h2 id="scales-header" class="text-3xl font-bold text-[#1A3E74] mb-6 pb-3 border-b-4 border-[#1A3E74] inline-block" data-anchor-id="escalas">
                            Escalas Clínicas
                        </h2>
                        <div id="scales-container" class="tool-list-container">
                        </div>
                    </div>

                    <div id="vaccines-section" class="mb-12">
                        <h2 id="vaccines-header" class="text-3xl font-bold text-[#1A3E74] mb-6 pb-3 border-b-4 border-[#1A3E74] inline-block" data-anchor-id="vacinas">
                            Calendário Vacinal
                        </h2>
                        <div id="vaccines-container" class="tool-list-container">
                        </div>
                    </div>

                    <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
                    <div id="no-results" class="hidden text-center text-gray-700 text-lg py-12">
                        <i class="fas fa-exclamation-circle w-12 h-12 mx-auto mb-4 text-gray-400"></i>
                        Nenhuma ferramenta encontrada com os termos buscados.
                    </div>

                </div>

            </div>
        </section>
    </main>

    <!-- INÍCIO: Banner Horizontal Mobile Adicionado -->
    <div id="mobile-promo-banner" class="fixed bottom-4 left-4 right-4 md:hidden z-[999] transition-all duration-500 ease-in-out transform translate-y-[200px] opacity-0" role="alert" aria-live="polite">
        <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-4 rounded-lg shadow-lg flex items-center justify-between gap-3">
            <div class="flex items-center gap-3 min-w-0">
                <i class="fas fa-bullhorn fa-lg flex-shrink-0"></i>
                <p class="text-sm font-medium flex-1 truncate">
                    <strong>Novidade!</strong> Confira nossas novas escalas clínicas e calculadoras.
                </p>
            </div>
            <button id="close-promo-banner-btn" class="text-white hover:bg-white/20 rounded-full w-7 h-7 flex items-center justify-center flex-shrink-0 text-2xl font-bold" aria-label="Fechar banner">
                &times;
            </button>
        </div>
    </div>
    <!-- FIM: Banner Horizontal Mobile Adicionado -->

    <footer class="bg-gray-800 text-gray-300 pt-12 pb-8 mt-12">
        <div class="container mx-auto px-8">
            <div class="mb-8">
                <img src="https://www.calculadorasdeenfermagem.com.br/iconrodape1.webp" alt="Logotipo Calculadoras de Enfermagem" class="h-12 w-auto mb-6" onerror="this.onerror=null;this.src='https://placehold.co/200x48/FFFFFF/1A3E74?text=Logo'">
                <hr class="border-gray-700">
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h4 class="font-bold text-white mb-4" style="font-family: 'Nunito Sans', sans-serif;">Institucional</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/" class="hover:text-white">Início</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/missao.html" class="hover:text-white">Sobre Nós</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/mapa-do-site.html" class="hover:text-white">Mapa do Site</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/politica.html" class="hover:text-white">Políticas do Site</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/termos.html" class="hover:text-white">Termos e Condições de Uso</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-4" style="font-family: 'Nunito Sans', sans-serif;">Sustentabilidade Digital</h4>
                    <ul class="space-y-2 text-sm mb-6">
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/nossocompromisso.html" class="hover:text-white">Nosso Compromisso</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/impactodigital.html" class="hover:text-white">Relatório de Impacto</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/tecnologiaverde.html" class="hover:text-white">Tecnologia Verde</a></li>
                    </ul>

                    <h4 class="font-bold text-white mb-4" style="font-family: 'Nunito Sans', sans-serif;">Acessibilidade</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/politicadeacessibilidade.html" class="hover:text-white">Política de Acessibilidade</a></li>
                        <li><a href="https://www.calculadorasdeenfermagem.com.br/politicadeacessibilidade.html" class="hover:text-white">Recursos de Acessibilidade</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-4" style="font-family: 'Nunito Sans', sans-serif;">Nosso Compromisso</h4>
                     <p class="text-sm mb-4">Nosso site adota como princípio de governança, o comprometimento com elevados padrões de acessibilidade digital, sustentabilidade digital e proteção de dados.</p>
                     <div class="flex items-center space-x-4">
                         <img src="https://www.calculadorasdeenfermagem.com.br/seloacessibilidade.webp" alt="Selo de Acessibilidade" class="h-16" onerror="this.style.display='none'">
                         <img src="https://www.calculadorasdeenfermagem.com.br/selosustentabilidade.webp" alt="Selo de Sustentabilidade Digital" class="h-16" onerror="this.style.display='none'">
                         <img src="https://www.calculadorasdeenfermagem.com.br/selolgpd.webp" alt="Selo de Proteção de Dados" class="h-16" onerror="this.onerror=null;this.src='https://placehold.co/64x64/1A3E74/FFFFFF?text=Selo'">
                     </div>
                </div>

                <div>
                     <h4 class="font-bold text-white mb-4" style="font-family: 'Nunito Sans', sans-serif;">Siga-nos</h4>
                    <div class="flex space-x-4 mb-6">
                        <a href="https://www.linkedin.com/company/calculadoras-de-enfermagem" target="_blank" class="text-2xl hover:text-white" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.instagram.com/calculadorasdeenfermagem/" target="_blank" class="text-2xl hover:text-white" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.tiktok.com/@calculadorasdeenf" target="_blank" class="text-2xl hover:text-white" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                        <a href="https://www.youtube.com/channel/UC_6runTDHz8u5S1Yab842pg" target="_blank" class="text-2xl hover:text-white" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                    <button id="manage-cookies-footer-btn" class="bg-white text-[var(--primary-color)] font-bold py-2 px-4 rounded-lg text-sm w-full">Gerenciar Preferências de Cookies</button>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-6 text-center text-sm">
                <p>&copy; 2025-2026 Calculadoras de Enfermagem. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <div class="side-widgets-container">
        <div class="accessibility-widget">
            <!-- PONTO 3.3: Removido atributo 'title' redundante -->
            <button id="libras-btn" aria-label="Ativar tradutor de LIBRAS">
                <i class="fas fa-sign-language fa-lg" aria-hidden="true"></i>
            </button>
            <!-- PONTO 3.3: Removido atributo 'title' redundante -->
            <button id="accessibility-btn" aria-label="Abrir menu de recursos assistivos">
                <i class="fas fa-eye fa-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div id="floating-buttons-container" class="floating-buttons">
            <button id="suggest-tool-btn" title="Sugerir uma ferramenta" aria-label="Sugerir uma ferramenta">
                <i class="fas fa-lightbulb" aria-hidden="true"></i>
            </button>
            <!-- PONTO 3.3: Removido atributo 'title' redundante -->
            <button id="back-to-top-btn" aria-label="Voltar ao topo">
                <i class="fas fa-arrow-up" aria-hidden="true"></i>
            </button>
        </div>
    </div>
    
    <div id="cookie-banner" class="bg-gray-900 text-white p-4">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <!-- PONTO 3.4: Adicionado aria-label para link genérico -->
            <p class="text-sm mb-4 md:mb-0 md:mr-4">Este site utiliza cookies para garantir que obtém a melhor experiência. <a href="https://www.calculadorasdeenfermagem.com.br/politica.html" class="underline" aria-label="Saiba mais sobre a nossa política de cookies">Saiba mais</a>.</p>
            <div class="flex space-x-2 w-full md:w-auto">
                <button id="accept-cookies-btn" class="bg-white text-gray-900 font-bold py-2 px-4 rounded-lg text-sm w-28 flex-none flex justify-center items-center">Aceitar</button>
                <button id="decline-cookies-btn" class="bg-gray-700 hover:bg-gray-600 font-bold py-2 px-4 rounded-lg text-sm w-28 flex-none flex justify-center items-center">Recusar</button>
                <button id="manage-cookies-banner-btn" class="bg-gray-700 hover:bg-gray-600 font-bold py-2 px-4 rounded-lg text-sm w-28 flex-none flex justify-center items-center">Gerir</button>
            </div>
        </div>
    </div>

    <div id="suggestion-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="suggestion-modal-title">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-lg w-full relative">
             <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
             <button class="close-modal-btn absolute top-4 right-4 text-gray-700 hover:text-gray-800 text-2xl" aria-label="Fechar">&times;</button>
            <h2 id="suggestion-modal-title" class="main-title text-2xl mb-4">Sugira uma Ferramenta</h2>
            <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
            <p class="text-gray-700 mb-4 text-sm">Sentiu falta de alguma calculadora ou escala? Diga-nos qual! O seu feedback é muito importante para nós.</p>
            <textarea class="w-full border-gray-300 rounded-md shadow-sm p-2" rows="4" placeholder="Descreva a sua sugestão..."></textarea>
            <div class="mt-4 flex justify-end gap-4">
                <button class="close-modal-btn bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg text-sm">Cancelar</button>
                <button class="btn-primary font-bold py-2 px-4 rounded-lg text-sm">Enviar Sugestão</button>
            </div>
        </div>
    </div>

    <div id="cookie-prefs-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="cookie-prefs-title">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-lg w-full relative">
            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
            <button class="close-modal-btn absolute top-4 right-4 text-gray-700 hover:text-gray-800 text-2xl" aria-label="Fechar">&times;</button>
            <h2 id="cookie-prefs-title" class="main-title text-2xl mb-2">Preferências de Cookies</h2>
            <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
            <p class="text-gray-700 mb-6 text-sm">Para uma melhor experiência, utilizamos tecnologias como cookies para armazenar e/ou aceder a informações do dispositivo. Pode ajustar as suas preferências abaixo.</p>
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 border rounded-lg">
                    <div>
                        <h4 class="font-semibold text-gray-800">Cookies Essenciais</h4>
                        <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                        <p class="text-xs text-gray-700">Necessários para o funcionamento básico do site.</p>
                    </div>
                    <label class="switch"><input type="checkbox" checked disabled><span class="slider"></span></label>
                </div>
                 <div class="flex items-center justify-between p-4 border rounded-lg">
                    <div>
                        <h4 class="font-semibold text-gray-800">Cookies de Análise</h4>
                        <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                        <p class="text-xs text-gray-700">Ajudam-nos a entender como os visitantes interagem com o site.</p>
                    </div>
                    <label class="switch"><input type="checkbox" id="cookies-analiticos" checked><span class="slider"></span></label>
                </div>
                 <div class="flex items-center justify-between p-4 border rounded-lg">
                    <div>
                        <h4 class="font-semibold text-gray-800">Cookies de Marketing</h4>
                        <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                        <p class="text-xs text-gray-700">Utilizados para exibir anúncios relevantes para si.</p>
                    </div>
                    <label class="switch"><input type="checkbox" id="cookies-marketing"><span class="slider"></span></label>
                </div>
            </div>
            <div class="mt-8 flex flex-col sm:flex-row justify-end gap-4">
                <button id="save-cookie-prefs-btn" class="btn-primary font-bold py-2 px-6 rounded-lg text-sm w-full sm:w-auto">Salvar Preferências</button>
                <button id="accept-all-cookies-btn" class="bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-lg text-sm w-full sm:w-auto">Aceitar Todos</button>
            </div>
        </div>
    </div>

    <div id="accessibility-menu" role="dialog" aria-modal="true" aria-labelledby="accessibility-menu-title">
        <div class="p-4 border-b flex justify-between items-center">
            <h3 id="accessibility-menu-title" class="text-xl font-bold text-[var(--primary-color)]">Recursos Assistivos</h3>
            <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
            <button id="close-accessibility-menu" class="text-2xl text-gray-700 hover:text-gray-800" aria-label="Fechar menu de acessibilidade">&times;</button>
        </div>
        <div class="p-4 space-y-4">
            <div class="acc-feature" data-group="fontSize"> <h4>Tamanho da Fonte</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="font-size" data-value="1.2">120%</button><button class="acc-option flex-1 text-sm" data-action="font-size" data-value="1.5">150%</button><button class="acc-option flex-1 text-sm" data-action="font-size" data-value="2">200%</button></div> </div>
            <div class="acc-feature" data-group="fontType"> <h4>Fonte</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="font-type" data-value="serif">Serif</button><button class="acc-option flex-1 text-sm" data-action="font-type" data-value="bold">Negrito</button></div> </div>
            <div class="acc-feature" data-group="lineSpacing"> <h4>Espaçamento entre linhas</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="line-spacing" data-value="1.2">120%</button><button class="acc-option flex-1 text-sm" data-action="line-spacing" data-value="1.5">150%</button><button class="acc-option flex-1 text-sm" data-action="line-spacing" data-value="2">200%</button></div> </div>
            <div class="acc-feature" data-group="letterSpacing"> <h4>Espaço entre letras</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="letter-spacing" data-value="0.1">120%</button><button class="acc-option flex-1 text-sm" data-action="letter-spacing" data-value="0.2">150%</button><button class="acc-option flex-1 text-sm" data-action="letter-spacing" data-value="0.3">200%</button></div> </div>
            <div class="acc-feature" data-group="siteReader"> <h4>Leitor de sites</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="site-reader">Ativar/Desativar</button></div> </div>
            <div class="acc-feature" data-group="readingMask"> <h4>Máscara de Leitura</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="reading-mask">Ativar/Desativar</button></div> </div>
            <div class="acc-feature" data-group="readingGuide"> <h4>Guia de leitura</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="reading-guide">Ativar/Desativar</button></div> </div>
            <div class="acc-feature" data-group="highlightLinks"> <h4>Destacar links</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="highlight-links">Ativar/Desativar</button></div> </div>
            <div class="acc-feature" data-group="contrast"> <h4>Contraste de cores</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="contrast" data-value="dark">Escuro</button><button class="acc-option flex-1 text-sm" data-action="contrast" data-value="light">Claro</button><button class="acc-option flex-1 text-sm" data-action="contrast" data-value="inverted">Invertido</button></div> </div>
            <div class="acc-feature" data-group="saturation"> <h4>Saturação</h4> <div class="flex gap-1 mt-1"><button class="acc-option flex-1 text-sm" data-action="saturation" data-value="low">Baixa</button><button class="acc-option flex-1 text-sm" data-action="saturation" data-value="high">Alta</button><button class="acc-option flex-1 text-sm" data-action="saturation" data-value="mono">Mono</button></div> </div>
            <button id="reset-accessibility" class="w-full mt-4 bg-gray-200 text-gray-700 py-2 rounded hover:bg-gray-300"><i class="fas fa-undo mr-2"></i> Limpar configurações</button>
        </div>
    </div>
    
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>

    <script type="module">
        
        const BASE_URL = 'https://www.calculadorasdeenfermagem.com.br/';

        // DADOS DAS FERRAMENTAS ATUALIZADOS E ORDENADOS CONFORME SOLICITADO
        const TOOLS_DATA = [
            // Calculadoras (Ordem solicitada pelo usuário)
            { id: 'aspiracao-heparina', name: 'Aspiração de Heparina', category: 'Medicamentos', type: 'calculator', description: 'Calcule o volume ideal para aspiração segura de heparina.', filename: BASE_URL + 'heparina.html', created_at: '2023-10-03T10:00:00Z', iconClass: 'fas fa-syringe' },
            { id: 'aspiracao-insulina', name: 'Aspiração de Insulina', category: 'Medicamentos', type: 'calculator', description: 'Determine o volume correto de insulina a ser aspirado.', filename: BASE_URL + 'insulina.html', created_at: '2023-10-05T10:00:00Z', iconClass: 'fas fa-syringe' },
            { id: 'balanco-hidrico', name: 'Balanço Hídrico', category: 'Controle Hídrico', type: 'calculator', description: 'Controle preciso das entradas e saídas de líquidos.', filename: BASE_URL + 'balancohidrico.html', created_at: '2023-10-01T10:00:00Z', iconClass: 'fas fa-tint' },
            { id: 'gasometria', name: 'Cálculo de Gasometria', category: 'Exames', type: 'calculator', description: 'Interprete resultados de gasometria arterial com precisão.', filename: BASE_URL + 'gasometria.html', created_at: '2024-01-02T10:00:00Z', iconClass: 'fas fa-vial' },
            { id: 'gotejamento', name: 'Cálculo de Gotejamento', category: 'Medicamentos', type: 'calculator', description: 'Defina a velocidade ideal de infusão de soluções.', filename: BASE_URL + 'gotejamento.html', created_at: '2023-10-02T10:00:00Z', iconClass: 'fas fa-hand-holding-water' },
            { id: 'medicamentos', name: 'Cálculo de Medicamentos', category: 'Medicamentos', type: 'calculator', description: 'Calcule doses, diluições e volumes com segurança.', filename: BASE_URL + 'medicamentos.html', created_at: '2023-10-06T10:00:00Z', iconClass: 'fas fa-pills' },
            { id: 'dimensionamento', name: 'Dimensionamento da Equipe de Enfermagem', category: 'Gestão', type: 'calculator', description: 'Planeje o número adequado de profissionais por setor.', filename: BASE_URL + 'dimensionamento.html', created_at: '2023-10-07T10:00:00Z', iconClass: 'fas fa-users-cog' },
            { id: 'idade-gestacional', name: 'Idade Gestacional e DPP', category: 'Obstetrícia', type: 'calculator', description: 'Descubra a idade gestacional e a data provável do parto.', filename: BASE_URL + 'gestacional.html', created_at: '2023-10-08T10:00:00Z', iconClass: 'fas fa-baby' },
            { id: 'imc', name: 'Índice de Massa Corporal (IMC)', category: 'Nutrição', type: 'calculator', description: 'Avalie rapidamente o índice de massa corporal do paciente.', filename: BASE_URL + 'imc.html', created_at: '2023-10-04T10:00:00Z', iconClass: 'fas fa-weight' },

            // Escalas (Ordem solicitada pelo usuário)
            { id: 'aldrete-e-kroulik', name: 'Escala de Aldrete e Kroulik', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a recuperação pós-anestésica de forma padronizada.', filename: BASE_URL + 'aldrete.html', created_at: '2023-10-09T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'apache-ii', name: 'Escala de APACHE II', category: 'Escalas Clínicas', type: 'scale', description: 'Estime a gravidade de pacientes em terapia intensiva.', filename: BASE_URL + 'apache.html', created_at: '2023-10-10T10:00:00Z', iconClass: 'fa-solid fa-receipt' },
            { id: 'apgar', name: 'Escala de Apgar', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a vitalidade do recém-nascido nos primeiros minutos.', filename: BASE_URL + 'apgar.html', created_at: '2023-10-11T10:00:00Z', iconClass: 'fas fa-baby-carriage' },
            { id: 'asa', name: 'Classificação ASA', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique o estado físico pré-operatório do paciente.', filename: BASE_URL + 'asa.html', created_at: '2023-10-12T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'ballard', name: 'Escala de Ballard', category: 'Escalas Clínicas', type: 'scale', description: 'Estime a idade gestacional por critérios físicos e neuromusculares.', filename: BASE_URL + 'ballard.html', created_at: '2023-10-13T10:00:00Z', iconClass: 'fas fa-baby-carriage' },
            { id: 'barthel', name: 'Escala de Barthel', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a independência nas atividades da vida diária.', filename: BASE_URL + 'barthel.html', created_at: '2023-10-14T10:00:00Z', iconClass: 'fas fa-walking' },
            { id: 'berg', name: 'Escala de Berg', category: 'Escalas Clínicas', type: 'scale', description: 'Meça o equilíbrio e risco de queda em idosos.', filename: BASE_URL + 'berg.html', created_at: '2023-10-16T10:00:00Z', iconClass: 'fa-solid fa-person' },
            { id: 'bishop', name: 'Escala de Bishop', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a maturidade cervical no trabalho de parto.', filename: BASE_URL + 'bishop.html', created_at: '2023-10-17T10:00:00Z', iconClass: 'fa-solid fa-user-doctor' },
            { id: 'braden', name: 'Escala de Braden', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o risco de úlcera por pressão.', filename: BASE_URL + 'braden.html', created_at: '2023-10-18T10:00:00Z', iconClass: 'fas fa-bed' },
            { id: 'bps', name: 'Escala de BPS', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a dor em pacientes sedados.', filename: BASE_URL + 'bps.html', created_at: '2023-10-15T10:00:00Z', iconClass: 'fa-solid fa-mask-face' },
            { id: 'cam-icu', name: 'Escala CAM - UTI', category: 'Escalas Clínicas', type: 'scale', description: 'Detecte delirium em pacientes internados em UTI.', filename: BASE_URL + 'cam.html', created_at: '2023-10-19T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'capurro', name: 'Escala de Capurro', category: 'Escalas Clínicas', type: 'scale', description: 'Calcule a idade gestacional do recém-nascido.', filename: BASE_URL + 'capurro.html', created_at: '2023-10-20T10:00:00Z', iconClass: 'fas fa-baby-carriage' },
            { id: 'cincinnati', name: 'Escala de Cincinnati', category: 'Escalas Clínicas', type: 'scale', description: 'Identifique sinais clínicos de AVC rapidamente.', filename: BASE_URL + 'cincinnati.html', created_at: '2023-10-21T10:00:00Z', iconClass: 'fas fa-hospital-user' },
            { id: 'cornell', name: 'Escala de Cornell', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie sintomas de depressão em pacientes com demência.', filename: BASE_URL + 'cornell.html', created_at: '2023-10-22T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'cries', name: 'Escala de CRIES', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a dor neonatal de forma objetiva.', filename: BASE_URL + 'cries.html', created_at: '2023-10-23T10:00:00Z', iconClass: 'fa-solid fa-child' },
            { id: 'curb-65', name: 'Escala de CURB-65', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique a gravidade de pneumonia comunitária.', filename: BASE_URL + 'curb-65.html', created_at: '2023-10-24T10:00:00Z', iconClass: 'fa-solid fa-lungs-virus' },
            { id: 'gds', name: 'Escala de Depressão Geriátrica (GDS)', category: 'Escalas Clínicas', type: 'scale', description: 'Identifique sintomas depressivos em idosos.', filename: BASE_URL + 'gds.html', created_at: '2023-11-07T10:00:00Z', iconClass: 'fas fa-child' },
            { id: 'downton', name: 'Escala de Downton', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o risco de quedas em idosos hospitalizados.', filename: BASE_URL + 'downton.html', created_at: '2023-11-01T10:00:00Z', iconClass: 'fa-solid fa-shower' },
            { id: 'numerica-dor', name: 'Escala de Dor (Numérica)', category: 'Escalas Clínicas', type: 'scale', description: 'Mensure a intensidade da dor autorreferida.', filename: BASE_URL + 'escalanumerica.html', created_at: '2023-11-26T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'elpo', name: 'Escala de ELPO', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o risco de lesões perioperatórias.', filename: BASE_URL + 'elpo.html', created_at: '2023-11-02T10:00:00Z', iconClass: 'fas fa-child' },
            { id: 'fast', name: 'Escala de FAST (AVC)', category: 'Escalas Clínicas', type: 'scale', description: 'Reconheça rapidamente sinais de AVC.', filename: BASE_URL + 'fast.html', created_at: '2023-11-03T10:00:00Z', iconClass: 'fa-solid fa-person-walking-with-cane' },
            { id: 'flacc', name: 'Escala de FLACC', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a dor em crianças de forma comportamental.', filename: BASE_URL + 'flacc.html', created_at: '2023-11-04T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'four', name: 'Escala de FOUR', category: 'Escalas Clínicas', type: 'scale', description: 'Meça o nível de consciência em substituição à Glasgow.', filename: BASE_URL + 'four.html', created_at: '2023-11-05T10:00:00Z', iconClass: 'fa-solid fa-user-nurse' },
            { id: 'fugulin-scp', name: 'Escala de Fugulin (SCP)', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique pacientes segundo o grau de dependência.', filename: BASE_URL + 'fugulin.html', created_at: '2023-11-06T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'glasgow', name: 'Escala de Coma de Glasgow', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o nível de consciência em adultos e crianças.', filename: BASE_URL + 'glasgow.html', created_at: '2023-11-08T10:00:00Z', iconClass: 'fa-solid fa-eye' },
            { id: 'gosnell', name: 'Escala de Gosnell', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o risco de úlcera de pressão em pacientes.', filename: BASE_URL + 'gosnell.html', created_at: '2023-11-09T10:00:00Z', iconClass: 'fa-solid fa-weight-scale' },
            { id: 'hamilton', name: 'Escala de Hamilton', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a gravidade da ansiedade em pacientes.', filename: BASE_URL + 'hamilton.html', created_at: '2023-11-10T10:00:00Z', iconClass: 'fas fa-file-medical-alt' },
            { id: 'humpty-dumpty', name: 'Escala de Humpty Dumpty', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie risco de quedas em pacientes pediátricos.', filename: BASE_URL + 'humpty.html', created_at: '2023-11-11T10:00:00Z', iconClass: 'fas fa-file-medical-alt' },
            { id: 'johns', name: 'Escala Johns Hopkins', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie risco de quedas e mobilidade hospitalar.', filename: BASE_URL + 'johns.html', created_at: '2023-11-12T10:00:00Z', iconClass: 'fa-solid fa-person-walking-with-cane' },
            { id: 'jouvet', name: 'Escala de Jouvet', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique o nível de coma segundo reflexos.', filename: BASE_URL + 'jouvet.html', created_at: '2023-11-13T10:00:00Z', iconClass: 'fas fa-bed' },
            { id: 'katz', name: 'Escala Katz', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie independência funcional em idosos.', filename: BASE_URL + 'katz.html', created_at: '2023-11-14T10:00:00Z', iconClass: 'fa-solid fa-bath' },
            { id: 'lachs', name: 'Escala de Lachs', category: 'Escalas Clínicas', type: 'scale', description: 'Identifique maus-tratos em pacientes idosos.', filename: BASE_URL + 'lachs.html', created_at: '2023-11-15T10:00:00Z', iconClass: 'fa-solid fa-person-walking-with-cane' },
            { id: 'lanss', name: 'Escala LANSS', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie dor neuropática de forma padronizada.', filename: BASE_URL + 'lanss.html', created_at: '2023-11-16T10:00:00Z', iconClass: 'fas fa-user-nurse' },
            { id: 'lawton', name: 'Escala de Lawton', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie atividades instrumentais da vida diária.', filename: BASE_URL + 'lawton.html', created_at: '2023-11-17T10:00:00Z', iconClass: 'fa-solid fa-mug-saucer' },
            { id: 'manchester', name: 'Protocolo de Manchester', category: 'Escalas Clínicas', type: 'scale', description: 'Priorize atendimentos segundo gravidade clínica.', filename: BASE_URL + 'manchester.html', created_at: '2023-11-18T10:00:00Z', iconClass: 'fas fa-clinic-medical' },
            { id: 'meem', name: 'Escala de MEEM', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie cognição global e rastreie demência.', filename: BASE_URL + 'meem.html', created_at: '2023-11-19T10:00:00Z', iconClass: 'fas fa-wheelchair' },
            { id: 'meows', name: 'Escala de MEOWS', category: 'Escalas Clínicas', type: 'scale', description: 'Detecte precocemente deterioração materna.', filename: BASE_URL + 'meows.html', created_at: '2023-11-20T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'morse', name: 'Escala de Morse', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie risco de quedas hospitalares.', filename: BASE_URL + 'morse.html', created_at: '2023-11-21T10:00:00Z', iconClass: 'fas fa-walking' },
            { id: 'news', name: 'Escala de NEWS', category: 'Escalas Clínicas', type: 'scale', description: 'Monitore parâmetros fisiológicos críticos.', filename: BASE_URL + 'news.html', created_at: '2023-11-22T10:00:00Z', iconClass: 'fas fa-chart-line' },
            { id: 'nihss', name: 'Escala de NIHSS', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie déficits neurológicos em AVC.', filename: BASE_URL + 'nihss.html', created_at: '2023-11-23T10:00:00Z', iconClass: 'fas fa-brain' },
            { id: 'nips', name: 'Escala de NIPS', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a dor no recém-nascido.', filename: BASE_URL + 'nips.html', created_at: '2023-11-24T10:00:00Z', iconClass: 'fa-solid fa-eye-dropper' },
            { id: 'norton', name: 'Escala de Norton', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique o risco de lesão por pressão.', filename: BASE_URL + 'norton.html', created_at: '2023-11-25T10:00:00Z', iconClass: 'fas fa-file-medical-alt' },
            { id: 'ofras', name: 'Escala de OFRAS', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie risco de aspiração orofaríngea.', filename: BASE_URL + 'ofras.html', created_at: '2023-11-27T10:00:00Z', iconClass: 'fa-solid fa-square-plus' },
            { id: 'painad', name: 'Escala de Painad', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie dor em pacientes com demência avançada.', filename: BASE_URL + 'painad.html', created_at: '2023-11-28T10:00:00Z', iconClass: 'fa-solid fa-hand-holding-medical' },
            { id: 'pelod', name: 'Escala de PELOD', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie falência orgânica em pacientes pediátricos.', filename: BASE_URL + 'pelod.html', created_at: '2023-11-29T10:00:00Z', iconClass: 'fa-solid fa-comment-medical' },
            { id: 'perroca-scp', name: 'Escala de Perroca (SCP)', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique pacientes segundo complexidade assistencial.', filename: BASE_URL + 'perroca.html', created_at: '2023-12-01T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'pews', name: 'Escala de PEWS', category: 'Escalas Clínicas', type: 'scale', description: 'Monitore precocemente instabilidade pediátrica.', filename: BASE_URL + 'pews.html', created_at: '2023-11-30T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'prism', name: 'Escala de PRISM', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie gravidade de pacientes pediátricos críticos.', filename: BASE_URL + 'prism.html', created_at: '2023-12-02T10:00:00Z', iconClass: 'fas fa-lungs' },
            { id: 'qsofa', name: 'Escala de qSOFA', category: 'Escalas Clínicas', type: 'scale', description: 'Identifique sepse de forma rápida e prática.', filename: BASE_URL + 'qsofa.html', created_at: '2023-12-03T10:00:00Z', iconClass: 'fas fa-lungs' },
            { id: 'rancho-los-amigos', name: 'Escala Rancho Los Amigos', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a recuperação neurológica pós-trauma.', filename: BASE_URL + 'rancholosamigos.html', created_at: '2023-12-05T10:00:00Z', iconClass: 'fas fa-user-md' },
            { id: 'ramsay', name: 'Escala de Ramsay (Sedação)', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie o nível de sedação em pacientes críticos.', filename: BASE_URL + 'ramsay.html', created_at: '2023-12-04T10:00:00Z', iconClass: 'fa-solid fa-bed-pulse' },
            { id: 'richmond-rass', name: 'Escala de Richmond (RASS)', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie agitação e sedação em terapia intensiva.', filename: BASE_URL + 'richmond.html', created_at: '2023-12-06T10:00:00Z', iconClass: 'fas fa-user-md' },
            { id: 'saps-iii', name: 'Escala de SAPS III', category: 'Escalas Clínicas', type: 'scale', description: 'Classifique a gravidade de pacientes críticos.', filename: BASE_URL + 'saps.html', created_at: '2023-12-06T10:00:00Z', iconClass: 'fas fa-hospital-alt' },
            { id: 'silverman-anderson', name: 'Escala de Silverman-Anderson', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie a dificuldade respiratória neonatal.', filename: BASE_URL + 'silverman.html', created_at: '2023-12-07T10:00:00Z', iconClass: 'fas fa-notes-medical' },
            { id: 'sofa', name: 'Escala de SOFA', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie disfunção orgânica em pacientes graves.', filename: BASE_URL + 'sofa.html', created_at: '2023-12-08T10:00:00Z', iconClass: 'fas fa-heartbeat' },
            { id: 'tinetti', name: 'Escala de Tinetti', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie equilíbrio e marcha em idosos.', filename: BASE_URL + 'tinetti.html', created_at: '2023-12-09T10:00:00Z', iconClass: 'fa-solid fa-person-walking-with-cane' },
            { id: 'waterlow', name: 'Escala de Waterlow', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie risco de úlcera por pressão.', filename: BASE_URL + 'waterlow.html', created_at: '2023-12-10T10:00:00Z', iconClass: 'fa-solid fa-weight-scale' },
            { id: 'wood-downes', name: 'Escala de Wood e Downes', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie insuficiência respiratória em lactentes.', filename: BASE_URL + 'downes.html', created_at: '2023-12-11T10:00:00Z', iconClass: 'fa-solid fa-stethoscope' },
            { id: 'zarit', name: 'Escala de Zarit', category: 'Escalas Clínicas', type: 'scale', description: 'Avalie sobrecarga do cuidador principal.', filename: BASE_URL + 'zarit.html', created_at: '2023-12-12T10:00:00Z', iconClass: 'fa-solid fa-hospital-user' }
        ];
        
        const vaccineIconClass = 'fas fa-syringe';
        
        const vaccineToolsData = [
            { id: 'vacina-prematuro', name: 'Prematuro', category: 'Vacinas', type: 'info', description: 'Calendário vacinal para bebês prematuros.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-01T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-criancas', name: 'Crianças (0 a <10 anos)', category: 'Vacinas', type: 'info', description: 'Calendário vacinal infantil.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-02T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-adolescentes', name: 'Adolescentes (10 a 19 anos)', category: 'Vacinas', type: 'info', description: 'Calendário vacinal para adolescentes.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-03T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-adultos', name: 'Adultos (20 a 59 anos)', category: 'Vacinas', type: 'info', description: 'Calendário vacinal para adultos.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-04T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-idosos', name: 'Idosos (mais de 60 anos)', category: 'Vacinas', type: 'info', description: 'Calendário vacinal para idosos.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-05T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-gestantes', name: 'Gestantes', category: 'Vacinas', type: 'info', description: 'Calendário vacional para gestantes.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-06T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-pacientes-especiais', name: 'Pacientes Especiais', type: 'info', description: 'Calendário para pacientes com condições especiais.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-07T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-ocupacional', name: 'Ocupacional', category: 'Vacinas', type: 'info', description: 'Calendário vacinal para profissionais de saúde', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-08T10:00:00Z', iconClass: vaccineIconClass },
            { id: 'vacina-pneumococicas', name: 'Vacinas Pneumocócicas', category: 'Vacinas', type: 'info', description: 'Calendário para pacientes com condições especiais.', filename: 'tabelas-vacinas-crianca.html', created_at: '2023-09-09T10:00:00Z', iconClass: vaccineIconClass },
        ];


        const utilIcons = {
            search: 'fas fa-search',
            clear: 'fas fa-sync-alt',
            grid: 'fas fa-th',
            list: 'fas fa-list',
            details: 'fas fa-clipboard-list',
            compact: 'fas fa-list-alt',
            back: 'fas fa-arrow-left',
            noResults: 'fas fa-exclamation-circle',
            calculator: 'fas fa-calculator', 
            calendar: 'fas fa-calendar-alt',
            sort: 'fas fa-sort-alpha-down',
            heartbeat: 'fas fa-heartbeat',
            clipboard: 'fas fa-clipboard',
            dropdown: 'fas fa-chevron-down', 
            iconXl: 'fas fa-square-full',
            iconLg: 'fas fa-th-large',
            iconMd: 'fas fa-th',
            iconSm: 'fas fa-grip-horizontal',
            content: 'fas fa-align-left',
        };

        const quickAccessLinks = [
            { id: 'qa-calc', name: 'Calculadoras', iconClass: utilIcons.calculator, href: 'https://www.calculadorasdeenfermagem.com.br/calculadoras.html' },
            { id: 'qa-escalas', name: 'Escalas Clínicas', iconClass: utilIcons.heartbeat, href: 'https://www.calculadorasdeenfermagem.com.br/escalas-clinicas.html' }, 
            { id: 'qa-vacinas', name: 'Calendário Vacinal', iconClass: 'fas fa-syringe', href: 'https://www.calculadorasdeenfermagem.com.br/calendario-vacinal.html' },
            { id: 'qa-plano', name: 'Plano de Enfermagem', iconClass: utilIcons.clipboard, href: 'https://www.calculadorasdeenfermagem.com.br/plano-de-enfermagem.html' },
        ];

        const sortOptions = [
            { value: 'name-asc', label: 'Nome (A-Z)' },
            { value: 'name-desc', label: 'Nome (Z-A)' },
            { value: 'date-desc', label: 'Recentes' },
            { value: 'date-asc', label: 'Antigos' },
            // ADICIONADO: Opção para manter a ordem manual/padrão definida em TOOLS_DATA
            { value: 'default', label: 'Padrão' }, 
        ];

        const viewOptions = [
            { value: 'icon-xl', label: 'Ícones extragrandes', icon: 'far fa-square', sizeClass: 'icon-size-xl', isGrid: true },
            { value: 'icon-lg', label: 'Ícones grandes', icon: 'far fa-window-maximize', sizeClass: 'icon-size-lg', isGrid: true },
            { value: 'icon-md', label: 'Ícones médios', icon: 'fas fa-th', sizeClass: 'icon-size-md', isGrid: true },
            { value: 'icon-sm', label: 'Ícones pequenos', icon: 'fas fa-grip', sizeClass: 'icon-size-sm', isGrid: true },
            { value: 'list', label: 'Lista', icon: 'fas fa-list', isGrid: false, showDescription: false, isCompact: false },
            { value: 'details', label: 'Detalhes', icon: 'fas fa-list-ul', isGrid: false, showDescription: true, isCompact: false },
            { value: 'grid', label: 'Blocos', icon: 'fas fa-th-large', isGrid: true, sizeClass: 'text-4xl' },
            { value: 'content', label: 'Conteúdo', icon: 'fas fa-align-left', isGrid: false, showDescription: true, isCompact: false },
            { value: 'compact', label: 'Exibição compacta', icon: 'fas fa-bars-staggered', isGrid: false, showDescription: false, isCompact: true }
        ];
        
        const allTools = [...TOOLS_DATA, ...vaccineToolsData];


        let state = {
            inputValue: "",
            searchTerm: "",
            viewMode: 'grid',
            // ATUALIZADO: O critério de ordenação padrão agora é 'default' para respeitar a ordem do array
            sortCriteria: 'default', 
            showIcons: true,
        };

        const appContainer = document.getElementById('app');
        
        const quickAccessContainer = document.getElementById('quick-access-container');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const clearButton = document.getElementById('clear-button');
        const controlsContainer = document.getElementById('controls-container');
        
        const calculatorsSection = document.getElementById('calculators-section');
        const scalesSection = document.getElementById('scales-section');
        const vaccinesSection = document.getElementById('vaccines-section');
        
        const calculatorsContainer = document.getElementById('calculators-container');
        const scalesContainer = document.getElementById('scales-container');
        const vaccinesContainer = document.getElementById('vaccines-container');
        
        const noResultsEl = document.getElementById('no-results');

        const breadcrumbs = document.getElementById('breadcrumbs');

        function QuickAccessCard(item) {
            const anchorAttr = item.href.startsWith('#') ? `data-anchor-target="${item.href}"` : '';
            
            return `
            <a href="${item.href}" ${anchorAttr} class="group quick-access-card">
                <div class="aspect-square hover:shadow-xl transition-all duration-300 cursor-pointer border-2 hover:border-[#1A3E74] overflow-hidden bg-white rounded-2xl">
                    <div class="p-5 flex flex-col items-center justify-center text-center h-full">
                        <div class="p-3 bg-[#1A3E74]/10 rounded-lg mb-3">
                            <i class="${item.iconClass} w-8 h-8 text-[#1A3E74]"></i>
                        </div>
                        <p class="text-lg font-bold text-[#1A3E74]">${item.name}</p>
                    </div>
                </div>
            </a>
            `;
        }
        
        function ToolCard(tool, viewMode = 'grid') {
            const viewConfig = viewOptions.find(v => v.value === viewMode) || viewOptions.find(v => v.value === 'grid');
            
            let badgeText = 'Escala';
            let badgeClass = 'bg-blue-50 text-blue-700 border-blue-200';
            let listBadgeClass = 'bg-blue-100 text-blue-800';
            let buttonText = 'Classificar';
            let buttonIconClass = utilIcons.calculator;
            
            if (tool.type === 'calculator') {
                badgeText = 'Calculadora';
                badgeClass = 'bg-green-50 text-green-700 border-green-200';
                listBadgeClass = 'bg-green-100 text-green-800';
                buttonText = 'Calcular';
            } else if (tool.type === 'info') {
                badgeText = 'Informação';
                badgeClass = 'bg-purple-50 text-purple-700 border-purple-200';
                listBadgeClass = 'bg-purple-100 text-purple-800';
                buttonText = 'Consultar';
                buttonIconClass = utilIcons.calendar;
            }

            if (viewConfig.isGrid) {
                const sizeClass = viewConfig.sizeClass || 'text-4xl';
                const isIconView = viewConfig.value.startsWith('icon-');

                return `
                <a href="${tool.filename}" class="group tool-card hover:shadow-xl transition-all duration-300 cursor-pointer border-2 hover:border-[#1A3E74] overflow-hidden flex flex-col bg-white rounded-2xl ${isIconView ? 'icon-view-card' : ''} ${sizeClass}" 
                     title="Acessar: ${tool.name}">
                    
                    <div class="flex-grow p-5 pb-3">
                        <div class="flex items-start justify-between mb-2">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${badgeClass}">
                                ${badgeText}
                            </span>
                            
                            ${state.showIcons && tool.iconClass ? `
                            <div class="text-[#1A3E74] opacity-50 group-hover:opacity-100 transition-opacity card-icon">
                                <i class="${tool.iconClass} ${isIconView ? '' : 'text-4xl'}"></i>
                            </div>
                            ` : ''}
                        </div>
                        <h3 class="text-lg font-bold text-[#1A3E74] group-hover:text-[#1A3E74] transition-colors flex items-center justify-between">
                            <span class="flex-1 mr-2 line-clamp-2 min-h-[40px]">${tool.name}</span>
                        </h3>
                    </div>
                    
                    <div class="px-5 pt-0">
                        <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
                        <p class="text-sm text-gray-700 leading-relaxed line-clamp-3 min-h-[60px]">${tool.description}</p>
                    </div>
                    
                    <div class="p-5 pt-0 mt-auto">
                        <div class="w-full h-[60px] bg-[#1A3E74] text-white rounded-xl font-semibold shadow-sm group-hover:bg-[#15325e] transition-colors text-lg flex justify-center items-center">
                            <i class="${buttonIconClass} w-5 h-5 mr-2"></i> ${buttonText}
                        </div>
                    </div>
                </a>
                `;
            } 
            
            const showDescription = viewConfig.showDescription || false;
            const isCompact = viewConfig.isCompact || false;
            
            const itemPadding = isCompact ? 'p-3' : 'p-4';
            const iconContainer = isCompact ? 'p-2' : 'p-3';
            const iconSize = isCompact ? 'w-4 h-4' : 'w-6 h-6';
            const nameClass = isCompact ? 'text-sm' : 'text-base';
            
            // CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste
            const descriptionHTML = showDescription 
                ? `<p class="text-xs text-gray-700 line-clamp-1">${tool.description}</p>` 
                : '';
            const buttonClass = isCompact ? 'h-8 px-2 text-xs' : 'h-10 px-3 py-1.5 text-sm';
            const buttonIconSize = isCompact ? 'w-3 h-3 mr-1' : 'w-4 h-4 mr-2';

            return `
            <a href="${tool.filename}" class="tool-card tool-list-item hover:shadow-lg transition-shadow duration-300 cursor-pointer bg-white rounded-lg border block" 
                 title="Acessar: ${tool.name}">
                
                <div class="${itemPadding} flex items-center justify-between gap-4">
                    
                    ${state.showIcons && tool.iconClass ? `
                    <div class="${iconContainer} bg-gray-100 rounded-lg text-[#1A3E74] flex-shrink-0">
                        <i class="${tool.iconClass} ${iconSize}"></i>
                    </div>
                    ` : ''}

                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1 flex-wrap">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold ${listBadgeClass}">
                                ${badgeText}
                            </span>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200">
                                ${tool.category}
                            </span>
                        </div>
                        <h3 class="${nameClass} font-bold text-[#1A3E74] line-clamp-1">
                            ${tool.name}
                        </h3>
                        ${descriptionHTML}
                    </div>
                    
                    <div class="flex items-center gap-2 flex-shrink-0">
                        <div title="${buttonText}" class="bg-[#1A3E74] text-white rounded-xl font-semibold shadow-sm group-hover:bg-[#15325e] transition-colors flex justify-center items-center ${buttonClass}">
                            <i class="${buttonIconClass} ${buttonIconSize}"></i> ${buttonText}
                        </div>
                    </div>
                </div>
            </a>
            `;
        }
        
        
        function renderControls() {
            const controlsEl = document.getElementById('controls-container');
            if (!controlsEl) return;
            
            // ATUALIZADO: Lógica de ícone de ordenação
            let sortIcon = 'fa-sort'; // Ícone padrão para 'default'
            if (state.sortCriteria.includes('name')) {
                sortIcon = state.sortCriteria.endsWith('asc') ? 'fa-sort-alpha-down' : 'fa-sort-alpha-up';
            } else if (state.sortCriteria.includes('date')) {
                sortIcon = state.sortCriteria.endsWith('desc') ? 'fa-calendar-day' : 'fa-calendar-week';
            } else {
                 sortIcon = 'fa-stream'; // Ícone para 'default' (ordem da lista)
            }
            
            const currentSortOption = sortOptions.find(opt => opt.value === state.sortCriteria) || sortOptions[0];
            
            const sortHtml = `
                <div id="sort-dropdown-wrapper" class="relative z-50 flex items-center gap-2">
                    <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
                    <label class="text-sm font-medium text-gray-700 hidden md:block">Classificar:</label>
                    
                    <button id="sortButton" class="flex items-center gap-2 p-2 bg-gray-100 rounded-lg shadow-sm hover:bg-gray-200 transition-colors" aria-expanded="false" aria-controls="sortMenu">
                        <i class="fas ${sortIcon} w-4 h-4 text-gray-700"></i>
                        <span class="text-sm font-semibold text-gray-700">${currentSortOption.label}</span>
                        <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                        <i class="fas fa-chevron-down text-xs text-gray-700"></i>
                    </button>
                    
                    <div id="sortMenu" class="absolute left-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 hidden ring-1 ring-gray-200 top-full">
                        ${sortOptions.map(opt => {
                            // ATUALIZADO: Lógica de ícone para o menu dropdown
                            let optIcon = 'fa-sort';
                            if (opt.value.includes('name')) {
                                optIcon = opt.value.endsWith('asc') ? 'fa-sort-alpha-down' : 'fa-sort-alpha-up';
                            } else if (opt.value.includes('date')) {
                                optIcon = opt.value.endsWith('desc') ? 'fa-calendar-day' : 'fa-calendar-week';
                            } else if (opt.value === 'default') {
                                optIcon = 'fa-stream';
                            }
                            
                            return `
                            <button 
                                data-sort-criteria="${opt.value}" 
                                class="sort-criteria-button flex items-center gap-2 p-2 w-full text-left cursor-pointer hover:bg-gray-100 ${state.sortCriteria === opt.value ? 'bg-gray-50 font-semibold text-[#1A3E74]' : 'text-gray-700'}"
                            >
                                <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                                <i class="fas ${optIcon} w-4 h-4 text-gray-700"></i>
                                <span>${opt.label}</span>
                            </button>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;


            const viewDropdownHtml = `
            <div id="view-dropdown-wrapper" class="relative z-40 flex items-center gap-2 flex-wrap">
                <!-- CORREÇÃO WCAG: text-gray-600 alterado para text-gray-700 para contraste -->
                <label class="text-sm font-medium text-gray-700 hidden md:block">Visualizar:</label>
                <button id="viewButton" class="flex items-center gap-2 p-2 bg-gray-100 rounded-lg shadow-sm hover:bg-gray-200 transition-colors" aria-expanded="false" aria-controls="viewMenu">
                    <i class="${viewOptions.find(opt => opt.value === state.viewMode)?.icon || 'fas fa-th'} text-gray-700"></i>
                    <span class="text-sm font-semibold text-gray-700">${viewOptions.find(opt => opt.value === state.viewMode)?.label || 'Blocos'}</span>
                    <!-- CORREÇÃO WCAG: text-gray-500 alterado para text-gray-700 para contraste -->
                    <i class="fas fa-chevron-down text-xs text-gray-700"></i>
                </button>
                <div id="viewMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 hidden ring-1 ring-gray-200 top-full">
                    ${viewOptions.map(opt => `
                        <button 
                            data-view-mode="${opt.value}" 
                            class="view-mode-button flex items-center gap-2 p-2 w-full text-left cursor-pointer hover:bg-gray-100 ${state.viewMode === opt.value ? 'bg-gray-50 font-semibold text-[#1A3E74]' : 'text-gray-700'}"
                        >
                            <i class="${opt.icon} w-4 h-4"></i>
                            <span>${opt.label}</span>
                        </button>
                    `).join('')}
                </div>
                <div class="flex items-center gap-2 pl-3">
                    <input 
                        type="checkbox" 
                        id="show-icons-toggle"
                        ${state.showIcons ? 'checked' : ''}
                        class="w-4 h-4 text-[#1A3E74] rounded border-gray-300 focus:ring-[#1A3E74]"
                    />
                    <label for="show-icons-toggle" class="text-sm font-medium text-gray-700 cursor-pointer">
                        Mostrar Ícones
                    </label>
                </div>
            </div>
            `;

            controlsEl.innerHTML = `
                <div class="flex flex-col md:flex-row justify-between items-center gap-4 w-full">
                    ${sortHtml}
                    ${viewDropdownHtml}
                </div>
            `;
        }

        function renderQuickAccess() {
            if (quickAccessContainer) {
                quickAccessContainer.innerHTML = quickAccessLinks.map(QuickAccessCard).join('');
            }
        }
        
        function renderAllToolSections() {
            let filteredTools = allTools.filter(tool => {
                if (!state.searchTerm) return true;
                const searchLower = state.searchTerm.toLowerCase();
                return tool.name.toLowerCase().includes(searchLower) || 
                       tool.description.toLowerCase().includes(searchLower) ||
                       (tool.category && tool.category.toLowerCase().includes(searchLower));
            });

            // ATUALIZADO: Lógica de ordenação
            if (state.sortCriteria !== 'default') {
                filteredTools.sort((a, b) => {
                    switch (state.sortCriteria) {
                        case 'name-asc':
                            return a.name.localeCompare(b.name);
                        case 'name-desc':
                            return b.name.localeCompare(a.name);
                        case 'date-desc':
                            return new Date(b.created_at) - new Date(a.created_at); // Corrigido (era b.created_at - b.created_at)
                        case 'date-asc':
                            return new Date(a.created_at) - new Date(b.created_at); // Corrigido (era b.created_at)
                        default:
                            return 0;
                    }
                });
            }
            // Se sortCriteria for 'default', a ordem de 'allTools' (que vem de TOOLS_DATA) é mantida.

            const calculators = filteredTools.filter(tool => tool.type === 'calculator');
            const scales = filteredTools.filter(tool => tool.type === 'scale');
            const vaccines = filteredTools.filter(tool => tool.type === 'info');

            renderSection(calculatorsSection, calculatorsContainer, calculators);
            renderSection(scalesSection, scalesContainer, scales);
            renderSection(vaccinesSection, vaccinesContainer, vaccines);

            if (noResultsEl) {
                noResultsEl.style.display = filteredTools.length === 0 ? 'block' : 'none';
            }
        }

        function renderSection(sectionEl, containerEl, tools) {
            if (!sectionEl || !containerEl) return;

            if (tools.length === 0) {
                sectionEl.style.display = 'none';
                containerEl.innerHTML = '';
                return;
            }

            sectionEl.style.display = 'block';

            const viewMode = state.viewMode;
            const viewConfig = viewOptions.find(v => v.value === viewMode) || viewOptions.find(v => v.value === 'grid');
            
            let layoutClass;
            if (viewConfig.isGrid) {
                const columnClasses = {
                    'icon-size-xl': 'grid-cols-1 md:grid-cols-2 gap-8',
                    'icon-size-lg': 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6',
                    'icon-size-md': 'grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4',
                    'icon-size-sm': 'grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4',
                    'text-4xl': 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6',
                }[viewConfig.sizeClass] || 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';
                
                layoutClass = `grid ${columnClasses}`;
            } else {
                layoutClass = viewConfig.isCompact ? 'flex flex-col gap-2' : 'flex flex-col gap-4';
            }

            containerEl.className = `tool-list-container ${layoutClass}`;
            containerEl.innerHTML = tools.map(tool => ToolCard(tool, viewMode)).join('');
        }
        
        function updateBreadcrumbs() {
            const homePaths = ['/', '/en/', '/es/', '/de/', '/it/', '/fr/', '/hi/', '/zh/', '/ar/', '/ja/'];
            const currentPath = window.location.pathname;

            if (homePaths.includes(currentPath)) {
                breadcrumbs.style.display = 'none';
                breadcrumbs.innerHTML = '';
            } else {
                breadcrumbs.style.display = 'none';
                breadcrumbs.innerHTML = '';
            }
        }

        function performSearch() {
            state.searchTerm = state.inputValue.trim().toLowerCase();
            // ATUALIZADO: Se houver busca, muda a ordenação para relevância (nome A-Z)
            if (state.searchTerm && state.sortCriteria === 'default') {
                state.sortCriteria = 'name-asc';
                renderControls(); // Atualiza o dropdown de ordenação
            } else if (!state.searchTerm) {
                // Se limpar a busca, volta para a ordenação padrão
                state.sortCriteria = 'default';
                renderControls();
            }
            
            renderAllToolSections();
            
            const searchCard = document.getElementById('search-card');
            if (searchCard) {
                const toolsCard = document.getElementById('tools-card');
                if (toolsCard) {
                     toolsCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        }

        function clearSearch() {
            state.inputValue = "";
            state.searchTerm = "";
            if (searchInput) {
                searchInput.value = "";
            }
            // ATUALIZADO: Volta para a ordenação padrão ao limpar
            state.sortCriteria = 'default'; 
            renderControls(); 
            renderAllToolSections();
        }

        function handleAnchorClick(e) {
            const targetId = this.getAttribute('data-anchor-target') || this.getAttribute('href');
            
            if (targetId && targetId.startsWith('#')) {
                e.preventDefault();
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }
        
        const toggleViewMenu = () => {
            const viewButton = document.getElementById("viewButton");
            const viewMenu = document.getElementById("viewMenu");
            if (!viewButton || !viewMenu) return;
            viewMenu.classList.toggle("hidden");
            viewButton.setAttribute('aria-expanded', !viewMenu.classList.contains('hidden'));
        };

        const closeViewMenu = () => {
            const viewButton = document.getElementById("viewButton");
            const viewMenu = document.getElementById("viewMenu");
            if (!viewMenu) return;
            viewMenu.classList.add("hidden");
            if (viewButton) viewButton.setAttribute('aria-expanded', 'false');
        };

        const toggleSortMenu = () => {
            const sortButton = document.getElementById("sortButton");
            const sortMenu = document.getElementById("sortMenu");
            if (!sortButton || !sortMenu) return;
            sortMenu.classList.toggle("hidden");
            sortButton.setAttribute('aria-expanded', !sortMenu.classList.contains('hidden'));
        };

        const closeSortMenu = () => {
            const sortButton = document.getElementById("sortButton");
            const sortMenu = document.getElementById("sortMenu");
            if (!sortMenu) return;
            sortMenu.classList.add("hidden");
            if (sortButton) sortButton.setAttribute('aria-expanded', 'false');
        };


        const handleViewMenuClick = (e) => {
            const button = e.target.closest('.view-mode-button');
            if (button) {
                state.viewMode = button.dataset.viewMode;
                renderAllToolSections();
                renderControls();
                closeViewMenu();
            }
        };
        
        const handleSortMenuClick = (e) => {
            const button = e.target.closest('.sort-criteria-button');
            if (button) {
                state.sortCriteria = button.dataset.sortCriteria;
                renderAllToolSections();
                renderControls();
                closeSortMenu();
            }
        };

        function globalClickListener(e) {
            const target = e.target;
            
            const viewButton = target.closest('#viewButton');
            if (viewButton) {
                toggleViewMenu();
                return;
            }
            const viewMenu = target.closest('#viewMenu');
            if (viewMenu) {
                handleViewMenuClick(e);
                return;
            }
            const sortButton = target.closest('#sortButton');
            if (sortButton) {
                toggleSortMenu();
                return;
            }
            const sortMenu = target.closest('#sortMenu');
            if (sortMenu) {
                handleSortMenuClick(e);
                return;
            }
            
            const anchorLink = target.closest('[data-anchor-target]');
            if (anchorLink) {
                handleAnchorClick.call(anchorLink, e);
                return;
            }
            
            const viewButtonEl = document.getElementById("viewButton");
            const viewMenuEl = document.getElementById("viewMenu");
            if (viewButtonEl && viewMenuEl && !viewButtonEl.contains(e.target) && !viewMenuEl.contains(e.target)) {
                closeViewMenu();
            }
            
            const sortButtonEl = document.getElementById("sortButton");
            const sortMenuEl = document.getElementById("sortMenu");
            if (sortButtonEl && sortMenuEl && !sortButtonEl.contains(e.target) && !sortMenuEl.contains(e.target)) {
                closeSortMenu();
            }
        }

        function globalChangeListener(e) {
            const target = e.target;
            
            if (target.id === 'show-icons-toggle') {
                state.showIcons = target.checked;
                renderAllToolSections();
                return;
            }
        }
        
        
        function initApp() {
            renderQuickAccess();
            
            renderControls();
            
            renderAllToolSections();
            
            updateBreadcrumbs();

            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    state.inputValue = e.target.value;
                });
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
            if (searchButton) searchButton.addEventListener('click', performSearch);
            if (clearButton) clearButton.addEventListener('click', clearSearch);

            document.addEventListener('click', globalClickListener);
            document.addEventListener('change', globalChangeListener);
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }

    </script>

    <script>
        
        // <!-- INÍCIO: Lógica de gerenciamento de Modal/Overlay (Ponto 3.1 e Navegação Teclado) -->
        let lastFocusedElement = null;
        let currentOpenOverlay = null;
        // Seletor para todos os elementos focáveis dentro de um modal/menu
        const focusableElementsSelector = 'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])';

        /**
         * Abre um overlay (modal, menu mobile, menu acessibilidade) e gerencia o foco.
         * @param {string} overlayId - O ID do elemento a ser aberto.
         * @param {HTMLElement | null} triggerElement - O elemento que acionou a abertura, para devolver o foco ao fechar.
         */
        function openOverlay(overlayId, triggerElement = null) {
            const overlay = document.querySelector(overlayId);
            if (!overlay) return;

            // Salva o elemento que estava focado antes de abrir o overlay
            lastFocusedElement = triggerElement || document.activeElement;
            
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            // Lógica específica para abrir cada tipo de overlay
            if (overlay.classList.contains('modal')) {
                overlay.classList.remove('hidden');
                overlay.style.display = 'flex';
            } else if (overlay.id === 'mobile-menu') {
                overlay.classList.remove('translate-x-full');
                if (mobileMenuOverlay) mobileMenuOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else if (overlay.id === 'accessibility-menu') {
                overlay.classList.add('open');
            }
            
            currentOpenOverlay = overlay;
            
            // Ponto 3.1: Mover foco para o primeiro elemento focável
            // Usamos setTimeout para garantir que a transição CSS termine e o elemento esteja visível para focar
            setTimeout(() => {
                const firstFocusable = overlay.querySelector(focusableElementsSelector);
                if (firstFocusable) {
                    firstFocusable.focus();
                }
            }, 100); // 100ms é um atraso seguro
            
            // Adiciona o listener de teclado para o focus trap e tecla ESC
            document.addEventListener('keydown', handleKeyboardTrap);
        }

        /**
         * Fecha um overlay e devolve o foco ao elemento original.
         * @param {string} overlayId - O ID do elemento a ser fechado.
         */
        function closeOverlay(overlayId) {
            const overlay = document.querySelector(overlayId);
            if (!overlay) return;
            
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            // Lógica específica para fechar cada tipo de overlay
            if (overlay.classList.contains('modal')) {
                overlay.classList.add('hidden');
                overlay.style.display = 'none';
            } else if (overlay.id === 'mobile-menu') {
                overlay.classList.add('translate-x-full');
                if (mobileMenuOverlay) mobileMenuOverlay.classList.add('hidden');
                document.body.style.overflow = '';
            } else if (overlay.id === 'accessibility-menu') {
                overlay.classList.remove('open');
            }

            // Limpa o listener de teclado
            if (currentOpenOverlay === overlay) {
                currentOpenOverlay = null;
                document.removeEventListener('keydown', handleKeyboardTrap);
            }
            
            // Devolve o foco ao elemento que abriu o overlay
            if (lastFocusedElement) {
                lastFocusedElement.focus();
                lastFocusedElement = null;
            }
        }

        /**
         * Gerencia o teclado dentro de um overlay aberto.
         * @param {KeyboardEvent} e - O evento do teclado.
         */
        function handleKeyboardTrap(e) {
            if (!currentOpenOverlay) return;

            // User Request: Fechar com a tecla ESC
            if (e.key === 'Escape') {
                closeOverlay(`#${currentOpenOverlay.id}`);
                return;
            }

            // Ponto 3.1: Focus Trap com a tecla TAB
            if (e.key === 'Tab') {
                const focusableElements = Array.from(currentOpenOverlay.querySelectorAll(focusableElementsSelector));
                if (focusableElements.length === 0) {
                    e.preventDefault(); // Nenhum elemento focável, impede o Tab
                    return;
                }

                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                
                if (e.shiftKey) { // Shift + Tab (navegando para trás)
                    if (document.activeElement === firstElement) {
                        lastElement.focus(); // Vai para o último elemento
                        e.preventDefault();
                    }
                } else { // Tab (navegando para frente)
                    if (document.activeElement === lastElement) {
                        firstElement.focus(); // Vai para o primeiro elemento
                        e.preventDefault();
                    }
                }
            }
        }
        // <!-- FIM: Lógica de gerenciamento de Modal/Overlay -->


        function activateVLibrasButton() {
            const vlibrasButton = document.querySelector('[vw-access-button] button');
            if (vlibrasButton) {
                vlibrasButton.click();
                console.log('VLibras ativado via clique simulado.');
            } else {
                const vwAccessButton = document.querySelector('[vw-access-button]');
                if (vwAccessButton) {
                    vwAccessButton.click();
                    console.log('VLibras ativado via clique no container.');
                } else {
                    console.error('Botão VLibras não encontrado.');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenuCloseBtn = document.getElementById('mobile-menu-close-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            const accessibilityBtn = document.getElementById('accessibility-btn');
            const mobileAccessibilityBtn = document.getElementById('mobile-accessibility-btn');
            const closeAccessibilityMenu = document.getElementById('close-accessibility-menu');
            const accessibilityMenu = document.getElementById('accessibility-menu');
            const resetAccessibility = document.getElementById('reset-accessibility');

            const librasBtn = document.getElementById('libras-btn');
            const mobileLibrasBtn = document.getElementById('mobile-libras-btn');
            
            // --- REFATORADO: Menu Mobile usa openOverlay/closeOverlay ---
            if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', () => openOverlay('#mobile-menu', mobileMenuBtn));
            if (mobileMenuCloseBtn) mobileMenuCloseBtn.addEventListener('click', () => closeOverlay('#mobile-menu'));
            if (mobileMenuOverlay) mobileMenuOverlay.addEventListener('click', () => closeOverlay('#mobile-menu'));

            if (mobileMenu) {
                mobileMenu.querySelectorAll('a').forEach(link => {
                    // Mantém o fechamento ao clicar em links
                    link.addEventListener('click', () => closeOverlay('#mobile-menu'));
                });
            }
            
            // --- REFATORADO: Menu Acessibilidade usa openOverlay/closeOverlay ---
            if (accessibilityBtn) {
                accessibilityBtn.addEventListener('click', () => openOverlay('#accessibility-menu', accessibilityBtn));
            }
            if (mobileAccessibilityBtn) {
                mobileAccessibilityBtn.addEventListener('click', function() {
                    closeOverlay('#mobile-menu'); // Fecha menu mobile primeiro
                    openOverlay('#accessibility-menu', mobileAccessibilityBtn);
                });
            }
            if (closeAccessibilityMenu) {
                closeAccessibilityMenu.addEventListener('click', () => closeOverlay('#accessibility-menu'));
            }
            // --- FIM REFATORAÇÃO ---

            if (librasBtn) {
                librasBtn.addEventListener('click', activateVLibrasButton);
            }
            if (mobileLibrasBtn) {
                mobileLibrasBtn.addEventListener('click', function() {
                    closeOverlay('#mobile-menu');
                    activateVLibrasButton();
                });
            }
            
            if (resetAccessibility) {
                resetAccessibility.addEventListener('click', function() {
                    document.body.className = 'bg-gray-100';
                    document.body.style.fontSize = '';
                    document.body.style.lineHeight = '';
                    document.body.style.letterSpacing = '';
                    document.querySelectorAll('.acc-option').forEach(opt => opt.classList.remove('active'));
                    console.log('Configurações de acessibilidade resetadas.');
                });
            }

            document.querySelectorAll('.acc-option').forEach(option => {
                option.addEventListener('click', function() {
                    const action = this.dataset.action;
                    const value = this.dataset.value;
                    
                    const groupEl = this.closest('.acc-feature');
                    if (groupEl) {
                        const group = groupEl.dataset.group;
                        document.querySelectorAll(`[data-group="${group}"] .acc-option`).forEach(opt => {
                            opt.classList.remove('active');
                        });
                    }
                    this.classList.add('active');

                    switch(action) {
                        case 'font-size':
                            document.body.style.fontSize = value + 'em';
                            break;
                        case 'line-spacing':
                            document.body.style.lineHeight = value;
                            break;
                        case 'letter-spacing':
                            document.body.style.letterSpacing = value + 'em';
                            break;
                        case 'font-type':
                             if (value === 'serif') {
                                document.body.classList.toggle('font-serif');
                             } else if (value === 'bold') {
                                 document.body.classList.toggle('font-bold-force');
                             }
                             break;
                        case 'contrast':
                            document.body.className = document.body.className.replace(/\bcontrast-\w+/g, '');
                            if (value) document.body.classList.add('contrast-' + value);
                            break;
                        case 'highlight-links':
                            document.body.classList.toggle('links-highlighted');
                            break;
                        case 'saturation':
                            document.body.className = document.body.className.replace(/\bsaturation-\w+/g, '');
                            if (value) document.body.classList.add('saturation-' + value);
                            break;
                    }
                });
            });
            
            const desktopLangWrapper = document.getElementById('language-dropdown-wrapper');
            const mobileLangWrapper = document.getElementById('mobile-language-dropdown-wrapper');
            
            if (desktopLangWrapper && mobileLangWrapper) {
                const langClone = desktopLangWrapper.cloneNode(true);
                langClone.id = 'mobile-lang-dropdown-content';
                langClone.classList.remove('hidden', 'md:flex');
                
                const langButtonClone = langClone.querySelector('#langButton');
                if (langButtonClone) {
                    langButtonClone.classList.remove('p-2'); 
                    langButtonClone.classList.add('p-3', 'w-full'); 
                }
                
                mobileLangWrapper.appendChild(langClone);
                
                initializeLanguageDropdown(langClone);
            }

        });
        
        
        function initializeLanguageDropdown(container) {
            if (!container) {
                console.error('Contêiner do seletor de idioma não encontrado.');
                return;
            }
            
            const langButton = container.querySelector('#langButton');
            const langMenu = container.querySelector('#langMenu');
            const langFlag = container.querySelector('#langFlag');
            const langText = container.querySelector('#langText');

            if (!langButton || !langMenu || !langFlag || !langText) {
                console.error('Elementos internos do seletor de idioma estão faltando no contêiner:', container);
                return;
            }
            
            // CORREÇÃO: URLs das bandeiras da China e Japão atualizadas.
            const languages = [
                { code: 'pt', name: 'Português', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-brasil.webp', url: 'https://www.calculadorasdeenfermagem.com.br/' },
                { code: 'en', name: 'English', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-eua.webp', url: 'https://www.calculadorasdeenfermagem.com.br/en/' },
                { code: 'es', name: 'Español', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-espanha.webp', url: 'https://www.calculadorasdeenfermagem.com.br/es/' },
                { code: 'de', name: 'Deutsch', flag: 'https://www.calculadorasdeenfermagem.com.br/de/bandeira-alemanha.webp', url: 'https://www.calculadorasdeenfermagem.com.br/de/' },
                { code: 'it', name: 'Italiano', flag: 'https://www.calculadorasdeenfermagem.com.br/it/bandeira-italia.webp', url: 'https://www.calculadorasdeenfermagem.com.br/it/' },
                { code: 'fr', name: 'Français', flag: 'https://www.calculadorasdeenfermagem.com.br/fr/bandeira-franca.webp', url: 'https://www.calculadorasdeenfermagem.com.br/fr/' },
                { code: 'hi', name: 'हिन्दी', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-india.webp', url: 'https://www.calculadorasdeenfermagem.com.br/hi/' },
                { code: 'zh', name: '中文', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-china.webp', url: 'https://www.calculadorasdeenfermagem.com.br/zh/' }, // URL corrigida
                { code: 'ar', name: 'العربية', flag: 'https://www.calculadorasdeenfermagem.com.br/ar/bandeira-arabia.webp', url: 'https://www.calculadorasdeenfermagem.com.br/ar/' },
                { code: 'ja', name: '日本語', flag: 'https://www.calculadorasdeenfermagem.com.br/bandeira-japao.webp', url: 'https://www.calculadorasdeenfermagem.com.br/ja/' } // URL corrigida
            ];

            langMenu.innerHTML = languages.map(lang => `
                <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2 language-option" data-lang="${lang.code}" data-url="${lang.url}">
                    <img src="${lang.flag}" alt="${lang.name}" class="w-5 h-auto rounded-sm pointer-events-none" onerror="this.style.display='none'; this.alt='Flag not found';">
                    <span class="pointer-events-none">${lang.name}</span>
                </button>
            `).join('');

            langButton.addEventListener('click', function(e) {
                e.stopPropagation();
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                langMenu.classList.toggle('hidden');
            });

            langMenu.addEventListener('click', function(e) {
                const langButtonElement = e.target.closest('.language-option');
                if (langButtonElement) {
                    e.stopPropagation();
                    
                    const langCode = langButtonElement.dataset.lang;
                    const langUrl = langButtonElement.dataset.url;
                    const selectedLang = languages.find(lang => lang.code === langCode);
                    
                    if (selectedLang) {
                        langButton.setAttribute('aria-expanded', 'false');
                        langMenu.classList.add('hidden');
                        
                        if (window.location.href.replace(/\/$/, '') === langUrl.replace(/\/$/, '')) {
                            langFlag.src = selectedLang.flag;
                            langText.textContent = selectedLang.name;
                            console.log('Idioma já selecionado:', selectedLang.code);
                            return;
                        }

                        langFlag.src = selectedLang.flag;
                        langText.textContent = selectedLang.name;
                        
                        const isMobile = container.id.includes('mobile');
                        const otherContainerId = isMobile ? 'language-dropdown-wrapper' : 'mobile-lang-dropdown-content';
                        const otherContainer = document.getElementById(otherContainerId);

                        if (otherContainer) {
                            const otherFlag = otherContainer.querySelector('#langFlag');
                            const otherText = otherContainer.querySelector('#langText');
                            if (otherFlag) otherFlag.src = selectedLang.flag;
                            if (otherText) otherText.textContent = selectedLang.name;
                        }
                        
                        console.log('Navegando para:', langUrl);

                        setTimeout(() => {
                            window.location.href = langUrl;
                        }, 100);
                    }
                }
            });

            document.addEventListener('click', function(e) {
                if (langButton && !langButton.contains(e.target) && langMenu && !langMenu.contains(e.target)) {
                    langButton.setAttribute('aria-expanded', 'false');
                    langMenu.classList.add('hidden');
                }
            });
            
            const currentPath = window.location.pathname;
            let activeLang = languages.find(lang => {
                const langPath = new URL(lang.url).pathname;
                return currentPath === langPath;
            });
            
            if (!activeLang) {
                activeLang = languages.find(lang => lang.code === 'pt');
            }
            
            if (activeLang) {
                langFlag.src = activeLang.flag;
                langText.textContent = activeLang.name;
            }
        }
        

        const backToTopBtn = document.getElementById('back-to-top-btn');
        if (backToTopBtn) {
            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            const suggestBtn = document.getElementById('suggest-tool-btn');
            const suggestionModal = document.getElementById('suggestion-modal');
            const closeModalBtns = document.querySelectorAll('.close-modal-btn');

            // --- REFATORADO: Modal de Sugestão usa openOverlay/closeOverlay ---
            if(suggestBtn) {
                suggestBtn.addEventListener('click', () => openOverlay('#suggestion-modal', suggestBtn));
            }

            closeModalBtns.forEach(btn => {
                // Apenas fechar o modal de sugestão
                if (btn.closest('#suggestion-modal')) {
                    btn.addEventListener('click', () => closeOverlay('#suggestion-modal'));
                }
            });

            if(suggestionModal) {
                suggestionModal.addEventListener('click', function(e) {
                    if (e.target === suggestionModal) {
                        closeOverlay('#suggestion-modal');
                    }
                });
            }
            // --- FIM REFATORAÇÃO ---
        });

        <!-- SCRIPT DE COOKIES MODIFICADO -->
        document.addEventListener('DOMContentLoaded', function() {
            const cookieBanner = document.getElementById('cookie-banner');
            const acceptCookiesBtn = document.getElementById('accept-cookies-btn');
            const declineCookiesBtn = document.getElementById('decline-cookies-btn');
            const manageCookiesBannerBtn = document.getElementById('manage-cookies-banner-btn');
            const manageCookiesFooterBtn = document.getElementById('manage-cookies-footer-btn');
            const cookiePrefsModal = document.getElementById('cookie-prefs-modal');
            const saveCookiePrefsBtn = document.getElementById('save-cookie-prefs-btn');
            const acceptAllCookiesBtn = document.getElementById('accept-all-cookies-btn');
            const cookieModalCloseBtns = cookiePrefsModal.querySelectorAll('.close-modal-btn'); // Botões de fechar específicos deste modal

            // PONTO 3.1: Mostrar banner de cookies e focar no botão "Aceitar"
            setTimeout(() => {
                if (!localStorage.getItem('cookiesAccepted')) {
                    cookieBanner.classList.add('show');
                    if (acceptCookiesBtn) acceptCookiesBtn.focus(); // Foca no botão
                }
            }, 2000);

            function hideCookieBanner() {
                cookieBanner.classList.remove('show');
            }

            function acceptCookies() {
                localStorage.setItem('cookiesAccepted', 'true');
                localStorage.setItem('analyticCookies', 'true');
                localStorage.setItem('marketingCookies', 'true');
                hideCookieBanner();
            }

            function declineCookies() {
                localStorage.setItem('cookiesAccepted', 'false');
                localStorage.setItem('analyticCookies', 'false');
                localStorage.setItem('marketingCookies', 'false');
                hideCookieBanner();
            }

            function showCookiePrefs() {
                 // Carregar preferências salvas no modal
                const analyticCookies = localStorage.getItem('analyticCookies') !== 'false'; // Default true
                const marketingCookies = localStorage.getItem('marketingCookies') === 'true'; // Default false
                
                const analyticCheckbox = document.getElementById('cookies-analiticos');
                const marketingCheckbox = document.getElementById('cookies-marketing');

                if (analyticCheckbox) analyticCheckbox.checked = analyticCookies;
                if (marketingCheckbox) marketingCheckbox.checked = marketingCookies;

                cookiePrefsModal.classList.remove('hidden');
                cookiePrefsModal.style.display = 'flex';
            }

            function hideCookiePrefs() {
                cookiePrefsModal.classList.add('hidden');
                cookiePrefsModal.style.display = 'none';
            }

            if (acceptCookiesBtn) acceptCookiesBtn.addEventListener('click', acceptCookies);
            if (declineCookiesBtn) declineCookiesBtn.addEventListener('click', declineCookies);
            if (manageCookiesBannerBtn) manageCookiesBannerBtn.addEventListener('click', showCookiePrefs);
            if (manageCookiesFooterBtn) manageCookiesFooterBtn.addEventListener('click', showCookiePrefs);

            if (saveCookiePrefsBtn) saveCookiePrefsBtn.addEventListener('click', function() {
                // Salvar preferências específicas
                const analyticCookies = document.getElementById('cookies-analiticos').checked;
                const marketingCookies = document.getElementById('cookies-marketing').checked;
                
                localStorage.setItem('cookiesAccepted', 'true');
                localStorage.setItem('analyticCookies', analyticCookies);
                localStorage.setItem('marketingCookies', marketingCookies);
                
                hideCookiePrefs();
                hideCookieBanner();
            });

            if (acceptAllCookiesBtn) acceptAllCookiesBtn.addEventListener('click', function() {
                localStorage.setItem('cookiesAccepted', 'true');
                localStorage.setItem('analyticCookies', 'true');
                localStorage.setItem('marketingCookies', 'true');
                
                 // Atualizar checkboxes no modal
                const analyticCheckbox = document.getElementById('cookies-analiticos');
                const marketingCheckbox = document.getElementById('cookies-marketing');
                if (analyticCheckbox) analyticCheckbox.checked = true;
                if (marketingCheckbox) marketingCheckbox.checked = true;

                hideCookiePrefs();
                hideCookieBanner();
            });

            // Fechar modal ao clicar fora
            if (cookiePrefsModal) cookiePrefsModal.addEventListener('click', function(e) {
                if (e.target === cookiePrefsModal) {
                    hideCookiePrefs();
                }
            });
            
            // Botões de fechar dos modais de cookies
            cookieModalCloseBtns.forEach(btn => {
                btn.addEventListener('click', hideCookiePrefs);
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const desktopLangWrapper = document.getElementById('language-dropdown-wrapper');
            if (desktopLangWrapper) {
                initializeLanguageDropdown(desktopLangWrapper);
            }
        });
    </script>
</body>
</html>