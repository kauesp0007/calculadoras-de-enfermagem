<!DOCTYPE html>
<html lang="ja">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6472730056006847" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- 相対パスを使用して、同じ 'ja' フォルダ内を検索するようにします -->
    <link rel="preload" href="menu-global.html" as="fetch" crossorigin>
    <link rel="preload" href="global-body-elements.html" as="fetch" crossorigin>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>在胎週数と出産予定日(EDD)計算機 - 看護</title>

  <!-- Metatags e SEO -->
  <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/ja/gestacional.html" />
<link rel="alternate" hreflang="pt-br" href="https://www.calculadorasdeenfermagem.com.br/ja/gestacional.html" />
<link rel="alternate" hreflang="en" href="https://www.calculadorasdeenfermagem.com.br/en/ja/gestacional.html" />
<link rel="alternate" hreflang="es" href="https://www.calculadorasdeenfermagem.com.br/es/ja/gestacional.html" />
<link rel="alternate" hreflang="fr" href="https://www.calculadorasdeenfermagem.com.br/fr/ja/gestacional.html" />
<link rel="alternate" hreflang="de" href="https://www.calculadorasdeenfermagem.com.br/de/ja/gestacional.html" />
<link rel="alternate" hreflang="it" href="https://www.calculadorasdeenfermagem.com.br/it/ja/gestacional.html" />
<link rel="alternate" hreflang="ja" href="https://www.calculadorasdeenfermagem.com.br/ja/ja/gestacional.html" />
<link rel="alternate" hreflang="zh" href="https://www.calculadorasdeenfermagem.com.br/zh/ja/gestacional.html" />
<link rel="alternate" hreflang="hi" href="https://www.calculadorasdeenfermagem.com.br/hi/ja/gestacional.html" />
<link rel="alternate" hreflang="ar" href="https://www.calculadorasdeenfermagem.com.br/ar/ja/gestacional.html" />
<link rel="alternate" hreflang="ru" href="https://www.calculadorasdeenfermagem.com.br/ru/ja/gestacional.html" />
<link rel="alternate" hreflang="tr" href="https://www.calculadorasdeenfermagem.com.br/tr/ja/gestacional.html" />
<link rel="alternate" hreflang="ko" href="https://www.calculadorasdeenfermagem.com.br/ko/ja/gestacional.html" />
<link rel="alternate" hreflang="nl" href="https://www.calculadorasdeenfermagem.com.br/nl/ja/gestacional.html" />
<link rel="alternate" hreflang="pl" href="https://www.calculadorasdeenfermagem.com.br/pl/ja/gestacional.html" />
<link rel="alternate" hreflang="sv" href="https://www.calculadorasdeenfermagem.com.br/sv/ja/gestacional.html" />
<link rel="alternate" hreflang="id" href="https://www.calculadorasdeenfermagem.com.br/id/ja/gestacional.html" />
<link rel="alternate" hreflang="vi" href="https://www.calculadorasdeenfermagem.com.br/vi/ja/gestacional.html" />
<link rel="alternate" hreflang="uk" href="https://www.calculadorasdeenfermagem.com.br/uk/ja/gestacional.html" />
<link rel="alternate" hreflang="x-default" href="https://www.calculadorasdeenfermagem.com.br/ja/gestacional.html" />

  <!-- Favicon paths corrected for 'ja' subdirectory -->
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />
  <link rel="icon" href="../favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="../apple-touch-icon.png">
  
  <meta name="description" content="最終月経日(LMP)に基づいて在胎週数と出産予定日(EDD)を計算します。産前ケアのフォローアップにおいて、看護専門家や医療従事者にとって不可欠なツールです。" />
  <meta property="og:title" content="在胎週数とEDD計算機 - 看護" />
  <meta property="og:description" content="最終月経日(LMP)に基づいて在胎週数と出産予定日(EDD)を計算します。産前ケアのフォローアップにおいて、看護専門家や医療従事者にとって不可欠なツールです。" />
  <meta property="og:url" content="https://www.calculadorasdeenfermagem.com.br/ja/gestacional.html" />
  <meta property="og:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="在胎週数とEDD計算機 - 看護" />
  <meta name="twitter:description" content="最終月経日(LMP)に基づいて在胎週数と出産予定日(EDD)を計算します。産前ケアのフォローアップにおいて、看護専門家や医療従事者にとって不可欠なツールです。" />
  <meta name="twitter:image" content="https://www.calculadorasdeenfermagem.com.br/assets/imagem-compartilhamento.jpg" />

  <!-- Scripts e Estilos Globais -->
  <link href="/public/output.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- CSS path corrected for 'ja' subdirectory -->
  <link rel="stylesheet" href="../global-styles.css" media="print" onload="this.media='all'">

  <!-- Fontes -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Added Noto Sans JP for Japanese -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700;900&family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css"></noscript>

  <!-- Google Analytics & Consent Mode -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('consent', 'default', {
          'analytics_storage': 'denied',
          'ad_storage': 'denied',
          'wait_for_update': 500
      });
      gtag('config', 'AW-952633102');
      gtag('config', 'G-8FLJ59XXDK');
  </script>

  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalEntity",
    "name": "在胎週数とEDD計算機",
    "url": "https://www.calculadorasdeenfermagem.com.br/ja/gestacional.html",
    "description": "最終月経日(LMP)から在胎週数と出産予定日(EDD)を決定するための計算機。",
    "alternateName": ["LMP計算機", "妊娠計算"]
  }
  </script>
  
  <style>
      .resultado.bg-success-green { background-color: #D4EDDA; color: #006400; }
      .resultado.bg-danger-red { background-color: #F8D7DA; color: #8B0000; }
      .bg-info-orange-light { background-color: #ffeeba; border-color: #ffb366; color: #856404; }

      .gestacional-card {
          background-color: #fff;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          transition: box-shadow 0.3s ease;
      }
      .gestacional-card:hover {
          box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
      }
      .gestacional-input-group {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          text-align: left;
      }
      .gestacional-input-group label {
          font-weight: 700;
          color: #1A3E74;
          font-size: 1.25rem;
      }
      .gestacional-input-group input[type="date"] {
          width: 100%;
          padding: 0.75rem;
          border: 1px solid #ccc;
          border-radius: 0.375rem;
          font-size: 1rem;
          color: #333;
          background-color: #fff;
          box-sizing: border-box;
      }
      .resultado-quadro {
          background-color: #eff6ff; /* blue-50 */
          color: #1A3E74;
          border: 1px solid #d1d5db;
          border-radius: 12px;
          padding: 1rem;
          margin-top: 1.5rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          text-align: left;
      }
      .resultado-quadro p {
          font-size: 1rem;
          line-height: 1.5;
      }
      .resultado-quadro strong {
          font-weight: 700;
      }
      /* Apply Noto Sans JP font to Japanese text */
      body, h1, h2, h3, p, a, span, label, button, strong, div, input, textarea {
          font-family: 'Inter', 'Noto Sans JP', sans-serif;
      }
      .font-nunito {
            font-family: 'Nunito Sans', 'Noto Sans JP', sans-serif;
      }
  </style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9472305505608641" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-inter">    


  <!-- Skip Links -->
  <nav aria-label="アクセシビリティショートカット" class="sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-50 focus-within:bg-white focus-within:text-blue-700 focus-within:p-4 focus-within:underline">
      <a href="index.html" accesskey="I" class="block mb-2">ホームへ [Alt + Shift + I]</a>
      <a href="#main-content" accesskey="C" class="block mb-2">メインコンテンツへスキップ [Alt + Shift + C]</a>
      <a href="#barraAcessibilidade" accesskey="A" class="block mb-2">アクセシビリティバーを有効化 [Alt + Shift + A]</a>
      <a href="#backToTopBtn" accesskey="T" class="block">ページトップへ戻る [Alt + Shift + T]</a>
  </nav>

  <!-- ARIA Live Region for Status Messages -->
  <div id="statusMessage" class="sr-only" aria-live="polite" aria-atomic="true"></div>

  <!-- Container para o Menu Global (carregado via JS) -->
  <div id="global-header-container"></div>
<div id="language-dropdown-wrapper" class="flex justify-end w-full" style="position:relative; z-index:100; padding-right:2rem;">
  <div class="relative inline-block text-left z-50">
    <button id="langButton" class="flex items-center space-x-2 border px-3 py-1 rounded-lg shadow bg-gray-100">
      <!-- Flag paths corrected -->
      <img id="langFlag" width="20" height="16" src="../bandeira-japao.webp" alt="JA" class="w-5 h-4 rounded-sm">
      <span id="langText" class="text-gray-700 font-medium">日本語</span>
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>

    <div id="langMenu" class="hidden absolute right-0 mt-2 w-44 bg-white border rounded-lg shadow-lg">
  <!-- Flag paths corrected -->
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="pt" data-flag="../bandeira-brasil.webp">
    <img src="../bandeira-brasil.webp" class="w-5 h-4 rounded-sm" alt="PT" width="20" height="16"><span>Português</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="en" data-flag="../bandeira-eua.webp">
    <img src="../bandeira-eua.webp" class="w-5 h-4 rounded-sm" alt="EN" width="20" height="16"><span>English</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="es" data-flag="../bandeira-espanha.webp">
    <img src="../bandeira-espanha.webp" class="w-5 h-4 rounded-sm" alt="ES" width="20" height="16"><span>Español</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="de" data-flag="../bandeira-alemanha.webp">
    <img src="../bandeira-alemanha.webp" class="w-5 h-4 rounded-sm" alt="DE" width="20" height="16"><span>Deutsch</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="it" data-flag="../bandeira-italia.webp">
    <img src="../bandeira-italia.webp" class="w-5 h-4 rounded-sm" alt="IT" width="20" height="16"><span>Italiano</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="fr" data-flag="../bandeira-franca.webp">
    <img src="../bandeira-franca.webp" class="w-5 h-4 rounded-sm" alt="FR" width="20" height="16"><span>Français</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="hi" data-flag="../bandeira-india.webp">
    <img src="../bandeira-india.webp" class="w-5 h-4 rounded-sm" alt="HI" width="20" height="16"><span>हिन्दी</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="zh" data-flag="../bandeira-china.webp">
    <img src="../bandeira-china.webp" class="w-5 h-4 rounded-sm" alt="ZH" width="20" height="16"><span>中文</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ar" data-flag="../bandeira-arabia.webp">
    <img src="../bandeira-arabia.webp" class="w-5 h-4 rounded-sm" alt="AR" width="20" height="16"><span>العربية</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ja" data-flag="../bandeira-japao.webp">
    <img src="../bandeira-japao.webp" class="w-5 h-4 rounded-sm" alt="JA" width="20" height="16"><span>日本語</span>
  </div>
</div>
  </div>
</div><!-- Conteúdo Principal da Página -->
  <main id="main-content" class="flex-grow p-4 sm:p-8">
      <div class="main-content-wrapper max-w-4xl mx-auto px-4 py-8">
          <nav class="breadcrumb" aria-label="パンくずリスト"><ol><li><a href="index.html">ホーム</a></li><li><a href="#">計算ツール</a></li><li>在胎週数と<abbr title="出産予定日">EDD</abbr></li></ol></nav>

          <div class="flex flex-col items-center justify-center gap-4 mb-3 text-center">
  <h1 id="main-title" class="font-nunito font-bold text-dark-blue text-3xl lg:text-4xl">
                  在胎週数と出産予定日(<abbr title="出産予定日">EDD</abbr>)計算機
              </h1>
          </div>
          <div class="title-bar w-full h-1 bg-dark-blue mx-auto mb-6"></div>

          <p class="font-inter font-normal text-black-custom text-base lg:text-lg mb-6 text-left">
              看護師さん、妊婦さんに出産前ケアを受けるよう奨励してください。これは母子の死亡率を減らすために不可欠です。栄養、ケア、家族計画、予防接種に関するガイダンスを提供し、母親のエンパワーメントを促進します。出産予定日（EDD）は、超音波検査と最終月経日に基づいて推定し、妊娠40週を考慮に入れる必要があります。
          </p>

          <div id="conteudo">
              <div class="gestacional-card">
                  <div class="gestacional-input-group">
                      <label for="dum">
                          最終月経日 (<abbr title="最終月経日">LMP</abbr>):
                          <span class="tooltip-container">
                              <button type="button" class="tooltip-icon-button" aria-label="最終月経日に関する情報" aria-describedby="tooltip-dum">
                                  <i class="fas fa-info-circle" aria-hidden="true"></i>
                              </button>
                              <span id="tooltip-dum" class="tooltip-text" role="tooltip">最終月経日（LMP）は、最後の月経期間の初日であり、在胎週数を計算するために使用されます。</span>
                          </span>
                      </label>
                      <input type="date" id="dum" name="dum" class="shadow-sm">
                  </div>
              </div>
          </div>
          
          <div id="resultado" class="resultado hidden" aria-live="polite"></div>

          <div class="flex flex-wrap justify-start gap-4 mt-6">
              <button id="btnCalcular" class="btn-primary" aria-label="在胎週数とEDDを計算">
                  計算
              </button>
              <button id="btnLimpar" class="btn-primary" aria-label="フィールドをクリア">
                  クリア
              </button>
              <button id="btnGerarPDF" class="btn-secondary" aria-label="PDFを生成" disabled>
                  PDFを生成
              </button>
              <button id="btnNandaNicNoc" class="btn-primary" aria-label="NANDA, NIC, NOCを検索">
                  <abbr title="北米看護診断協会">NANDA</abbr>, <abbr title="看護介入分類">NIC</abbr>, <abbr title="看護成果分類">NOC</abbr>
              </button>
          </div>
          
          <div class="ref font-inter text-gray-custom text-left mt-8 border-t pt-4">
              <strong>参考文献：</strong>
              <p class="mt-2">
                  Ministério da Saúde. Caderno de Atenção Básica: Pré-natal e Puerpério. Brasília: Ministério da Saúde, 2012. (ブラジル保健省。プライマリケアノート：産前・産後ケア。ブラジリア：保健省、2012年。) <a href="https://bvsms.saude.gov.br/bvs/publicacoes/cadernos_atencao_basica_32_prenatal.pdf" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">bvsms.saude.gov.br</a>で入手可能
              </p>
          </div>
      </div>
  </main>

  <!-- Footer -->
  <footer class="bg-[#1A3E74] text-white py-8" lang="ja">
      <div class="max-w-7xl mx-auto px-4">
          <div class="border-b border-white pb-4 mb-4">
              <div class="flex justify-start items-center">
                  <img src="https://www.calculadorasdeenfermagem.com.br/iconrodape1.webp" alt="看護計算機 フッターロゴ" width="120" height="84" class="h-auto w-auto max-w-[80px] max-h-[80px]" width="80" height="80"" width="80" height="80" loading="lazy" decoding="async">
              </div>
          </div>
          <div class="md:flex md:justify-between md:items-start md:space-x-8 md:items-stretch">
              <div class="mb-6 md:mb-0">
                  <p class="font-bold mb-2">当サイトについて</p>
                  <ul class="list-none space-y-1">
                      <li><a href="index.html" class="text-white hover:underline">ホーム</a></li>
                      <li><a href="missao.html" class="text-white hover:underline">私たちについて</a></li>
                      <li><a href="mapa-do-site.html" class="text-white hover:underline">サイトマップ</a></li>
                      <li><a href="politica.html" class="text-white hover:underline">クッキーポリシー</a></li>
                      <li><a href="politica.html" class="text-white hover:underline">データ保持ポリシー</a></li>
                      <li><a href="politica.html" class="text-white hover:underline">LGPD</a></li>
                      <li><a href="politica.html" class="text-white hover:underline">プライバシーポリシー</a></li>
                      <li><a href="termos.html" class="text-white hover:underline">利用規約</a></li>
                      <li><a href="politicadeacessibilidade.html" class="text-white hover:underline">アクセシビリティポリシー</a></li>
                  </ul>
              </div>
              <div class="mb-6 md:mb-0">
                  <h5 class="font-bold mb-2">デジタル持続可能性</h5>
                  <ul class="list-none space-y-1">
                      <li><a href="nossocompromisso.html" class="text-white hover:underline">私たちの取り組み</a></li>
                      <li><a href="impactodigital.html" class="text-white hover:underline">影響報告</a></li>
                      <li><a href="tecnologiaverde.html" class="text-white hover:underline">グリーンテクノロジー</a></li>
                  </ul>
              </div>
              <div class="mb-6 md:mb-0">
                  <h5 class="font-bold mb-2">私たちの取り組み</h5>
                  <p class="text-white text-sm mb-2 max-w-sm md:max-w-xs">当サイトは、高水準のデジタルアクセシビリティ、デジタル持続可能性、データ保護をガバナンスの原則として採用しています。</p>
                  <div class="flex space-x-4 items-center justify-start">
                      <img src="https://www.calculadorasdeenfermagem.com.br/seloacessibilidade.webp" alt="アクセシビリティ認証マーク" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" width="80" height="80"" loading="lazy" decoding="async">
                      <img src="https://www.calculadorasdeenfermagem.com.br/selosustentabilidade.webp" alt="持続可能性認証マーク" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" width="80" height="80"" loading="lazy" decoding="async">
                      <img src="https://www.calculadorasdeenfermagem.com.br/selolgpd.webp" alt="LGPD認証マーク" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" width="80" height="80"" loading="lazy" decoding="async">
                  </div>
              </div>
              <div class="flex flex-1 flex-col md:flex-row justify-end items-start md:items-start">
                  <div class="vertical-divider-footer-stretched hidden md:block"></div>
                  <div class="flex flex-col items-start space-y-4">
                      <h5 class="font-bold mb-2">フォロー</h5>
                      <div class="flex space-x-4">
                          <a href="https://linkedin.com/company/calculadoras-de-enfermagem" target="_blank" class="footer-social-icon" title="LinkedIn" aria-label="LinkedInプロフィール"><i class="fab fa-linkedin text-xl"></i></a>
                          <a href="https://www.instagram.com/calculadorasdeenfermagem/" target="_blank" class="footer-social-icon" title="Instagram" aria-label="Instagramプロフィール"><i class="fab fa-instagram text-xl"></i></a>
                          <a href="https://www.tiktok.com/@calculadorasdeenf" target="_blank" class="footer-social-icon" title="TikTok" aria-label="TikTokプロフィール"><i class="fab fa-tiktok text-xl"></i></a>
                          <a href="https://www.youtube.com/channel/UC_6runTDHz8u5S1Yab842pg" target="_blank" class="footer-social-icon" title="YouTube" aria-label="YouTubeプロフィール"><i class="fab fa-youtube text-xl"></i></a>
                      </div>
                      <button id="openGranularCookieModalBtn" class="btn-secondary text-white mt-4 py-2 px-4 rounded-md" aria-label="クッキー設定の管理">
                          クッキー設定の管理
                      </button>
                  </div>
              </div>
          </div>
          <div class="mt-8 text-center">
              <p>© 2025 看護計算機. 全著作権所有.</p>
          </div>
      </div>
  </footer>
  
  <!-- Scripts Globais e de Bibliotecas -->
  
  <!-- Script paths corrected for 'ja' subdirectory -->
  <script src="../global-scripts.js" defer></script>

  <!-- Script específico da página -->
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          const resultadoDiv = document.getElementById('resultado');
          const btnCalcular = document.getElementById('btnCalcular');
          const btnLimpar = document.getElementById('btnLimpar');
          const btnGerarPDF = document.getElementById('btnGerarPDF');
          const btnNandaNicNoc = document.getElementById('btnNandaNicNoc');

          function calcularGestacional() {
              const dumInput = document.getElementById('dum').value;
              const resultadoDiv = document.getElementById('resultado');

              resultadoDiv.className = 'resultado-quadro mt-6';
              resultadoDiv.style.display = 'block';
              btnGerarPDF.setAttribute('disabled', 'true');
              btnNandaNicNoc.setAttribute('disabled', 'true');

              if (!dumInput) {
                  resultadoDiv.innerHTML = '<p class="text-red-600">⚠️ <strong>最終月経日（LMP）を入力してください。</strong></p>';
                  resultadoDiv.classList.add('bg-danger-red');
                  resultadoDiv.classList.remove('bg-info-orange-light', 'bg-success-green');
                  delete resultadoDiv.dataset.idadeGestacional;
                  delete resultadoDiv.dataset.dpp;
                  return;
              }
              
              const dum = new Date(dumInput + 'T00:00:00');
              const hoje = new Date();
              hoje.setHours(0, 0, 0, 0);  
              dum.setHours(0, 0, 0, 0);

              if (dum > hoje) {
                  resultadoDiv.innerHTML = '<p class="text-red-600">⚠️ <strong>最終月経日（LMP）を未来の日付にすることはできません。</strong></p>';
                  resultadoDiv.classList.add('bg-danger-red');
                  resultadoDiv.classList.remove('bg-info-orange-light', 'bg-success-green');
                  delete resultadoDiv.dataset.idadeGestacional;
                  delete resultadoDiv.dataset.dpp;
                  return;
              }

              const diffMs = hoje - dum;
              const diffDias = Math.floor(diffMs / (1000 * 60 * 60 * 24));
              const semanas = Math.floor(diffDias / 7);
              const dias = diffDias % 7;

              const dpp = new Date(dum.getTime());
              dpp.setDate(dpp.getDate() + 280);
              // Format date to Japanese locale
              const dppFormatada = dpp.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' });

              resultadoDiv.innerHTML = `
                  <table class="w-full text-sm">
                      <tbody>
                          <tr>
                              <td class="font-bold pr-2">在胎週数:</td>
                              <td>${semanas} 週 と ${dias} 日</td>
                          </tr>
                          <tr>
                              <td class="font-bold pr-2">出産予定日 (<abbr title="出産予定日">EDD</abbr>):</td>
                              <td>${dppFormatada}</td>
                          </tr>
                      </tbody>
                  </table>
              `;
              resultadoDiv.classList.add('bg-success-green');
              resultadoDiv.classList.remove('bg-danger-red', 'bg-info-orange-light');

              resultadoDiv.dataset.idadeGestacional = `${semanas} 週 と ${dias} 日`;
              resultadoDiv.dataset.dpp = dppFormatada;
              resultadoDiv.dataset.scaleName = "在胎週数とEDD計算機";
              btnGerarPDF.removeAttribute('disabled');
              btnNandaNicNoc.removeAttribute('disabled');
          }

          function limparCampos() {
              document.getElementById('dum').value = '';
              const resultadoDiv = document.getElementById('resultado');
              resultadoDiv.innerHTML = '';
              resultadoDiv.classList.add('hidden');
              btnGerarPDF.setAttribute('disabled', 'true');
              btnNandaNicNoc.setAttribute('disabled', 'true');
              delete resultadoDiv.dataset.idadeGestacional;
              delete resultadoDiv.dataset.dpp;
              delete resultadoDiv.dataset.scaleName;
          }

          // Event Listeners
          btnCalcular?.addEventListener('click', calcularGestacional);
          btnLimpar?.addEventListener('click', limparCampos);
          
          btnGerarPDF?.addEventListener('click', () => {
              if (!resultadoDiv.dataset.idadeGestacional) {
                  alert('PDFを生成する前に、まず「計算」をクリックしてください。');
                  return;
              }
              if (typeof gerarPDFGlobal === 'function') {
                  gerarPDFGlobal({
                      titulo: '在胎週数とEDD計算機',
                      subtitulo: '妊娠計算レポート',
                      nomeArquivo: 'reporte_gestacional.pdf',
                      seletorConteudo: '.main-content-wrapper'
                  });
              } else {
                  console.error('gerarPDFGlobal 関数が定義されていません。');
              }
          });

          btnNandaNicNoc?.addEventListener('click', () => {
              const idadeGestacional = resultadoDiv.dataset.idadeGestacional;
              const dpp = resultadoDiv.dataset.dpp;
              const scaleName = resultadoDiv.dataset.scaleName;
              if (!idadeGestacional || !dpp) {
                  alert('行動を検索するために結果を計算してください。');
                  return;
              }
              const searchQuery = encodeURIComponent(`${scaleName} 在胎週数 ${idadeGestacional} EDD ${dpp} NANDA分類を生成, NIC分類を生成, NOC分類を生成`);
              window.open(`https://www.google.com/search?q=${searchQuery}`, '_blank');
          });
      });
  </script>





<!-- Script path corrected for 'ja' subdirectory -->
<script src="../lang-selector.js" defer></script>

</body>
</html>