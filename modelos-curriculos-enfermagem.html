<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modelos de Currículos - Calculadoras de Enfermagem</title>
    
    <!-- =================================================================== -->
    <!-- ARQUIVOS DE ESTILO E FONTES EXTERNAS -->
    <!-- =================================================================== -->
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Lato:wght@400;700&family=Lora:wght@400;700&family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3/dist/phosphor.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- =================================================================== -->
    <!-- ESTILOS GLOBAIS E ESPECÍFICOS DA PÁGINA -->
    <!-- =================================================================== -->

    <style>
        /* Estilos para a página e previews dos currículos */
        :root {
            --font-roboto: 'Roboto', sans-serif;
            --font-lato: 'Lato', sans-serif;
            --font-montserrat: 'Montserrat', sans-serif;
            --font-lora: 'Lora', serif;
            --font-open-sans: 'Open Sans', sans-serif;
            --font-inter: 'Inter', sans-serif;
        }

        .btn-perfil.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .preview-container {
            height: 320px;
            overflow: hidden;
            position: relative;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            transition: box-shadow 0.3s ease-in-out;
            background-color: #f1f5f9; /* cinza de fundo */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .preview-container > div {
            transform: scale(0.28); /* Escala para caber o A4 */
            transform-origin: center center;
            width: 210mm; /* A4 width */
            height: 297mm; /* A4 height */
            pointer-events: none;
            background-color: white;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            overflow: hidden;
            color: #334155;
            line-height: 1.6;
        }
        
        /* Estilos do Modal */
        #preview-modal-content {
            transition: all 0.3s ease-in-out;
        }
        #preview-modal-content.maximized {
            width: 95vw;
            max-width: 95vw;
            height: 95vh;
        }
        #preview-content {
            width: 100%;
            height: 100%;
            overflow: auto;
        }
        #preview-content > div { /* O currículo dentro do modal */
            width: 210mm;
            min-height: 297mm;
            margin: 2rem auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        /* Estilos base para os previews */
        .cv-preview h1, .cv-preview h2, .cv-preview h3 { font-weight: 700; line-height: 1.2; }
        .cv-preview h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .cv-preview h2 { font-size: 1.2rem; margin-bottom: 0.5rem; padding-bottom: 0.25rem; display: flex; align-items: center; gap: 0.5rem; }
        .cv-preview h3 { font-size: 1.1rem; color: #1e293b; }
        .cv-preview p { line-height: 1.4; }
        .cv-preview .cv-section { margin-bottom: 1.5rem; }
        .cv-preview .cv-tag { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; margin: 0.2rem; }
        .cv-preview ul { list-style: disc; margin-left: 1rem; }
        .cv-preview ul li { margin-bottom: 0.25rem; }

        /* Estilos para os novos seletores de cor e fonte */
        .color-picker-ball {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .color-picker-ball:hover, .color-picker-ball.active {
            transform: scale(1.1);
            border-color: #3b82f6;
        }
        .font-picker-btn {
            padding: 0.25rem 0.75rem; /* Ajuste para botões menores */
            font-size: 0.875rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            background-color: #f9fafb;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .font-picker-btn:hover, .font-picker-btn.active {
            background-color: #e5e7eb;
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans text-gray-900">
    
    <div id="global-header-container">
        <!-- O cabeçalho modular será carregado aqui pelo global-scripts.js -->
    </div>

    <main class="main-content-wrapper max-w-7xl mx-auto p-4 md:p-8">

        <nav class="text-gray-600 mb-4" aria-label="breadcrumb">
            <ol class="list-none p-0 inline-flex">
                <li class="flex items-center"><a href="index.html" class="hover:underline">Início</a><i class="ph-bold ph-caret-right mx-2 text-gray-400"></i></li>
                <li class="flex items-center"><a href="#" class="hover:underline">Modelos</a><i class="ph-bold ph-caret-right mx-2 text-gray-400"></i></li>
                <li><span class="text-[#1A3E74] font-semibold">Currículos</span></li>
            </ol>
        </nav>
        
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Escolha o Modelo de Currículo Ideal</h1>
            <p class="text-gray-600">Navegue pelos perfis e selecione o layout que melhor representa a sua carreira na enfermagem.</p>
        </div>

        <div class="mb-6 flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
            <input type="text" id="busca-modelo" placeholder="Buscar modelo..." class="flex-grow p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
            <button id="btn-estudante" class="btn-perfil px-4 py-2 rounded-lg text-sm transition-colors bg-blue-500 text-white" onclick="setPerfilAtivo('estudante', this)">Estudante</button>
            <button id="btn-profissional" class="btn-perfil px-4 py-2 rounded-lg text-sm transition-colors bg-gray-200 hover:bg-gray-300" onclick="setPerfilAtivo('experiente', this)">Profissional</button>
            <button id="btn-academico" class="btn-perfil px-4 py-2 rounded-lg text-sm transition-colors bg-gray-200 hover:bg-gray-300" onclick="setPerfilAtivo('academico', this)">Acadêmico</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="modelos-container">
            <!-- Os cartões de modelo serão gerados e inseridos aqui via JavaScript -->
        </div>
    
    </main>
    
    <div id="preview-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4 transition-opacity duration-300" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div id="preview-modal-content" class="bg-gray-200 p-2 rounded-xl shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col">
            <div class="flex-shrink-0 flex flex-col p-4 bg-white rounded-t-lg items-center">
                <div class="w-full flex justify-between items-start mb-2">
                    <h2 id="modalTitle" class="text-lg font-semibold text-gray-700">Pré-visualização</h2>
                    <div class="flex items-center gap-2">
                        <button onclick="toggleMaximizeModal()" class="text-gray-500 hover:text-gray-900 transition-colors p-2" aria-label="Maximizar"><i class="ph-bold ph-arrows-out text-2xl"></i></button>
                        <button onclick="fecharModal()" class="text-gray-500 hover:text-gray-900 transition-colors p-2" aria-label="Fechar pré-visualização"><i class="ph-bold ph-x text-2xl"></i></button>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center gap-8 w-full">
                    <div class="flex flex-col items-center gap-2">
                        <span class="text-sm font-medium">Selecione a cor de sua preferência:</span>
                        <div id="color-picker" class="flex gap-2" role="radiogroup" aria-label="Seletor de Cores">
                            <!-- Opções de cores serão inseridas via JS -->
                        </div>
                    </div>
                    <div class="flex flex-col items-center gap-2">
                        <span class="text-sm font-medium">Selecione a fonte da sua preferência:</span>
                        <div id="font-picker" class="flex gap-2" role="radiogroup" aria-label="Seletor de Fontes">
                            <!-- Opções de fontes serão inseridas via JS -->
                        </div>
                    </div>
                </div>
            </div>
            <div id="preview-content" class="flex-grow overflow-auto">
                <!-- O conteúdo do currículo em tamanho real será inserido aqui -->
            </div>
            <div class="flex-shrink-0 mt-2 p-4 flex justify-end gap-4 bg-white rounded-b-lg">
                <div id="confirmation-message" class="text-green-600 font-medium mr-4 hidden self-center">Modelo selecionado e pronto para uso!</div>
                <button id="btn-avancar" class="bg-[#1A3E74] text-white px-6 py-3 rounded-lg hover:bg-[#153460] transition-colors font-semibold" aria-label="Avançar com modelo selecionado">Avançar com este Modelo</button>
            </div>
        </div>
    </div>

    <footer class="bg-[#1A3E74] text-white py-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="border-b border-white pb-4 mb-4">
                <div class="flex justify-start items-center">
                    <img src="https://www.calculadorasdeenfermagem.com.br/iconrodape1.webp" alt="Logotipo Calculadoras de Enfermagem no rodapé" width="120" height="84" class="h-auto w-auto max-w-[80px] max-h-[80px]" loading="lazy" decoding="async">
                </div>
            </div>
            <div class="md:flex md:justify-between md:items-start md:space-x-8 md:items-stretch">
                <div class="mb-6 md:mb-0">
                    <h5 class="font-bold mb-2">Institucional</h5>
                    <ul class="list-none space-y-1">
                        <li><a href="index.html" class="text-white hover:underline">Início</a></li>
                        <li><a href="missao.html" class="text-white hover:underline">Sobre Nós</a></li>
                        <li><a href="mapa-do-site.html" class="text-white hover:underline">Mapa do Site</a></li>
                        <li><a href="politica.html" class="text-white hover:underline">Políticas de Cookies</a></li>
                        <li><a href="politica.html" class="text-white hover:underline">Política de Retenção de dados</a></li>
                        <li><a href="politica.html" class="text-white hover:underline">LGPD</a></li>
                        <li><a href="politica.html" class="text-white hover:underline">Políticas de Privacidade</a></li>
                        <li><a href="termos.html" class="text-white hover:underline">Termos e Condições de Uso</a></li>
                        <li><a href="politicadeacessibilidade.html" class="text-white hover:underline">Política de Acessibilidade</a></li>
                    </ul>
                </div>
                <div class="mb-6 md:mb-0">
                    <h5 class="font-bold mb-2">Sustentabilidade Digital</h5>
                    <ul class="list-none space-y-1">
                        <li><a href="nossocompromisso.html" class="text-white hover:underline">Nosso Compromisso</a></li>
                        <li><a href="impactodigital.html" class="text-white hover:underline">Relatório de Impacto</a></li>
                        <li><a href="tecnologiaverde.html" class="text-white hover:underline">Tecnologia Verde</a></li>
                    </ul>
                </div>
                <div class="mb-6 md:mb-0">
                    <h5 class="font-bold mb-2">Nosso Compromisso</h5>
                    <p class="text-white text-sm mb-2 max-w-sm md:max-w-xs">Nosso site adota como princípio de governança, o comprometimento com elevados padrões de acessibilidade digital, sustentabilidade digital e proteção de dados.</p>
                    <div class="flex space-x-4 items-center justify-start">
                        <img src="https://www.calculadorasdeenfermagem.com.br/seloacessibilidade.webp" alt="Selo de Acessibilidade" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" loading="lazy" decoding="async">
                        <img src="https://www.calculadorasdeenfermagem.com.br/selosustentabilidade.webp" alt="Selo de Sustentabilidade" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" loading="lazy" decoding="async">
                        <img src="https://www.calculadorasdeenfermagem.com.br/selolgpd.webp" alt="Selo LGPD" width="100" height="100" class="w-auto h-auto max-w-[80px] max-h-[80px]" loading="lazy" decoding="async">
                    </div>
                </div>
                <div class="flex flex-1 flex-col md:flex-row justify-end items-start md:items-start">
                    <div class="vertical-divider-footer-stretched hidden md:block"></div>
                    <div class="flex flex-col items-start space-y-4">
                        <h5 class="font-bold mb-2">Siga-nos</h5>
                        <div class="flex space-x-4">
                            <a href="https://linkedin.com/company/calculadoras-de-enfermagem" target="_blank" class="footer-social-icon" title="LinkedIn" aria-label="Acesse Nosso Perfil no LinkedIn"><i class="fab fa-linkedin text-xl"></i></a>
                            <a href="https://www.instagram.com/calculadorasdeenfermagem/" target="_blank" class="footer-social-icon" title="Instagram" aria-label="Acesse Nosso Perfil no Instagram"><i class="fab fa-instagram text-xl"></i></a>
                            <a href="https://www.tiktok.com/@calculadorasdeenf" target="_blank" class="footer-social-icon" title="TikTok" aria-label="Acesse Nosso Perfil no TikTok"><i class="fab fa-tiktok text-xl"></i></a>
                            <a href="https://www.youtube.com/channel/UC_6runTDHz8u5S1Yab842pg" target="_blank" class="footer-social-icon" title="YouTube" aria-label="Acesse Nosso Perfil no YouTube"><i class="fab fa-youtube text-xl"></i></a>
                        </div>
                        <button id="openGranularCookieModalBtn" class="btn-secondary text-white mt-4 py-2 px-4 rounded-md" aria-label="Gerenciar Preferências de Cookies"> Gerenciar Preferências de Cookies </button>
                    </div>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p>&copy; 2025 Calculadoras de Enfermagem. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // --- DADOS COMPLETOS DOS PERSONAGENS ---
            const curriculumData = {
                estudante: {
                    dadosPessoais: {
                        nomeCompleto: "Ana Beatriz Silva",
                        nomeSocial: "Ana",
                        pronomes: "Ela/Dela",
                        nascimento: "15/05/2004",
                        sexo: "Feminino",
                        identidadeGenero: "Mulher Cis",
                        orientacaoSexual: "Heterossexual",
                        nacionalidade: "Brasileira",
                        estadoCivil: "Solteira",
                        filhos: "Não",
                        endereco: "Rua das Palmeiras, 123, Bairro Jardim, São Paulo/SP, CEP 01234-567",
                        telefone: "(11) 91234-5678",
                        email: "anabeatriz.enfermagem@email.com",
                        pcd: "Não",
                        condicoesEspeciais: "N/A"
                    },
                    redesSociais: {
                        linkedin: "linkedin.com/in/anabeatrizsilva",
                        instagram: "@ana.enfermagem"
                    },
                    objetivoProfissional: "Buscando uma oportunidade de estágio em Técnico de Enfermagem para aplicar os conhecimentos adquiridos na faculdade, contribuindo com proatividade e empatia no cuidado ao paciente e no desenvolvimento da equipe.",
                    formacao: [{
                        instituicao: "Escola de Enfermagem de Excelência (EEX)",
                        paisEstado: "Brasil, São Paulo",
                        curso: "Técnico em Enfermagem",
                        nivel: "Técnico",
                        inicio: "02/2024",
                        fim: "12/2025 (previsão)",
                        status: "Em andamento"
                    }],
                    experiencia: [{
                        projeto: "Simulação Realística em Terapia Intensiva",
                        instituicao: "Escola de Enfermagem de Excelência (EEX)",
                        funcao: "Membro da equipe de pesquisa",
                        periodo: "03/2025 - presente",
                        descricao: "Participação em projeto de pesquisa sobre a aplicação de simulações realísticas para o aprimoramento de competências técnicas e comportamentais de estudantes em cenários de Terapia Intensiva."
                    }],
                    idiomas: [
                        { idioma: "Inglês", nivel: "Avançado", fala: "Avançado", escuta: "Avançado", escrita: "Avançado" },
                        { idioma: "Espanhol", nivel: "Básico", fala: "Básico", escuta: "Básico", escrita: "Básico" }
                    ],
                    tecnologias: ["Sistemas de Prontuário Eletrônico (MV Soul, Tasy)", "Pacote Office (Word, Excel, PowerPoint)"],
                    habilidades: {
                        soft: ["Comunicação Assertiva", "Resiliência", "Trabalho em Equipe Multidisciplinar", "Empatia", "Ética Profissional"],
                        hard: ["Aferição de Sinais Vitais", "Administração de Medicamentos", "Curativos", "Higienização e Conforto do Paciente"]
                    },
                    complementares: {
                        cnh: "Tipo B",
                        veiculo: "Não",
                        viagens: "Sim",
                        mudanca: "Sim"
                    },
                    diversidade: {
                        raca: "Parda",
                        identidadeGenero: "Mulher Cis",
                        orientacaoSexual: "Heterossexual"
                    },
                    isEstudante: true,
                    isAcademico: false
                },
                experiente: {
                    dadosPessoais: {
                        nomeCompleto: "Carlos Eduardo Oliveira",
                        nomeSocial: "Carlos",
                        pronomes: "Ele/Dele",
                        nascimento: "20/08/1985",
                        sexo: "Masculino",
                        identidadeGenero: "Homem Cis",
                        orientacaoSexual: "Heterossexual",
                        nacionalidade: "Brasileiro",
                        estadoCivil: "Casado",
                        filhos: "Sim, dois",
                        endereco: "Avenida Atlântica, 789, Copacabana, Rio de Janeiro/RJ, CEP 22070-001",
                        telefone: "(21) 98765-4321",
                        email: "carlos.oliveira.enfermagem@email.com",
                        coren: "Sim, COREN-RJ: 123.456-ENF",
                        pcd: "Não",
                        condicoesEspeciais: "N/A"
                    },
                    redesSociais: {
                        linkedin: "linkedin.com/in/carlosoliveiraenfermeiro",
                        twitter: "@CarlosEnfermagem"
                    },
                    objetivoProfissional: "Atuar como Enfermeiro Chefe em Terapia Intensiva, liderando equipes, aprimorando protocolos de atendimento e contribuindo para a excelência e inovação na assistência ao paciente crítico.",
                    experiencia: [{
                        empresa: "Hospital Mount Sinai, Nova York, EUA",
                        cargo: "Enfermeiro Sênior em Terapia Intensiva",
                        segmento: "Saúde Hospitalar",
                        hierarquia: "Analista",
                        nacionalidadeLocalizacao: "EUA, Nova York",
                        inicio: "01/2018",
                        fim: "12/2023",
                        atual: "Não",
                        descricao: "Liderou equipe de 10 enfermeiros e 20 técnicos, implementou um novo protocolo de prevenção de úlceras por pressão que reduziu a incidência em 30% e participou da equipe de resposta rápida a emergências."
                    }],
                    formacao: [{
                        instituicao: "Universidade de São Paulo (USP)",
                        paisEstado: "Brasil, São Paulo",
                        curso: "Bacharelado em Enfermagem",
                        nivel: "Superior",
                        inicio: "01/2005",
                        fim: "12/2009",
                        status: "Concluído"
                    }],
                    certificacoesCursos: ["Certificado em Suporte Avançado de Vida (ACLS) - American Heart Association", "Curso 'Inteligência Artificial para Enfermeiros' - Harvard Medical School", "Curso de Gestão e Liderança em Enfermagem - Albert Einstein"],
                    idiomas: [
                        { idioma: "Inglês", nivel: "Fluente", fala: "Fluente", escuta: "Fluente", escrita: "Fluente" },
                        { idioma: "Espanhol", nivel: "Avançado", fala: "Avançado", escuta: "Avançado", escrita: "Avançado" },
                        { idioma: "Libras", nivel: "Intermediário" }
                    ],
                    tecnologias: ["Sistemas de Prontuário Eletrônico (Epic, Cerner)", "Software de Gestão Hospitalar", "Ferramentas de análise de dados (Power BI)"],
                    habilidades: {
                        tecnicas: ["Liderança de Equipes", "Gestão de Protocolos", "Suporte Avançado de Vida", "Ventilação Mecânica", "Manejo de Pacientes Críticos"],
                        comportamentais: ["Liderança Situacional", "Pensamento Crítico", "Gestão de Conflitos", "Tomada de Decisão sob Pressão", "Comunicação Interpessoal"]
                    },
                    complementares: {
                        jornada: "Integral",
                        tipoContrato: "CLT",
                        hierarquia: "Gerente - Diretor",
                        voluntariado: "Cruz Vermelha, Missão Humanitária na Síria (2015)",
                        congressos: "Palestrante no Congresso Internacional de Enfermagem em Terapia Intensiva (Nova Iorque, 2022)",
                        premios: "'Enfermeiro do Ano' - Hospital Mount Sinai (2020)",
                        recomendacoes: "Disponível mediante solicitação."
                    },
                    diversidade: {
                        raca: "Branca",
                        identidadeGenero: "Homem Cis",
                        orientacaoSexual: "Heterossexual"
                    },
                    isEstudante: false,
                    isAcademico: false
                },
                academico: {
                    dadosPessoais: {
                        nomeCompleto: "Dra. Helena Costa",
                        nomeSocial: "Helena",
                        pronomes: "Ela/Dela",
                        nascimento: "10/12/1978",
                        sexo: "Feminino",
                        identidadeGenero: "Mulher Cis",
                        orientacaoSexual: "Heterossexual",
                        nacionalidade: "Portuguesa",
                        estadoCivil: "Divorciada",
                        filhos: "Não",
                        endereco: "Rua do Ouro, 567, Bairro Centro, Lisboa, Portugal, CEP 1234-567",
                        telefone: "+351 987 654 321",
                        email: "helena.costa.academica@email.com",
                        coren: "Sim, Cédula Profissional de Enfermagem (Portugal)",
                        pcd: "Não",
                        condicoesEspeciais: "N/A"
                    },
                    redesSociais: {
                        linkedin: "linkedin.com/in/helenacosta",
                        googleScholar: "Perfil disponível com publicações"
                    },
                    resumoAcademico: "Professora e pesquisadora com mais de 20 anos de experiência na área de Enfermagem em Saúde Coletiva e Políticas Públicas. Linha de pesquisa focada em inovações tecnológicas para a saúde da família e comunidades carentes.",
                    formacao: [{
                        nivel: "Doutorado",
                        titulo: "PhD em Enfermagem em Saúde Coletiva",
                        instituicao: "Universidade do Porto, Portugal",
                        tituloTese: "Impacto da Inteligência Artificial na Acessibilidade aos Serviços de Saúde em Áreas Rurais",
                        orientador: "Prof. Dr. João Santos",
                        anoDefesa: "2010"
                    }],
                    experiencia: [{
                        instituicao: "Universidade de Coimbra, Portugal",
                        cargo: "Professora Titular e Coordenadora do Programa de Pós-Graduação em Enfermagem",
                        periodo: "01/2012 - presente",
                        atividades: "Orientação de mestrandos e doutorandos, ensino de disciplinas de Métodos de Pesquisa, pesquisa em projetos financiados e coordenação de intercâmbios internacionais."
                    }],
                    producaoIntelectual: {
                        artigos: "Mais de 50 artigos publicados em revistas de alto impacto, incluindo The Lancet e The New England Journal of Medicine.",
                        livros: "Autora do livro 'Saúde Comunitária na Era Digital'.",
                        eventos: "Palestrante convidada em mais de 30 congressos internacionais.",
                        bancas: "Participação em bancas de mestrado e doutorado em instituições renomadas como a Universidade de São Paulo (USP) e a Universidade de Oxford."
                    },
                    projetosPesquisa: [{
                        nome: "Telessaúde e IA para o Cuidado Pediátrico",
                        instituicao: "Fundação para a Ciência e a Tecnologia (FCT), Portugal",
                        papel: "Coordenadora Geral",
                        periodo: "2018 - 2023"
                    }],
                    idiomas: [
                        { idioma: "Inglês", nivel: "Fluente" },
                        { idioma: "Espanhol", nivel: "Avançado" },
                        { idioma: "Francês", nivel: "Intermediário" }
                    ],
                    tecnologias: {
                        softwareEstatistico: "R, SPSS",
                        gestoresBibliograficos: "Mendeley, Zotero"
                    },
                    orientacoesBancas: {
                        orientacoes: "15 de TCC, 10 de mestrado, 5 de doutorado.",
                        bancas: "Participação em bancas de mestrado e doutorado em instituições renomadas como a Universidade de São Paulo (USP) e a Universidade de Oxford."
                    },
                    associacoes: "Membro da Associação Internacional de Enfermagem em Saúde Pública.",
                    diversidade: {
                        raca: "Branca",
                        identidadeGenero: "Mulher Cis",
                        orientacaoSexual: "Heterossexual"
                    },
                    recomendacoes: "Disponível mediante solicitação.",
                    isEstudante: false,
                    isAcademico: true
                }
            };

            // --- DADOS DE ESTILOS PARA CUSTOMIZAÇÃO ---
            const colorPalettes = [
                { name: "Azul Corporativo", primary: "#1A3E74", secondary: "#3B82F6", accent: "#E0F2FE" },
                { name: "Verde Saúde", primary: "#166534", secondary: "#22C55E", accent: "#DCFCE7" },
                { name: "Cinza Clássico", primary: "#374151", secondary: "#6B7280", accent: "#F3F4F6" },
                { name: "Bordô Sofisticado", primary: "#7F1D1D", secondary: "#B91C1C", accent: "#FEE2E2" },
                { name: "Roxo Sereno", primary: "#5B21B6", secondary: "#8B5CF6", accent: "#EDE9FE" },
                { name: "Marrom Terroso", primary: "#44403C", secondary: "#A8A29E", accent: "#F5F5F4" },
                { name: "Turquesa Vibrante", primary: "#0E7490", secondary: "#06B6D4", accent: "#CFFAFE" },
                { name: "Ouro Elegante", primary: "#92400E", secondary: "#D97706", accent: "#FEF3C7" },
                { name: "Índigo Profundo", primary: "#3730A3", secondary: "#6366F1", accent: "#E0E7FF" },
                { name: "Verde-oliva", primary: "#4D7C0F", secondary: "#84CC16", accent: "#ECFDF5" }
            ];

            const fontFamilies = [
                { name: "Inter", value: "Inter, sans-serif" },
                { name: "Lato", value: "Lato, sans-serif" },
                { name: "Roboto", value: "Roboto, sans-serif" },
                { name: "Montserrat", value: "Montserrat, sans-serif" },
                { name: "Open Sans", value: "Open Sans, sans-serif" }
            ];

            // --- ELEMENTOS DO DOM ---
            const modelosContainer = document.getElementById('modelos-container');
            const previewContent = document.getElementById('preview-content');
            const previewModal = document.getElementById('preview-modal');
            const colorPicker = document.getElementById('color-picker');
            const fontPicker = document.getElementById('font-picker');
            
            let currentPerfil = 'estudante';

            // Estruturas de layout HTML (4 layouts base)
            const layouts = [
                // Layout 1: Clássico e organizado, com barra lateral à esquerda e foto.
                (data, theme, font) => `
                    <div class="cv-preview shadow-lg rounded-xl overflow-hidden" style="font-family: ${font.value};">
                        <div class="grid grid-cols-5 h-full">
                            <div class="col-span-2 p-8 text-white" style="background-color: ${theme.primary};">
                                <div class="flex flex-col items-center mb-6">
                                    <div class="w-24 h-24 rounded-full bg-white flex items-center justify-center text-3xl font-bold" style="color: ${theme.primary};">
                                        ${(data.dadosPessoais.nomeCompleto || "").split(' ').map(n => n[0]).join('')}
                                    </div>
                                    <h1 class="text-2xl font-bold mt-4 text-center">${data.dadosPessoais.nomeCompleto}</h1>
                                    <p class="text-sm italic text-center">${data.objetivoProfissional || data.resumoAcademico || ''}</p>
                                </div>
                                <div class="mb-4">
                                    <h2 class="text-lg font-bold border-b pb-1 flex items-center gap-2" style="border-color: ${theme.secondary};"><i class="ph-bold ph-info"></i>Dados Pessoais</h2>
                                    <p class="text-sm"><strong>E-mail:</strong> ${data.dadosPessoais.email}</p>
                                    <p class="text-sm"><strong>Telefone:</strong> ${data.dadosPessoais.telefone}</p>
                                    <p class="text-sm"><strong>Endereço:</strong> ${data.dadosPessoais.endereco}</p>
                                    ${data.dadosPessoais.coren ? `<p class="text-sm"><strong>COREN:</strong> ${data.dadosPessoais.coren}</p>` : ''}
                                </div>
                                ${data.redesSociais.linkedin || data.redesSociais.instagram || data.redesSociais.googleScholar ? `
                                <div class="mb-4">
                                    <h2 class="text-lg font-bold border-b pb-1 flex items-center gap-2" style="border-color: ${theme.secondary};"><i class="ph-bold ph-link"></i>Redes Sociais</h2>
                                    ${data.redesSociais.linkedin ? `<p class="text-sm"><strong>LinkedIn:</strong> ${data.redesSociais.linkedin}</p>` : ''}
                                    ${data.redesSociais.instagram ? `<p class="text-sm"><strong>Instagram:</strong> ${data.redesSociais.instagram}</p>` : ''}
                                    ${data.redesSociais.googleScholar ? `<p class="text-sm"><strong>Google Scholar:</strong> ${data.redesSociais.googleScholar}</p>` : ''}
                                </div>` : ''}
                                <div class="mb-4">
                                    <h2 class="text-lg font-bold border-b pb-1 flex items-center gap-2" style="border-color: ${theme.secondary};"><i class="ph-bold ph-globe"></i>Idiomas</h2>
                                    ${data.idiomas.map(idioma => `<p class="text-sm"><strong>${idioma.idioma}:</strong> ${idioma.nivel}</p>`).join('')}
                                </div>
                                <div class="mb-4">
                                    <h2 class="text-lg font-bold border-b pb-1 flex items-center gap-2" style="border-color: ${theme.secondary};"><i class="ph-bold ph-wrench"></i>Habilidades</h2>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        ${data.habilidades.soft ? data.habilidades.soft.map(h => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.hard ? data.habilidades.hard.map(h => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.tecnicas ? data.habilidades.tecnicas.map(h => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.comportamentais ? data.habilidades.comportamentais.map(h => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.tecnologias ? (Array.isArray(data.tecnologias) ? data.tecnologias.map(t => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${t}</span>`).join('') : (data.tecnologias.softwareEstatistico ? data.tecnologias.softwareEstatistico.split(', ').map(t => `<span class="cv-tag bg-white text-gray-800" style="color: ${theme.primary}">${t}</span>`).join('') : '')) : ''}
                                    </div>
                                </div>
                                ${data.diversidade ? `
                                <div class="mb-4">
                                    <h2 class="text-lg font-bold border-b pb-1 flex items-center gap-2" style="border-color: ${theme.secondary};"><i class="ph-bold ph-user-circle"></i>Diversidade</h2>
                                    <p class="text-sm"><strong>Raça:</strong> ${data.diversidade.raca}</p>
                                    <p class="text-sm"><strong>Gênero:</strong> ${data.diversidade.identidadeGenero}</p>
                                </div>` : ''}
                            </div>
                            <div class="col-span-3 p-8">
                                <div class="cv-section">
                                    <h2 class="text-xl" style="color: ${theme.primary}; border-bottom: 2px solid ${theme.primary};"><i class="ph-bold ph-graduation-cap"></i>Formação Acadêmica</h2>
                                    ${data.formacao.map(f => `
                                        <div class="mb-4">
                                            <h3 class="font-bold" style="color: ${theme.primary};">${f.curso || f.titulo}</h3>
                                            <p class="text-sm font-semibold">${f.instituicao}</p>
                                            <p class="text-xs mt-1 text-gray-500">${f.inicio || (f.periodo && f.periodo.split(' - ')[0]) || ''} - ${f.fim || (f.periodo && f.periodo.split(' - ')[1]) || f.anoDefesa || 'Presente'}</p>
                                            ${f.tituloTese ? `<p class="text-xs italic text-gray-400 mt-1">Tese: "${f.tituloTese}"</p>` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="cv-section">
                                    <h2 class="text-xl" style="color: ${theme.primary}; border-bottom: 2px solid ${theme.primary};"><i class="ph-bold ph-briefcase"></i>${data.isEstudante ? 'Projetos Acadêmicos' : data.isAcademico ? 'Experiência Acadêmica' : 'Experiência Profissional'}</h2>
                                    ${(data.experiencia || []).map(e => `
                                        <div class="mb-4">
                                            <h3 class="font-bold" style="color: ${theme.primary};">${e.cargo || e.projeto}</h3>
                                            <p class="text-sm font-semibold">${e.empresa || e.instituicao}</p>
                                            <p class="text-xs mt-1 text-gray-500">${e.inicio || e.periodo} - ${e.fim || (e.periodo && e.periodo.split(' - ')[1]) || 'Presente'}</p>
                                            <p class="text-sm mt-2">${e.descricao || e.atividades || ''}</p>
                                        </div>
                                    `).join('')}
                                </div>
                                ${data.certificacoesCursos && data.certificacoesCursos.length > 0 ? `
                                <div class="cv-section">
                                    <h2 class="text-xl" style="color: ${theme.primary}; border-bottom: 2px solid ${theme.primary};"><i class="ph-bold ph-medal"></i>Certificações</h2>
                                    <ul class="list-disc pl-5 text-sm">
                                    ${data.certificacoesCursos.map(c => `<li>${c}</li>`).join('')}
                                    </ul>
                                </div>` : ''}
                                ${data.isAcademico && data.producaoIntelectual ? `
                                <div class="cv-section">
                                    <h2 class="text-xl" style="color: ${theme.primary}; border-bottom: 2px solid ${theme.primary};"><i class="ph-bold ph-books"></i>Produção Intelectual</h2>
                                    <p class="text-sm mb-1"><strong>Artigos:</strong> ${data.producaoIntelectual.artigos}</p>
                                    <p class="text-sm mb-1"><strong>Livros:</strong> ${data.producaoIntelectual.livros}</p>
                                    <p class="text-sm mb-1"><strong>Eventos:</strong> ${data.producaoIntelectual.eventos}</p>
                                    <p class="text-sm mb-1"><strong>Bancas:</strong> ${data.producaoIntelectual.bancas}</p>
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `,
                // Layout 2: Header moderno com informações de contato, seguido por conteúdo em colunas
                (data, theme, font) => `
                    <div class="cv-preview shadow-lg rounded-xl p-8" style="font-family: ${font.value};">
                        <div class="text-center mb-8 pb-4 border-b-2" style="border-color: ${theme.primary};">
                            <h1 class="text-3xl font-bold" style="color: ${theme.primary};">${data.dadosPessoais.nomeCompleto}</h1>
                            <p class="text-lg italic mt-1">${data.objetivoProfissional || data.resumoAcademico || ''}</p>
                            <div class="flex justify-center flex-wrap gap-4 mt-4 text-sm" style="color: ${theme.primary};">
                                <span><i class="ph-bold ph-envelope"></i> ${data.dadosPessoais.email}</span>
                                <span><i class="ph-bold ph-phone"></i> ${data.dadosPessoais.telefone}</span>
                                ${data.redesSociais.linkedin ? `<span><i class="ph-bold ph-linkedin-logo"></i> ${data.redesSociais.linkedin}</span>` : ''}
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-8">
                            <div class="col-span-1">
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-graduation-cap"></i>Formação Acadêmica</h2>
                                    ${data.formacao.map(f => `
                                        <div class="mb-4">
                                            <h3 class="font-bold">${f.curso || f.titulo}</h3>
                                            <p class="text-sm font-semibold">${f.instituicao}</p>
                                            <p class="text-xs mt-1 text-gray-500">${f.inicio || (f.periodo && f.periodo.split(' - ')[0]) || ''} - ${f.fim || (f.periodo && f.periodo.split(' - ')[1]) || f.anoDefesa || 'Presente'}</p>
                                            ${f.tituloTese ? `<p class="text-xs italic text-gray-400 mt-1">Tese: "${f.tituloTese}"</p>` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-briefcase"></i>${data.isEstudante ? 'Projetos Acadêmicos' : data.isAcademico ? 'Experiência Acadêmica' : 'Experiência Profissional'}</h2>
                                    ${(data.experiencia || []).map(e => `
                                        <div class="mb-4">
                                            <h3 class="font-bold">${e.cargo || e.projeto}</h3>
                                            <p class="text-sm font-semibold">${e.empresa || e.instituicao}</p>
                                            <p class="text-xs mt-1 text-gray-500">${e.inicio || e.periodo} - ${e.fim || (e.periodo && e.periodo.split(' - ')[1]) || 'Presente'}</p>
                                            <p class="text-sm mt-2">${e.descricao || e.atividades || ''}</p>
                                        </div>
                                    `).join('')}
                                </div>
                                ${data.certificacoesCursos && data.certificacoesCursos.length > 0 ? `
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-medal"></i>Certificações e Cursos</h2>
                                    <ul class="list-disc pl-5 text-sm">
                                    ${data.certificacoesCursos.map(c => `<li>${c}</li>`).join('')}
                                    </ul>
                                </div>` : ''}
                                ${data.isAcademico && data.producaoIntelectual ? `
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-books"></i>Produção Intelectual</h2>
                                    <p class="text-sm mb-1"><strong>Artigos:</strong> ${data.producaoIntelectual.artigos}</p>
                                    <p class="text-sm mb-1"><strong>Livros:</strong> ${data.producaoIntelectual.livros}</p>
                                    <p class="text-sm mb-1"><strong>Eventos:</strong> ${data.producaoIntelectual.eventos}</p>
                                </div>` : ''}
                            </div>
                            <div class="col-span-1">
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-lightbulb"></i>Habilidades e Tecnologia</h2>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        ${data.habilidades.soft ? data.habilidades.soft.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.hard ? data.habilidades.hard.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.tecnicas ? data.habilidades.tecnicas.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.habilidades.comportamentais ? data.habilidades.comportamentais.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                        ${data.tecnologias ? (Array.isArray(data.tecnologias) ? data.tecnologias.map(t => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${t}</span>`).join('') : (data.tecnologias.softwareEstatistico ? data.tecnologias.softwareEstatistico.split(', ').map(t => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${t}</span>`).join('') : '')) : ''}
                                    </div>
                                </div>
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-globe"></i>Idiomas</h2>
                                    ${data.idiomas.map(idioma => `<p class="text-sm mb-1"><strong>${idioma.idioma}:</strong> ${idioma.nivel}</p>`).join('')}
                                </div>
                                ${data.isAcademico && data.projetosPesquisa ? `
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-flask"></i>Projetos de Pesquisa</h2>
                                    ${data.projetosPesquisa.map(p => `<p class="text-sm mb-1"><strong>${p.nome}:</strong> ${p.papel} (${p.periodo})</p>`).join('')}
                                </div>` : ''}
                                ${data.isAcademico && data.associacoes ? `
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-handshake"></i>Associações</h2>
                                    <p class="text-sm">${data.associacoes}</p>
                                </div>` : ''}
                                <div class="cv-section">
                                    <h2 style="color: ${theme.primary};"><i class="ph-bold ph-note-pencil"></i>Informações Adicionais</h2>
                                    ${data.complementares.cnh ? `<p class="text-sm"><strong>CNH:</strong> ${data.complementares.cnh}</p>` : ''}
                                    ${data.complementares.voluntariado ? `<p class="text-sm"><strong>Voluntariado:</strong> ${data.complementares.voluntariado}</p>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                // Layout 3: Foco no conteúdo, com barra de cor vertical à esquerda
                (data, theme, font) => `
                    <div class="cv-preview shadow-lg rounded-xl flex" style="font-family: ${font.value};">
                        <div class="w-8" style="background-color: ${theme.primary};"></div>
                        <div class="p-8 flex-1">
                            <div class="pb-4 mb-4 border-b-2" style="border-color: ${theme.primary};">
                                <h1 class="text-3xl font-bold" style="color: ${theme.primary};">${data.dadosPessoais.nomeCompleto}</h1>
                                <p class="text-sm italic">${data.objetivoProfissional || data.resumoAcademico || ''}</p>
                                <div class="flex flex-wrap gap-4 mt-2">
                                    <span class="text-xs"><i class="ph-bold ph-envelope"></i> ${data.dadosPessoais.email}</span>
                                    <span class="text-xs"><i class="ph-bold ph-phone"></i> ${data.dadosPessoais.telefone}</span>
                                    ${data.redesSociais.linkedin ? `<span class="text-xs"><i class="ph-bold ph-linkedin-logo"></i> ${data.redesSociais.linkedin}</span>` : ''}
                                </div>
                            </div>
                            <div class="cv-section">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-graduation-cap"></i>Formação Acadêmica</h2>
                                ${data.formacao.map(f => `<div class="mb-4"><h3 class="font-bold">${f.curso || f.titulo}</h3><p class="text-sm font-semibold">${f.instituicao}</p><p class="text-xs mt-1 text-gray-500">${f.inicio || (f.periodo && f.periodo.split(' - ')[0]) || ''} - ${f.fim || (f.periodo && f.periodo.split(' - ')[1]) || f.anoDefesa || 'Presente'}</p></div>`).join('')}
                            </div>
                            <div class="cv-section">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-briefcase"></i>${data.isEstudante ? 'Projetos Acadêmicos' : data.isAcademico ? 'Experiência Acadêmica' : 'Experiência Profissional'}</h2>
                                ${(data.experiencia || []).map(e => `<div class="mb-4"><h3 class="font-bold">${e.cargo || e.projeto}</h3><p class="text-sm font-semibold">${e.empresa || e.instituicao}</p><p class="text-xs mt-1 text-gray-500">${e.inicio || e.periodo} - ${e.fim || (e.periodo && e.periodo.split(' - ')[1]) || 'Presente'}</p><p class="text-sm mt-2">${e.descricao || e.atividades || ''}</p></div>`).join('')}
                            </div>
                            ${data.certificacoesCursos && data.certificacoesCursos.length > 0 ? `
                            <div class="cv-section">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-medal"></i>Certificações e Cursos</h2>
                                <ul class="list-disc pl-5 text-sm">
                                ${data.certificacoesCursos.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>` : ''}
                            ${data.isAcademico && data.producaoIntelectual ? `
                            <div class="cv-section">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-books"></i>Produção Intelectual</h2>
                                <p class="text-sm mb-1"><strong>Artigos:</strong> ${data.producaoIntelectual.artigos}</p>
                                <p class="text-sm mb-1"><strong>Livros:</strong> ${data.producaoIntelectual.livros}</p>
                                <p class="text-sm mb-1"><strong>Eventos:</strong> ${data.producaoIntelectual.eventos}</p>
                            </div>` : ''}
                            <div class="cv-section">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-globe"></i>Habilidades e Idiomas</h2>
                                <div class="flex flex-wrap gap-2 mt-2">
                                    ${data.idiomas.map(i => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${i.idioma}: ${i.nivel}</span>`).join('')}
                                    ${data.habilidades.soft ? data.habilidades.soft.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                    ${data.habilidades.hard ? data.habilidades.hard.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                    ${data.habilidades.tecnicas ? data.habilidades.tecnicas.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                    ${data.habilidades.comportamentais ? data.habilidades.comportamentais.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                    ${data.tecnologias ? (Array.isArray(data.tecnologias) ? data.tecnologias.map(t => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${t}</span>`).join('') : (data.tecnologias.softwareEstatistico ? data.tecnologias.softwareEstatistico.split(', ').map(t => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${t}</span>`).join('') : '')) : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                // Layout 4: Visual de timeline para experiência e formação
                (data, theme, font) => `
                    <div class="cv-preview shadow-lg rounded-xl p-8" style="font-family: ${font.value};">
                        <h1 class="text-3xl font-bold text-center mb-6" style="color: ${theme.primary};">${data.dadosPessoais.nomeCompleto}</h1>
                        <p class="text-lg italic text-center mb-6">${data.objetivoProfissional || data.resumoAcademico || ''}</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div class="md:col-span-1">
                                <h2 style="color: ${theme.primary};"><i class="ph-bold ph-info"></i>Dados Pessoais</h2>
                                <p class="text-sm"><strong>E-mail:</strong> ${data.dadosPessoais.email}</p>
                                <p class="text-sm"><strong>Telefone:</strong> ${data.dadosPessoais.telefone}</p>
                                ${data.redesSociais.linkedin || data.redesSociais.instagram || data.redesSociais.googleScholar ? `
                                <h2 class="mt-4" style="color: ${theme.primary};"><i class="ph-bold ph-link"></i>Redes Sociais</h2>
                                ${data.redesSociais.linkedin ? `<p class="text-sm"><strong>LinkedIn:</strong> ${data.redesSociais.linkedin}</p>` : ''}
                                ${data.redesSociais.instagram ? `<p class="text-sm"><strong>Instagram:</strong> ${data.redesSociais.instagram}</p>` : ''}
                                ${data.redesSociais.googleScholar ? `<p class="text-sm"><strong>Google Scholar:</strong> ${data.redesSociais.googleScholar}</p>` : ''}` : ''}
                                <h2 class="mt-4" style="color: ${theme.primary};"><i class="ph-bold ph-globe"></i>Idiomas</h2>
                                ${data.idiomas.map(idioma => `<p class="text-sm"><strong>${idioma.idioma}:</strong> ${idioma.nivel}</p>`).join('')}
                                ${data.isAcademico && data.tecnologias.softwareEstatistico ? `
                                <h2 class="mt-4" style="color: ${theme.primary};"><i class="ph-bold ph-code"></i>Tecnologias</h2>
                                <p class="text-sm"><strong>Software:</strong> ${data.tecnologias.softwareEstatistico}</p>
                                <p class="text-sm"><strong>Gestores:</strong> ${data.tecnologias.gestoresBibliograficos}</p>` : ''}
                                ${data.isAcademico && data.associacoes ? `
                                <h2 class="mt-4" style="color: ${theme.primary};"><i class="ph-bold ph-handshake"></i>Associações</h2>
                                <p class="text-sm">${data.associacoes}</p>` : ''}
                                ${data.certificacoesCursos && data.certificacoesCursos.length > 0 ? `
                                <h2 class="mt-4" style="color: ${theme.primary};"><i class="ph-bold ph-medal"></i>Certificações</h2>
                                <ul class="list-disc pl-5 text-sm">
                                ${data.certificacoesCursos.map(c => `<li>${c}</li>`).join('')}
                                </ul>` : ''}
                            </div>

                            <div class="md:col-span-2">
                                <div class="relative pl-8 mb-8">
                                    <div class="absolute left-0 top-0 bottom-0 w-1" style="background-color: ${theme.primary};"></div>
                                    <div class="mb-8">
                                        <h2 style="color: ${theme.primary};"><i class="ph-bold ph-graduation-cap"></i>Formação Acadêmica</h2>
                                        ${data.formacao.map(f => `
                                            <div class="relative pl-8 mb-4">
                                                <div class="absolute w-4 h-4 rounded-full -left-2 top-1" style="background-color: ${theme.secondary}; border: 2px solid white;"></div>
                                                <h3 class="font-bold">${f.curso || f.titulo}</h3>
                                                <p class="text-sm font-semibold">${f.instituicao}</p>
                                                <p class="text-xs mt-1 text-gray-500">${f.inicio || (f.periodo && f.periodo.split(' - ')[0]) || ''} - ${f.fim || (f.periodo && f.periodo.split(' - ')[1]) || f.anoDefesa || 'Presente'}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div>
                                        <h2 style="color: ${theme.primary};"><i class="ph-bold ph-briefcase"></i>${data.isEstudante ? 'Projetos Acadêmicos' : data.isAcademico ? 'Experiência Acadêmica' : 'Experiência Profissional'}</h2>
                                        ${(data.experiencia || []).map(e => `
                                            <div class="relative pl-8 mb-4">
                                                <div class="absolute w-4 h-4 rounded-full -left-2 top-1" style="background-color: ${theme.secondary}; border: 2px solid white;"></div>
                                                <h3 class="font-bold">${e.cargo || e.projeto}</h3>
                                                <p class="text-sm font-semibold">${e.empresa || e.instituicao}</p>
                                                <p class="text-xs mt-1 text-gray-500">${e.inicio || e.periodo} - ${e.fim || (e.periodo && e.periodo.split(' - ')[1]) || 'Presente'}</p>
                                                <p class="text-sm mt-2">${e.descricao || e.atividades || ''}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="cv-section mt-8">
                            <h2 style="color: ${theme.primary};"><i class="ph-bold ph-lightbulb"></i>Habilidades</h2>
                            <div class="flex flex-wrap gap-2 mt-2">
                                ${data.habilidades.soft ? data.habilidades.soft.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                ${data.habilidades.hard ? data.habilidades.hard.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                ${data.habilidades.tecnicas ? data.habilidades.tecnicas.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                                ${data.habilidades.comportamentais ? data.habilidades.comportamentais.map(h => `<span class="cv-tag" style="background-color: ${theme.accent}; color: ${theme.primary}">${h}</span>`).join('') : ''}
                            </div>
                        </div>
                    </div>
                `
            ];

            // --- FUNÇÕES DE RENDERIZAÇÃO E LÓGICA ---
            
            // Função para criar um card de preview
            function createPreviewCard(layoutIndex, colorIndex, fontIndex) {
                const layout = layouts[layoutIndex];
                const theme = colorPalettes[colorIndex];
                const font = fontFamilies[fontIndex];
                const profileData = curriculumData[currentPerfil];

                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300 cursor-pointer';
                card.innerHTML = `
                    <div class="preview-container">
                        ${layout(profileData, theme, font)}
                    </div>
                    <div class="p-4 flex flex-col items-center">
                        <p class="font-semibold text-gray-800">Modelo ${layoutIndex + 1}</p>
                        <!-- As informações de cor e fonte foram removidas do preview, mas ainda podem ser ajustadas no modal. -->
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    openModal(layoutIndex, colorIndex, fontIndex);
                });

                return card;
            }

            // Função para preencher as opções de customização no modal
            function setupCustomizationOptions(layoutIndex, currentColorIndex, currentFontIndex) {
                colorPicker.innerHTML = colorPalettes.map((p, i) => `
                    <button class="color-picker-ball ${i === parseInt(currentColorIndex) ? 'active' : ''}" style="background-color: ${p.primary};" aria-label="Selecionar cor ${p.name}" data-index="${i}" tabindex="0"></button>
                `).join('');

                fontPicker.innerHTML = fontFamilies.map((f, i) => `
                    <button class="font-picker-btn ${i === parseInt(currentFontIndex) ? 'active' : ''}" style="font-family: ${f.value};" aria-label="Selecionar fonte ${f.name}" data-index="${i}" tabindex="0">${f.name}</button>
                `).join('');

                // Adiciona listeners para os botões de customização
                colorPicker.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', (e) => updatePreviewStyles(layoutIndex, e.target.dataset.index, currentFontIndex));
                });
                fontPicker.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', (e) => updatePreviewStyles(layoutIndex, currentColorIndex, e.target.dataset.index));
                });
            }

            // Função para atualizar os estilos da pré-visualização no modal
            function updatePreviewStyles(layoutIndex, colorIndex, fontIndex) {
                const layout = layouts[layoutIndex];
                const profileData = curriculumData[currentPerfil];
                const theme = colorPalettes[colorIndex];
                const font = fontFamilies[fontIndex];
                
                previewContent.innerHTML = layout(profileData, theme, font);

                // Atualiza o estado visual dos botões
                colorPicker.querySelectorAll('button').forEach(btn => {
                    btn.classList.toggle('active', parseInt(btn.dataset.index) === parseInt(colorIndex));
                });
                fontPicker.querySelectorAll('button').forEach(btn => {
                    btn.classList.toggle('active', parseInt(btn.dataset.index) === parseInt(fontIndex));
                });
            }

            // Função para renderizar todos os 200 layouts
            function renderAllPreviews() {
                modelosContainer.innerHTML = ''; // Limpa os previews existentes
                const combinations = [];
                
                // Cria um array de combinações únicas
                for (let i = 0; i < layouts.length; i++) {
                    for (let j = 0; j < colorPalettes.length; j++) {
                        for (let k = 0; k < fontFamilies.length; k++) {
                            combinations.push({ layout: i, color: j, font: k });
                        }
                    }
                }

                // Embaralha as combinações para ter uma exibição mais variada
                combinations.sort(() => Math.random() - 0.5);

                for (let i = 0; i < 200; i++) {
                    const combo = combinations[i % combinations.length];
                    modelosContainer.appendChild(createPreviewCard(combo.layout, combo.color, combo.font));
                }
            }
            
            // Função para abrir o modal de preview
            function openModal(layoutIndex, colorIndex, fontIndex) {
                setupCustomizationOptions(layoutIndex, colorIndex, fontIndex);
                updatePreviewStyles(layoutIndex, colorIndex, fontIndex);
                previewModal.classList.remove('hidden');
            }

            // Função para fechar o modal
            window.fecharModal = () => {
                previewModal.classList.add('hidden');
            };

            // Função para maximizar o modal
            window.toggleMaximizeModal = () => {
                const modalContent = document.getElementById('preview-modal-content');
                modalContent.classList.toggle('maximized');
            };

            // Função para definir o perfil ativo
            window.setPerfilAtivo = (perfil, button) => {
                currentPerfil = perfil;
                document.querySelectorAll('.btn-perfil').forEach(btn => {
                    btn.classList.remove('active', 'bg-blue-500', 'text-white');
                    btn.classList.add('bg-gray-200', 'hover:bg-gray-300');
                });
                button.classList.add('active', 'bg-blue-500', 'text-white');
                button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                renderAllPreviews();
            };

            // Listener para fechar o modal com a tecla ESC e avançar com Enter
            document.addEventListener('keydown', (e) => {
                if (!previewModal.classList.contains('hidden')) {
                    if (e.key === 'Escape') {
                        fecharModal();
                    }
                    // Ação para o botão "Avançar" quando a tecla Enter é pressionada
                    if (e.key === 'Enter') {
                        document.getElementById('btn-avancar').click();
                    }
                }
            });
            
            // Listeners para navegação com setas no modal
            // Esta funcionalidade permite navegar entre os botões de cor e fonte com as setas do teclado.
            document.addEventListener('keydown', (e) => {
                if (!previewModal.classList.contains('hidden')) {
                    const currentActiveColor = colorPicker.querySelector('.active');
                    const currentActiveFont = fontPicker.querySelector('.active');
                    
                    let nextElement;

                    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                        if (document.activeElement.closest('#color-picker')) {
                            nextElement = currentActiveColor.nextElementSibling || colorPicker.firstElementChild;
                        } else if (document.activeElement.closest('#font-picker')) {
                            nextElement = currentActiveFont.nextElementSibling || fontPicker.firstElementChild;
                        }
                    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                        if (document.activeElement.closest('#color-picker')) {
                            nextElement = currentActiveColor.previousElementSibling || colorPicker.lastElementChild;
                        } else if (document.activeElement.closest('#font-picker')) {
                            nextElement = currentActiveFont.previousElementSibling || fontPicker.lastElementChild;
                        }
                    }

                    if (nextElement) {
                        e.preventDefault();
                        nextElement.focus();
                        nextElement.click();
                    }
                }
            });

            // Inicialização da página
            renderAllPreviews();
        });
    </script>

</body>
</html>
