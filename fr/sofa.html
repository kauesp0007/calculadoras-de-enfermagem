<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Chargement des fichiers structurels depuis le dossier /fr/ -->
    <link rel="preload" href="/fr/menu-global.html" as="fetch" crossorigin>
    <link rel="preload" href="/fr/global-body-elements.html" as="fetch" crossorigin>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SOFA - Évaluation Séquentielle de Défaillance d'Organes - Calculatrices de Soins Infirmiers</title>

    <!-- Bloc Hreflang MIS À JOUR comme demandé -->
    <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/fr/sofa.html" />
    <link rel="alternate" hreflang="fr" href="https://www.calculadorasdeenfermagem.com.br/fr/sofa.html" />
    <link rel="alternate" hreflang="pt-br" href="https://www.calculadorasdeenfermagem.com.br/sofa.html" />
    <link rel="alternate" hreflang="en" href="https://www.calculadorasdeenfermagem.com.br/en/sofa.html" />
    <link rel="alternate" hreflang="es" href="https://www.calculadorasdeenfermagem.com.br/es/sofa.html" />
    <link rel="alternate" hreflang="de" href="https://www.calculadorasdeenfermagem.com.br/de/sofa.html" />
    <link rel="alternate" hreflang="it" href="https://www.calculadorasdeenfermagem.com.br/it/sofa.html" />
    <link rel="alternate" hreflang="x-default" href="https://www.calculadorasdeenfermagem.com.br/sofa.html" />

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="Calculez le score SOFA (Sequential Organ Failure Assessment) pour évaluer la dysfonction d'organes chez les patients critiques, quantifiant la gravité dans six systèmes organiques et aidant au suivi et aux décisions cliniques." />
    <meta property="og:title" content="SOFA - Évaluation Séquentielle de Défaillance d'Organes - Calculatrices de Soins Infirmiers" />
    <meta property="og:description" content="Calculatrice interactive du score SOFA pour évaluer la dysfonction d'organes chez les patients critiques, quantifiant la gravité dans six systèmes organiques et aidant au suivi et aux décisions cliniques." />
    <meta property="og:url" content="https://www.calculadorasdeenfermagem.com.br/fr/sofa.html" />
    <meta property="og:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="SOFA - Évaluation Séquentielle de Défaillance d'Organes - Calculatrices de Soins Infirmiers" />
    <meta name="twitter:description" content="Calculatrice interactive du score SOFA pour évaluer la dysfonction d'organes chez les patients critiques, quantifiant la gravité dans six systèmes organiques et aidant au suivi et aux décisions cliniques." />
    <meta name="twitter:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />

    <script src="https://cdn.tailwindcss.com" defer></script>
    <script src="https://kit.fontawesome.com/083bed182a.js" crossorigin="anonymous"></script>
    <!-- Chemin absolu vers le CSS global -->
    <link rel="stylesheet" href="/global-styles.css" media="print" onload="this.media='all'">
    
    <link rel="preconnect" href="https://fonts.googleapis.com&display=swap">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700;900&family=Inter:wght@400;600;700&display=swap&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/antijingoist/opendyslexic/web/opendyslexic.css" media="print" onload="this.media='all'" />

    <script defer src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('consent', 'default', {
            'analytics_storage': 'denied',
            'ad_storage': 'denied',
            'wait_for_update': 500
        });
        gtag('config', 'AW-952633102');
        gtag('config', 'G-8FLJ59XXDK');
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MedicalEntity",
      "name": "SOFA - Évaluation Séquentielle de Défaillance d'Organes", // TRADUIT
      "url": "https://www.calculadorasdeenfermagem.com.br/fr/sofa.html",
      "description": "Calculatrice interactive du score SOFA pour évaluer la dysfonction d'organes chez les patients critiques, quantifiant la gravité dans six systèmes organiques et aidant au suivi et aux décisions cliniques.", // TRADUIT
      "alternateName": ["SOFA Score Calculator", "Sequential Organ Failure Assessment", "Score SOFA"] // Ajout version française
    }
    </script>

    <style>
         .resultado {
             padding: 1rem;
             margin-top: 1.5rem;
             border-radius: 8px;
             font-size: 1.1rem;
             border: 1px solid transparent;
             display: none; /* Caché par défaut */
             text-align: left;
        }
         .resultado p { margin-bottom: 0.5rem; }
         .resultado strong { font-weight: bold; }
        /* Classes de couleur pour le résultat */
        .resultado.bg-sofa-low { background-color: #D4EDDA; color: #155724; border-color: #c3e6cb;} /* Vert */
        .resultado.bg-sofa-medium { background-color: #FFF3CD; color: #856404; border-color: #ffeeba;} /* Jaune */
        .resultado.bg-sofa-high { background-color: #F8D7DA; color: #721C24; border-color: #f5c6cb;} /* Rouge */
        .bg-info-orange-light { background-color: #ffeeba; border-color: #ffb366; color: #856404; } /* Orange pour erreur */

        /* Styles pour les cartes de critères */
        .sofa-criteria-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .sofa-criterion-card {
            background-color: #fff;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
        }
        .sofa-criterion-card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
        }
        .sofa-criterion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            text-align: left;
        }
        .sofa-criterion-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1A3E74;
        }
        .sofa-score-display {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1FA4E5;
        }
        .sofa-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 0.375rem;
            font-size: 1rem;
            color: #333;
            background-color: #fff;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
        }
        .sofa-select:focus {
            outline: none;
            border-color: #1FA4E5;
            box-shadow: 0 0 0 3px rgba(31, 164, 229, 0.2);
        }
        .incomplete { /* Style pour les champs non remplis */
            border-color: #ef4444; /* Rouge */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-inter">

    <div class="w-full flex justify-center py-2 bg-gray-100" aria-label="Espace pour la publicité supérieure"> 
        <script type="text/javascript">
            atOptions = {
                'key' : '1e009bba81deb2bc366b3c4ac030f6be',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        
    </div>
    
    <nav aria-label="Raccourcis d'accessibilité" class="sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-50 focus-within:bg-white focus-within:text-blue-700 focus-within:p-4 focus-within:underline">
        <a href="/fr/" accesskey="I" class="block mb-2">Aller à l'accueil [Alt + Shift + I]</a>
        <a href="#main-content" accesskey="C" class="block mb-2">Passer au contenu principal [Alt + Shift + C]</a>
        <a href="#barraAcessibilidade" accesskey="A" class="block mb-2">Activer la barre d'accessibilité [Alt + Shift + A]</a>
        <a href="#backToTopBtn" accesskey="T" class="block">Retour en haut de la page [Alt + Shift + T]</a>
    </nav>

    <div id="statusMessage" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <div id="global-header-container"></div>
    <div id="language-dropdown-wrapper" class="flex justify-end w-full" style="position:relative; z-index:100; padding-right:2rem;">
        <div class="relative inline-block text-left z-50">
            <button id="langButton" class="flex items-center space-x-2 border px-3 py-1 rounded-lg shadow bg-gray-100">
                <img id="langFlag" width="20" height="16" src="/bandeira-franca.webp" alt="FR" class="w-5 h-4 rounded-sm">
                <span id="langText" class="text-gray-700 font-medium">Français</span>
                <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
            </button>

            <div id="langMenu" class="hidden absolute right-0 mt-2 w-44 bg-white border rounded-lg shadow-lg">
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="pt" data-flag="/bandeira-brasil.webp">
                    <img src="/bandeira-brasil.webp" class="w-5 h-4 rounded-sm" alt="BR"><span>Português</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="en" data-flag="/bandeira-eua.webp">
                    <img src="/bandeira-eua.webp" class="w-5 h-4 rounded-sm" alt="EN"><span>English</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="es" data-flag="/bandeira-espanha.webp">
                    <img src="/bandeira-espanha.webp" class="w-5 h-4 rounded-sm" alt="ES"><span>Español</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="de" data-flag="/bandeira-alemanha.webp">
                    <img src="/bandeira-alemanha.webp" class="w-5 h-4 rounded-sm" alt="DE"><span>Deutsch</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="it" data-flag="/bandeira-italia.webp">
                    <img src="/bandeira-italia.webp" class="w-5 h-4 rounded-sm" alt="IT"><span>Italiano</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="fr" data-flag="/bandeira-franca.webp">
                    <img src="/bandeira-franca.webp" class="w-5 h-4 rounded-sm" alt="FR"><span>Français</span>
                </div>
                 <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="hi" data-flag="/bandeira-india.webp">
                    <img src="/bandeira-india.webp" class="w-5 h-4 rounded-sm" alt="IN"><span>भारत</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="zh" data-flag="/bandeira-china.webp">
                    <img src="/bandeira-china.webp" class="w-5 h-4 rounded-sm" alt="CN"><span>中国</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ar" data-flag="/bandeira-arabia.webp">
                    <img src="/bandeira-arabia.webp" class="w-5 h-4 rounded-sm" alt="AR"><span>اللغة العربية</span>
                </div>
                <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ja" data-flag="/bandeira-japao.webp">
                    <img src="/bandeira-japao.webp" class="w-5 h-4 rounded-sm" alt="JP"><span>日本語</span>
                </div>
            </div>
        </div>
    </div>
    <main id="main-content" class="flex-grow p-4 sm:p-8">
        <div class="main-content-wrapper max-w-4xl mx-auto px-4 py-8">
            <nav class="breadcrumb" aria-label="fil d'Ariane"><ol><li><a href="/fr/index.html">Accueil</a></li><li><a href="#">Calculatrices</a></li><li>Score SOFA</li></ol></nav>

            <div class="flex flex-col items-center justify-center gap-4 mb-3 text-center">
                <h1 id="main-title" class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl">
                    Score SOFA
                </h1>
            </div>
            <div class="title-bar w-full h-1 bg-dark-blue mx-auto mb-6"></div>

            <h2 id="main-subtitle" class="font-inter font-semibold text-light-blue text-xl lg:text-2xl mb-3 text-center">
                Évaluation Séquentielle de Défaillance d'Organes
            </h2>
            <p id="description-text" class="text-gray-700 mb-6 text-left">
                Le terme "score SOFA" fait référence au score Sequential Organ Failure Assessment (Évaluation Séquentielle de Défaillance d'Organes), un outil crucial utilisé pour évaluer la dysfonction d'organes chez les patients critiques, en particulier ceux atteints de sepsis. Cette échelle quantifie la gravité de la dysfonction dans six systèmes organiques principaux : respiratoire, cardiovasculaire, hépatique, rénal, neurologique et hématologique (coagulation). Chaque système reçoit un score allant de 0 à 4, où les scores les plus élevés indiquent une dysfonction plus importante. Le score SOFA total peut varier de 0 à 24. Un score SOFA plus élevé suggère une plus grande gravité de la maladie et, par conséquent, un risque accru de mortalité. Le SOFA est fréquemment utilisé dans les unités de soins intensifs (USI) pour surveiller l'évolution de la dysfonction organique, aider à la prise de décisions cliniques et évaluer la réponse au traitement chez les patients gravement malades.
            </p>
             <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-left">
                <strong>Année de création :</strong> 1994 (publié en 1996)
            </p>
            <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-left">
                <strong>Auteurs :</strong> Groupe de travail sur les problèmes liés au Sepsis de la Société Européenne de Médecine de Soins Intensifs (ESICM), coordonné par J. L. Vincent.
            </p>
            <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-left">
                <strong>Domaine d'application :</strong> Unités de Soins Intensifs (USI).
            </p>
            <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-left">
                <strong>Critères évalués :</strong> Fonction respiratoire (PaO₂/FiO₂), Coagulation (Plaquettes), Fonction hépatique (Bilirubine), Fonction cardiovasculaire (Pression artérielle moyenne, vasopresseurs), Système Nerveux Central (Score de Glasgow), Fonction rénale (Créatinine, débit urinaire).
            </p>
            <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-left">
                <strong>Qui l'utilise ? :</strong> Médecins et infirmiers/infirmières intensivistes.
            </p>
            <p class="font-inter font-normal text-light-blue text-base lg:text-lg mb-6 text-left">
                Sélectionnez la valeur ou la condition pour chacun des critères ci-dessous (pire valeur des dernières 24h) :
            </p>

            <div id="conteudo" class="sofa-criteria-container">
                <!-- Les critères seront remplis dynamiquement par JavaScript -->
            </div>

            <div id="resultado" class="resultado hidden" aria-live="polite"></div>

            <div class="flex flex-wrap justify-start gap-4 mt-6">
                <button id="btnCalcular" class="btn-primary" aria-label="Calculer le score SOFA">
                    Calculer
                </button>
                <button id="btnLimpar" class="btn-primary" aria-label="Effacer les champs">
                    Effacer
                </button>
                <button id="btnGerarPDF" class="btn-secondary" aria-label="Générer PDF">
                    Générer PDF
                </button>
                <button id="btnNandaNicNoc" class="btn-primary" aria-label="Rechercher NANDA, NIC, NOC">
                    NANDA, NIC, NOC
                </button>
            </div>

            <div class="ref font-inter text-gray-custom text-left mt-8 border-t pt-4">
                <strong>Références Bibliographiques :</strong>
                 <!-- Références MISES À JOUR pour le Français -->
                <p class="mt-2">
                    Vincent JL, Moreno R, Takala J, et al. The SOFA (Sepsis-related Organ Failure Assessment) score to describe organ dysfunction/failure. On behalf of the Working Group on Sepsis-Related Problems of the European Society of Intensive Care Medicine. *Intensive Care Med*. 1996;22(7):707-710. <a href="https://pubmed.ncbi.nlm.nih.gov/8844239/" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">Voir PubMed</a> (Article original)
                </p>
                 <p class="mt-2">
                    Lambden S, Laterre PF, Levy MM, Francois B. The SOFA score-development, utility and challenges of accurate assessment in clinical trials. *Crit Care*. 2019;23(1):374. <a href="https://pubmed.ncbi.nlm.nih.gov/31771610/" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">Voir PubMed</a> (Revue récente)
                </p>
                 <p class="mt-2">
                    Société de Réanimation de Langue Française (SRLF). Recommandations et scores. (Consulter le site de la SRLF pour les pratiques françaises). <a href="https://www.srlf.org/" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">Site SRLF</a>
                 </p>
            </div>
        </div>
    </main>

    <!-- Pied de page REMPLACÉ par le placeholder pour la modularisation -->
    <div id="footer-placeholder"></div>
    
    
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <!-- Chemins absolus vers les scripts globaux -->
    <script src="/global-scripts.js" defer></script>
    <script src="/lang-selector.js" defer></script>

    <!-- Script de modularisation du pied de page (charge 'footer.html' depuis le dossier 'fr/') -->
    <script>
        fetch('footer.html') 
            .then(response => response.text()) 
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const resultadoDiv = document.getElementById('resultado');
            const btnCalcular = document.getElementById('btnCalcular');
            const btnLimpar = document.getElementById('btnLimpar');
            const btnGerarPDF = document.getElementById('btnGerarPDF');
            const btnNandaNicNoc = document.getElementById('btnNandaNicNoc');
            const conteudoDiv = document.getElementById('conteudo');
            const statusMessageDiv = document.getElementById('statusMessage'); // Pour lecteur d'écran
            
            // Données SOFA (TRADUITES et unités SI quand possible)
            // Conversion Bilirubine: mg/dL * 17.1 = µmol/L
            // Conversion Créatinine: mg/dL * 88.4 = µmol/L
            const sofaData = [
                {
                    category: "Respiratoire (PaO₂/FiO₂)",
                    nameAttr: "respiratoire",
                    explanation: "Évaluez le rapport PaO₂/FiO₂ du patient. PaO₂ en mmHg.",
                    options: [
                        { description: "≥ 400 mmHg", score: 0 }, // >= 53.3 kPa
                        { description: "< 400 mmHg", score: 1 }, // < 53.3 kPa
                        { description: "< 300 mmHg", score: 2 }, // < 40 kPa
                        { description: "< 200 mmHg avec support ventilatoire", score: 3 }, // < 26.7 kPa
                        { description: "< 100 mmHg avec support ventilatoire", score: 4 } // < 13.3 kPa
                    ]
                },
                {
                    category: "Coagulation (Plaquettes)",
                    nameAttr: "coagulation",
                    explanation: "Évaluez le nombre de plaquettes du patient (x10⁹/L ou /mm³ x10³).",
                    options: [
                        { description: "≥ 150 x10³/mm³", score: 0 },
                        { description: "< 150 x10³/mm³", score: 1 },
                        { description: "< 100 x10³/mm³", score: 2 },
                        { description: "< 50 x10³/mm³", score: 3 },
                        { description: "< 20 x10³/mm³", score: 4 }
                    ]
                },
                {
                    category: "Hépatique (Bilirubine)",
                    nameAttr: "hepatique",
                    explanation: "Évaluez le taux de bilirubine du patient (µmol/L ou mg/dL).",
                    options: [
                        { description: "< 20 µmol/L (< 1.2 mg/dL)", score: 0 },
                        { description: "20-32 µmol/L (1.2-1.9 mg/dL)", score: 1 },
                        { description: "33-101 µmol/L (2.0-5.9 mg/dL)", score: 2 },
                        { description: "102-204 µmol/L (6.0-11.9 mg/dL)", score: 3 },
                        { description: "> 204 µmol/L (> 12.0 mg/dL)", score: 4 }
                    ]
                },
                {
                    category: "Cardiovasculaire (PAM et Drogues Vasoactives)",
                    nameAttr: "cardiovasculaire",
                    explanation: "Évaluez la Pression Artérielle Moyenne (PAM) ou l'utilisation de drogues vasoactives (doses en µg/kg/min pour au moins 1h).",
                    options: [
                        { description: "PAM ≥ 70 mmHg", score: 0 },
                        { description: "PAM < 70 mmHg", score: 1 },
                        { description: "Dopamine ≤ 5 OU Dobutamine (toute dose)", score: 2 },
                        { description: "Dopamine > 5 OU Épinéphrine ≤ 0.1 OU Norépinéphrine ≤ 0.1", score: 3 },
                        { description: "Dopamine > 15 OU Épinéphrine > 0.1 OU Norépinéphrine > 0.1", score: 4 }
                    ]
                },
                {
                    category: "SNC (Glasgow)",
                    nameAttr: "snc",
                    explanation: "Évaluez le Score de Coma de Glasgow (GCS) du patient.",
                    options: [
                        { description: "GCS 15", score: 0 },
                        { description: "GCS 13-14", score: 1 },
                        { description: "GCS 10-12", score: 2 },
                        { description: "GCS 6-9", score: 3 },
                        { description: "GCS < 6", score: 4 }
                    ]
                },
                {
                    category: "Rénal (Créatinine / Débit Urinaire)",
                    nameAttr: "renal",
                    explanation: "Évaluez la créatinine sérique (µmol/L ou mg/dL) OU le débit urinaire (mL/jour).",
                    options: [
                        { description: "Créat < 110 µmol/L (< 1.2 mg/dL)", score: 0 },
                        { description: "Créat 110-170 µmol/L (1.2-1.9 mg/dL)", score: 1 },
                        { description: "Créat 171-299 µmol/L (2.0-3.4 mg/dL)", score: 2 },
                        { description: "Créat 300-440 µmol/L (3.5-4.9 mg/dL) OU Débit < 500 mL/j", score: 3 },
                        { description: "Créat > 440 µmol/L (> 5.0 mg/dL) OU Débit < 200 mL/j", score: 4 }
                    ]
                }
            ];

            // --- Fonctions de la Calculatrice SOFA ---
            function updateScoreDisplay(criterionId) {
                const selectElement = document.getElementById(criterionId);
                const scoreDisplayElement = document.getElementById(`${criterionId}_score_display`);
                if (selectElement && scoreDisplayElement) {
                     // Met à jour l'affichage avec le score de l'option sélectionnée, ou 0 si "Sélectionnez..."
                    scoreDisplayElement.innerText = selectElement.value === "" ? "0" : selectElement.value;
                }
            }

            function calculerPontuacao() {
                let totalSOFAScore = 0;
                let allItemsSelected = true;
                const selects = conteudoDiv.querySelectorAll('select');

                selects.forEach(selectElement => {
                    selectElement.classList.remove('incomplete'); // Réinitialise
                    if (selectElement.value === "") {
                        allItemsSelected = false;
                        selectElement.classList.add('incomplete'); // Met en évidence
                    } else {
                        totalSOFAScore += parseInt(selectElement.value, 10);
                    }
                });

                resultadoDiv.style.display = 'block'; // Assure la visibilité
                resultadoDiv.classList.remove('hidden');

                if (!allItemsSelected) {
                    resultadoDiv.innerHTML = '⚠️ <strong class="font-bold">Veuillez sélectionner une option pour chaque critère</strong> avant de calculer. Les champs manquants sont surlignés.'; // TRADUIT
                    resultadoDiv.className = 'resultado bg-info-orange-light'; // Style d'erreur
                    resultadoDiv.setAttribute('tabindex', '-1');
                    resultadoDiv.focus(); // Met le focus sur le message d'erreur
                    // Nettoie le dataset en cas d'erreur
                    delete resultadoDiv.dataset.score;
                    delete resultadoDiv.dataset.interpretation;
                    delete resultadoDiv.dataset.conduite;
                    return;
                }

                let interpretation = '';
                let conduite = ''; // Renommé de 'conduta'
                let resultadoClasse = '';

                // Interprétation qualitative TRADUITE basée sur le score total
                // Les seuils peuvent varier légèrement selon les études, mais ceux-ci sont courants.
                if (totalSOFAScore >= 0 && totalSOFAScore <= 6) { // Ajusté le seuil bas
                    interpretation = "Dysfonction d'organes légère. Le pronostic est généralement meilleur.";
                    resultadoClasse = 'bg-sofa-low'; // Vert
                    conduite = "Maintenir la surveillance clinique. Réévaluer en fonction de l'évolution du patient.";
                } else if (totalSOFAScore >= 7 && totalSOFAScore <= 11) { // Ajusté le seuil moyen
                    interpretation = "Dysfonction d'organes modérée. Risque accru de mortalité.";
                    resultadoClasse = 'bg-sofa-medium'; // Jaune
                    conduite = "Évaluation et prise en charge intensives. Envisager une investigation pour le sepsis et d'autres causes de dysfonction.";
                } else { // totalSOFAScore >= 12
                    interpretation = "Dysfonction d'organes sévère. Risque élevé de mortalité.";
                    resultadoClasse = 'bg-sofa-high'; // Rouge
                    conduite = "Prise en charge agressive de la dysfonction d'organes. Support vital avancé et recherche active de causes réversibles.";
                }

                 // Affichage TRADUIT
                resultadoDiv.innerHTML = `<p>Score Total SOFA : <strong class="font-bold">${totalSOFAScore}</strong></p><p>Interprétation : <strong class="font-bold">${interpretation}</strong></p><p>Conduite Suggérée : <strong class="font-bold">${conduite}</strong></p>`;
                resultadoDiv.className = `resultado ${resultadoClasse}`;
                resultadoDiv.setAttribute('tabindex', '-1');
                resultadoDiv.focus(); // Met le focus sur le résultat
                
                // Stocke les données TRADUITES
                resultadoDiv.dataset.score = totalSOFAScore;
                resultadoDiv.dataset.interpretation = interpretation;
                resultadoDiv.dataset.conduite = conduite; // Renommé
                resultadoDiv.dataset.scaleName = "Score SOFA"; // TRADUIT
            }

            function limparCampos() {
                sofaData.forEach(item => {
                    const selectElement = document.getElementById(item.nameAttr);
                    selectElement.selectedIndex = 0; // Remet à "Sélectionnez..."
                    selectElement.classList.remove('incomplete'); // Enlève le style d'erreur
                    // Met à jour l'affichage du score à côté du titre
                    const scoreDisplayElement = document.getElementById(`${item.nameAttr}_score_display`);
                    if (scoreDisplayElement) {
                        scoreDisplayElement.innerText = '0';
                    }
                });
                resultadoDiv.innerHTML = '';
                resultadoDiv.className = 'resultado hidden'; // Cache la div
                 // Nettoie tout le dataset
                delete resultadoDiv.dataset.score;
                delete resultadoDiv.dataset.interpretation;
                delete resultadoDiv.dataset.conduite;
                delete resultadoDiv.dataset.scaleName;
                 // Annonce pour lecteur d'écran
                statusMessageDiv.textContent = "Champs effacés."; 
            }

            // Remplit le formulaire dynamiquement
            sofaData.forEach((item, index) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'sofa-criterion-card';
                
                const headerDiv = document.createElement('div');
                headerDiv.className = 'sofa-criterion-header';

                const titleH3 = document.createElement('h3');
                titleH3.className = 'sofa-criterion-title';
                titleH3.innerText = `${item.category}`; // TRADUIT (dans sofaData)
                headerDiv.appendChild(titleH3);

                const scoreSpan = document.createElement('span');
                scoreSpan.className = 'sofa-score-display';
                scoreSpan.id = `${item.nameAttr}_score_display`; // ID unique
                scoreSpan.innerText = '0'; // Initialise à 0
                headerDiv.appendChild(scoreSpan);
                
                sectionDiv.appendChild(headerDiv);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'sofa-criterion-options';

                const selectElement = document.createElement('select');
                selectElement.id = item.nameAttr; // ID unique
                selectElement.className = 'sofa-select';
                selectElement.setAttribute('aria-label', item.category); // Pour accessibilité
                selectElement.onchange = () => updateScoreDisplay(item.nameAttr); // Met à jour l'affichage

                const defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.text = "Sélectionnez..."; // TRADUIT
                defaultOption.disabled = true; // Non sélectionnable
                defaultOption.selected = true; // Sélectionné par défaut
                selectElement.appendChild(defaultOption);

                item.options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option.score;
                     // Affichage : Description (Score: X)
                    optionElement.text = `${option.description} (${option.score})`; // TRADUIT (dans sofaData)
                    selectElement.appendChild(optionElement);
                });

                optionsDiv.appendChild(selectElement);
                sectionDiv.appendChild(optionsDiv);

                // Ajoute l'explication sous le select
                const explanationP = document.createElement('p');
                explanationP.className = 'text-gray-600 text-sm mt-2 text-left';
                explanationP.innerText = item.explanation; // TRADUIT (dans sofaData)
                sectionDiv.appendChild(explanationP);
                
                conteudoDiv.appendChild(sectionDiv);
            });

            // Ajoute les écouteurs aux boutons (labels TRADUITS)
            btnCalcular?.addEventListener('click', calculerPontuacao);
            btnLimpar?.addEventListener('click', limparCampos);

            btnGerarPDF?.addEventListener('click', () => {
                 // Vérifie si un score a été calculé et stocké
                if (!resultadoDiv.dataset.score) {
                    alert('Veuillez cliquer sur "Calculer" d\'abord pour générer le PDF.'); // TRADUIT
                    return;
                }
                if (typeof gerarPDFGlobal === 'function') {
                    // Crée un contenu HTML simple pour le PDF
                    const score = resultadoDiv.dataset.score;
                    const interpretation = resultadoDiv.dataset.interpretation;
                    const conduite = resultadoDiv.dataset.conduite;
                     const pdfContentHtml = `
                        <div style="font-family: Inter, sans-serif; padding: 20px;">
                            <h1 style="color: #1A3E74; border-bottom: 2px solid #1A3E74; padding-bottom: 5px;">Score SOFA</h1>
                            <h2 style="color: #1FA4E5; margin-top: 15px;">Rapport d'Évaluation Séquentielle de Défaillance d'Organes</h2>
                            <div style="margin-top: 25px; background-color: #f3f4f6; border-radius: 8px; padding: 15px; border: 1px solid #e5e7eb;">
                                <p style="font-size: 1.2em; color: #1A3E74; margin-bottom: 10px;"><strong>Score Total SOFA : ${score}</strong></p>
                                <p><strong>Interprétation :</strong> ${interpretation}</p>
                                <p><strong>Conduite Suggérée :</strong> ${conduite}</p>
                            </div>
                            <p style="margin-top: 20px; font-size: 0.9em; color: #6b7280;">Généré par Calculatrices de Soins Infirmiers</p>
                        </div>
                    `;

                    gerarPDFGlobal({
                        // Titres et nom de fichier TRADUITS
                        titulo: 'Score SOFA', 
                        subtitulo: 'Rapport d\'Évaluation Séquentielle de Défaillance d\'Organes',
                        nomeArquivo: 'rapport_score_sofa.pdf',
                        htmlConteudo: pdfContentHtml, // Utilise le HTML généré
                    });
                } else {
                    alert('Erreur : La fonction pour générer le PDF n\'a pas été trouvée.'); // TRADUIT
                    console.error('Fonction gerarPDFGlobal non définie.'); // TRADUIT
                }
            });
            
            btnNandaNicNoc?.addEventListener('click', () => {
                 // Vérifie si les données nécessaires sont là
                if (!resultadoDiv.dataset.score || !resultadoDiv.dataset.conduite) {
                    alert('Calculez le résultat pour rechercher la conduite à tenir.'); // TRADUIT
                    return;
                }
                const score = resultadoDiv.dataset.score;
                const scaleName = "Score SOFA"; // TRADUIT
                const conduite = resultadoDiv.dataset.conduite; // Utilise la conduite stockée
                
                // TRADUIT la query de recherche
                const searchQuery = encodeURIComponent(`${scaleName} score ${score} conduite ${conduite} générer taxonomie NANDA, générer taxonomie NIC et générer taxonomie NOC`);
                window.open(`https://www.google.com/search?q=${searchQuery}`, '_blank');
            });
        });
    </script>
    
    

    <script type="text/javascript">
        atOptions = {
            'key' : '1e009bba81deb2bc366b3c4ac030f6be',
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
        };
    </script>
    
</body>
</html>
