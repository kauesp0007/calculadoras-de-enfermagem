<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Protocolo de Manchester - Classifica√ß√£o de Risco - Calculadoras de Enfermagem</title>

  <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/manchester.html" />

  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="iconpages.png">
  <link rel="icon" type="image/png" href="iconpages.png">

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Nunito+Sans:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6TaYFAeBUiukpzYJjgNCd3z9aB+Lk7gmfkL+etwzaBkpZ/w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- html2pdf CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- Google Analytics - ID atualizado conforme auditoria -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-952633102');
    // Se voc√™ estiver usando um banner de consentimento de cookies e GTM completo,
    // adicione a l√≥gica para atualizar o consentimento aqui ap√≥s o aceite do usu√°rio:
    // gtag('consent', 'update', { 'analytics_storage': 'granted' });
  </script>

  <!-- Dados Estruturados (Schema.org) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalEntity",
    "name": "Protocolo de Manchester - Classifica√ß√£o de Risco",
    "url": "https://www.calculadorasdeenfermagem.com.br/manchester.html",
    "description": "Calculadora online do Protocolo de Manchester para classifica√ß√£o de risco em servi√ßos de urg√™ncia e emerg√™ncia, auxiliando na prioriza√ß√£o do atendimento ao paciente.",
    "alternateName": ["Manchester Triage System", "MTS"]
  }
  </script>

  <style>
    /* Reset b√°sico e Box-sizing para consist√™ncia */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Fontes personalizadas */
    .font-nunito { font-family: 'Nunito Sans', sans-serif; }
    .font-inter { font-family: 'Inter', sans-serif; }

    /* Estilos das classes de fonte e cor personalizadas (para uso no HTML com Tailwind) */
    .text-dark-blue { color: #1A3E74; } /* Azul Escuro */
    .text-light-blue { color: #1FA4E5; } /* Azul Claro */
    .text-gray-custom { color: #666666; } /* Cinza */
    .text-success-green { color: #1ED760; } /* Verde */
    .text-black-custom { color: #333; } /* Cor para textos padr√£o */
    .text-red-600 { color: #dc2626; } /* Tailwind red-600 para mensagens de erro */

    /* Padr√£o de Bot√µes (Componentes CSS para reuso) */
    .btn-primary {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      background-color: #1A3E74; /* Cor prim√°ria azul escuro */
      color: #FFF;
      padding: 12px 24px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      border: none;
      cursor: pointer;
      text-align: center;
    }
    .btn-primary:hover { background-color: #122c54; } /* Tom mais escuro no hover */
    .btn-secondary {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      background-color: #1FA4E5; /* Cor secund√°ria azul claro */
      color: #FFF;
      padding: 12px 24px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      border: none;
      cursor: pointer;
      text-align: center;
    }
    .btn-secondary:hover { background-color: #178ac7; } /* Tom mais escuro no hover */
    .btn-success {
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      background-color: #1ED760;
      color: #FFF;
      padding: 10px 20px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      border: none;
      cursor: pointer;
      text-align: center;
    }
    .btn-success:hover { background-color: #17b351; }

    /* Estilos para a √°rea de resultado da calculadora (Componente espec√≠fico) */
    .resultado {
      margin-top: 1.5rem; /* mt-6 */
      padding: 1.25rem; /* p-5 */
      border-radius: 0.5rem;
      font-weight: 600;
      text-align: left;
      white-space: pre-wrap; /* Mant√©m quebras de linha no texto */
      font-size: 1.125rem; /* text-lg */
      display: none; /* Inicia oculto */
    }
    /* Cores espec√≠ficas para o resultado do Manchester */
    .resultado.bg-red { background-color: #fee2e2; color: #dc2626; } /* red-100, red-600 */
    .resultado.bg-orange { background-color: #fff7ed; color: #ea580c; } /* orange-50, orange-700 */
    .resultado.bg-yellow { background-color: #fefce8; color: #d97706; } /* yellow-50, yellow-700 */
    .resultado.bg-green { background-color: #dcfce7; color: #15803d; } /* green-100, green-700 */
    .resultado.bg-blue { background-color: #eff6ff; color: #2563eb; } /* blue-50, blue-700 */

    /* Estilos para a refer√™ncia/bibliografia (Componente espec√≠fico) */
    .ref {
      margin-top: 2.5rem; /* mt-10 */
      font-size: 0.875rem; /* text-sm */
      color: #666666; /* text-gray-custom */
      text-align: left;
    }

    /* Estilo para o bot√£o "Ajude-nos" fixo (Componente de bot√£o) */
    .fixed-donation-button {
      z-index: 30;
    }
    
    /* Layout principal com Topbar fixa */
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh; /* Garante que o body ocupe a altura total da viewport */
      background-color: #f8fafc; /* Tailwind bg-gray-50 */
      color: #333; /* Tailwind text-gray-800 */
      font-family: 'Inter', sans-serif; /* Aplica a fonte Inter ao body */
    }

    /* ESTILOS DOS DROPDOWNS DA TOPBAR (MOVIDOS DE TOPBAR111.HTML) */
    .dropdown-menu { display: none; }
    .dropdown-menu.show { display: block; }
    nav { justify-content: flex-end; }  
    nav button { cursor: pointer; }
    nav .dropdown-menu a:hover { background-color: #bfdbfe; }
    /* FIM DOS ESTILOS DA TOPBAR */

    /* Estilos para garantir que o menu mobile fique acima de outros conte√∫dos quando aberto */
    #mainNav.flex {
        z-index: 40; /* Um z-index alto para o menu mobile */
        max-height: calc(100vh - 64px); /* Altura m√°xima da viewport menos a altura do header */
        overflow-y: auto; /* Adiciona scroll se o conte√∫do for muito longo */
        -webkit-overflow-scrolling: touch; /* Suaviza o scroll em iOS */
    }
    .dropdown-menu {
        position: static; /* Por padr√£o, est√°tico (fluxo normal) no mobile */
        margin-top: 0; /* Remove margin-top padr√£o no mobile */
        width: 100%; /* Ocupa a largura total do item pai no mobile */
        box-shadow: none; /* Remove sombra no mobile */
        border: none; /* Remove borda no mobile */
        background-color: transparent; /* Fundo transparente no mobile para se misturar ao menu principal */
        padding: 0; /* Remove padding extra no mobile */
    }

    /* Estilos espec√≠ficos para desktop para os dropdowns */
    @media (min-width: 768px) { /* md breakpoint */
        .dropdown-menu {
            position: absolute; /* Torna-se absoluto no desktop */
            margin-top: 0.5rem; /* mt-2 (8px) para desktop */
            width: auto; /* Largura autom√°tica para se ajustar ao conte√∫do */
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); /* Sombra padr√£o do Tailwind */
            border: 1px solid #e5e7eb; /* Borda padr√£o do Tailwind */
            background-color: #fff; /* Fundo branco para os dropdowns no desktop */
            padding: 0.5rem; /* p-2 */
            border-radius: 0.25rem; /* rounded */
        }
    }

    /* Espa√ßamento para o conte√∫do abaixo da topbar fixa */
    .main-content-wrapper {  
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      padding-top: 64px; /* Garante que o conte√∫do comece abaixo da topbar fixa (64px de altura) */
      width: 100%;
      max-width: 1280px; /* max-w-screen-xl (Tailwind 7xl) */
      margin-left: auto;
      margin-right: auto;
      padding: 2rem 1rem; /* p-8 px-4 */
    }
    
    /* Estilos espec√≠ficos para este arquivo */
    .descricao {
      font-size: 1rem; /* Adjust to Tailwind base font size */
      color: #333; /* Black-custom */
      margin-top: 1rem; /* mt-4 */
      margin-bottom: 1.5rem; /* mb-6 */
      line-height: 1.6; /* leading-relaxed */
    }
    table {
      @apply w-full border-collapse my-4 md:my-6; /* Tailwind classes for full width, collapse, margin-y */
    }
    th, td {
      @apply p-3 border border-gray-300 align-top; /* Tailwind classes for padding, border, vertical-align */
    }
    thead th {
      @apply bg-gray-100 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider;
    }
    tbody td {
      @apply font-medium text-black-custom;
    }
    input[type="checkbox"] {
      @apply w-5 h-5 text-light-blue bg-gray-100 border-gray-300 rounded focus:ring-light-blue focus:ring-2;
    }
    /* Estilo para aumentar a √°rea de toque da label do checkbox */
    label {
      @apply cursor-pointer block py-2; /* Make label a block element for better click area and add vertical padding */
    }

    /* --- RESPONSIVIDADE DA TABELA PARA MOBILE --- */
    @media (max-width: 640px) {
      table, thead, tbody, th, td, tr { 
        display: block; 
      }
      thead tr { 
        position: absolute;
        top: -9999px;
        left: -9999px; 
      }
      tr { 
        border: 1px solid #e2e8f0; /* border-gray-200 */
        margin-bottom: 0.75rem; /* mb-3 */
        display: block; 
        border-radius: 0.5rem; /* rounded-md */
        overflow: hidden; /* Ensures inner elements respect border-radius */
      }
      td {
        border: none;
        border-bottom: 1px solid #eee; /* border-gray-200 */
        position: relative;
        padding-left: 50%; /* Espa√ßo para o pseudo-elemento */
        text-align: right;
        font-size: 0.875rem; /* text-sm */
        padding-top: 0.75rem; /* py-3 */
        padding-bottom: 0.75rem; /* py-3 */
      }
      td:last-child {
        border-bottom: 0; /* Remove border from last cell in a row */
      }
      td:before {
        position: absolute;
        top: 0.75rem; /* Alinha com o padding-top do td */
        left: 0.75rem; /* px-3 */
        width: 45%;
        padding-right: 0.5rem; /* pr-2 */
        white-space: nowrap;
        text-align: left;
        font-weight: bold;
        color: #1A3E74; /* text-dark-blue */
      }
      /* Estilos espec√≠ficos para os r√≥tulos da tabela em mobile para Manchester */
      #tabela-sintomas td:nth-of-type(1):before { content: "Vari√°vel:"; }
      #tabela-sintomas td:nth-of-type(2):before { content: "Escore:"; }
      #tabela-sintomas td:nth-of-type(3):before { content: "Selecionar:"; }
    }

    /* Estilo para o modal de mensagem */
    .message-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        display: none; /* Hidden by default */
    }
    .message-modal-content {
        background-color: #fff;
        padding: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
        max-width: 400px;
        width: 90%;
        position: relative;
    }
    .message-modal-close {
        color: #aaa;
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
    }
    .message-modal-close:hover {
        color: #1F2937;
    }

    /* --- Cookie Consent Banner Styles --- */
    #cookieConsentBanner {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #1A3E74; /* Cor azul escuro da identidade */
        color: #fff;
        padding: 1rem;
        text-align: center;
        z-index: 1000; /* Acima do rodap√© e outros elementos */
        display: none; /* Oculto por padr√£o, mostrado via JS */
        flex-direction: column; /* Empilha conte√∫do em mobile */
        align-items: center;
        gap: 1rem;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    }

    #cookieConsentBanner.show {
        display: flex; /* Mostra o banner */
    }

    #cookieConsentBanner p {
        margin: 0;
        font-size: 0.9rem;
        line-height: 1.4;
    }

    #cookieConsentBanner .cookie-buttons {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
        flex-wrap: wrap; /* Permite quebrar em telas menores */
    }

    #cookieConsentBanner button {
        background-color: #2563eb; /* Tailwind blue-600 */
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: background-color 0.2s ease;
        border: none;
        cursor: pointer;
        white-space: nowrap; /* Evita quebra de linha no texto do bot√£o */
    }

    #cookieConsentBanner button.secondary {
        background-color: transparent;
        border: 1px solid rgba(255, 255, 255, 0.5);
    }

    #cookieConsentBanner button.secondary:hover {
        background-color: rgba(255, 255, 255, 0.1);
        border-color: white;
    }

    /* Responsive adjustments for cookie banner */
    @media (min-width: 768px) {
        #cookieConsentBanner {
            flex-direction: row; /* Layout em linha para desktop */
            justify-content: space-between;
            padding: 1rem 2rem;
        }
        #cookieConsentBanner .cookie-buttons {
            justify-content: flex-end;
        }
    }

    /* Estilos para o bot√£o de acessibilidade */
    .accessibility-hamburger-btn {
        position: fixed;
        bottom: 4rem; /* Dist√¢ncia da parte inferior */
        left: 1rem; /* Dist√¢ncia da parte esquerda */
        background-color: #1A3E74; /* Cor prim√°ria */
        color: white;
        border-radius: 50%;
        width: 56px; /* Largura do bot√£o */
        height: 56px; /* Altura do bot√£o */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem; /* Tamanho do √≠cone */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        z-index: 50; /* Garante que esteja acima da maioria dos elementos */
        transition: background-color 0.3s ease;
    }

    .accessibility-hamburger-btn:hover {
        background-color: #122c54; /* Cor mais escura no hover */
    }

    /* Off-canvas menu de acessibilidade */
    .accessibility-off-canvas-menu {
        position: fixed;
        top: 0;
        left: -300px; /* Escondido √† esquerda */
        width: 300px;
        height: 100%;
        background-color: #fff;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.2); /* Sombra para o lado direito */
        z-index: 100; /* Acima do bot√£o e do overlay */
        transition: left 0.3s ease-in-out; /* Transi√ß√£o para deslizar */
        padding: 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
    }

    .accessibility-off-canvas-menu.is-open {
        left: 0; /* Abre o menu */
    }

    /* Overlay que cobre a p√°gina quando o menu est√° aberto */
    .accessibility-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 90; /* Abaixo do menu, acima do conte√∫do */
        display: none; /* Escondido por padr√£o */
    }

    /* Cabe√ßalho do menu de acessibilidade */
    .accessibility-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
    }

    .accessibility-menu-header h3 {
        margin: 0;
        font-size: 1.2rem;
        color: #1A3E74;
    }

    /* Bot√£o de fechar o menu */
    .close-accessibility-menu-btn {
        background: none;
        border: none;
        font-size: 1.8rem;
        font-weight: bold;
        cursor: pointer;
        color: #666;
    }

    /* Op√ß√µes de acessibilidade */
    .accessibility-option {
        margin-bottom: 15px;
    }

    .accessibility-option label {
        display: block;
        font-weight: 600;
        margin-bottom: 5px;
        color: #333;
    }

    .accessibility-option button {
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 5px;
        transition: background-color 0.2s ease;
    }

    .accessibility-option button:hover {
        background-color: #e0e0e0;
    }

    .accessibility-option button.active {
        background-color: #1A3E74;
        color: white;
        border-color: #1A3E74;
    }

    /* Estilos para temas de acessibilidade (aplicados ao body) */
    body.high-contrast {
        background-color: black !important;
        color: yellow !important;
    }
    body.high-contrast h1, body.high-contrast h2, body.high-contrast h3, body.high-contrast h4, body.high-contrast h5, body.high-contrast h6 {
        color: white !important;
    }
    body.high-contrast .container, body.high-contrast table, body.high-contrast .resultado, body.high-contrast .accessibility-off-canvas-menu { /* Ajuste para containers espec√≠ficos */
        background-color: black !important;
        border-color: yellow !important;
        color: yellow !important;
    }
    body.high-contrast th, body.high-contrast td {
        border-color: yellow !important;
    }
    body.high-contrast tr.selected, body.high-contrast tr.selected td {
        background-color: #333 !important; /* Um cinza escuro para sele√ß√£o em alto contraste */
    }
    body.high-contrast select, body.high-contrast input, body.high-contrast textarea { /* Ajuste para campos de formul√°rio */
        background-color: black !important;
        color: yellow !important;
        border-color: yellow !important;
    }
    body.high-contrast select option {
        background-color: black !important;
        color: yellow !important;
    }
    body.high-contrast button { /* Ajuste para bot√µes */
        background-color: yellow !important;
        color: black !important;
        border-color: yellow !important;
    }
    body.high-contrast button:hover {
        background-color: #e0e000 !important;
    }
    body.high-contrast a {
        color: yellow !important;
    }

    body.dark-mode {
        background-color: #1a202c !important; /* bg-gray-900 */
        color: #e2e8f0 !important; /* text-gray-200 */
    }
    body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5, body.dark-mode h6 {
        color: #edf2f7 !important; /* text-gray-100 */
    }
    body.dark-mode .container, body.dark-mode table, body.dark-mode .resultado, body.dark-mode .accessibility-off-canvas-menu { /* Ajuste para containers espec√≠ficos */
        background-color: #2d3748 !important; /* bg-gray-800 */
        border-color: #4a5568 !important; /* border-gray-700 */
        color: #e2e8f0 !important;
    }
    body.dark-mode th, body.dark-mode td {
        border-color: #4a5568 !important;
    }
    body.dark-mode th {
        background-color: #4a5568 !important; /* blue-900 */
        color: #e2e8f0 !important;
    }
    body.dark-mode tr.selected, body.dark-mode tr.selected td {
        background-color: #4a5568 !important; /* blue-800 */
    }
    body.dark-mode select, body.dark-mode input, body.dark-mode textarea { /* Ajuste para campos de formul√°rio */
        background-color: #2d3748 !important;
        color: #e2e8f0 !important;
        border-color: #4a5568 !important;
    }
    body.dark-mode select option {
        background-color: #2d3748 !important;
        color: #e2e8f0 !important;
    }
    body.dark-mode button { /* Ajuste para bot√µes */
        background-color: #4299e1 !important; /* blue-500 */
        color: white !important;
    }
    body.dark-mode button:hover {
        background-color: #3182ce !important; /* blue-600 */
    }
    body.dark-mode a {
        color: #63b3ed !important;
    }
    body.dark-mode .accessibility-menu-header h3 {
        color: #e2e8f0 !important;
    }
    body.dark-mode .close-accessibility-menu-btn {
        color: #a0aec0 !important;
    }
    body.dark-mode .accessibility-option label {
        color: #e2e8f0 !important;
    }
    body.dark-mode .accessibility-option button {
        background-color: #4a5568 !important;
        border-color: #667eea !important;
        color: #e2e8f0 !important;
    }
    body.dark-mode .accessibility-option button.active {
        background-color: #4299e1 !important;
        color: white !important;
        border-color: #4299e1 !important;
    }

    /* Estilos para tamanho de fonte (aplicados ao body) */
    body.font-size-small { font-size: 0.875rem; } /* text-sm */
    body.font-size-large { font-size: 1.125rem; } /* text-lg */

  </style>
</head>
<body class="bg-gray-50 text-gray-800 font-inter">

  <div id="topbar-container"></div>  

  <div class="main-content-wrapper">
    <main class="flex flex-col flex-grow">

      <div class="flex flex-wrap items-center justify-center gap-4 mb-3">
        <img src="iconpages.png" alt="√çcone do Protocolo de Manchester" class="w-32 h-auto" />
        <h1 id="main-title" class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl text-center">
          Protocolo de Manchester
        </h1>
      </div>

      <div id="conteudo-principal" class="w-full">
        <div id="descricao-header" class="descricao font-inter text-black-custom">
          Classifica a gravidade e prioridade de atendimento do paciente na urg√™ncia com base em crit√©rios pontuados.
        </div>

        <h2 class="font-bold text-lg text-dark-blue mb-4">Selecione os escores correspondentes para cada sintoma/condi√ß√£o:</h2>
        <form id="formManchester">
          <div class="overflow-x-auto">
            <table id="tabela-sintomas" class="min-w-full bg-white shadow-md rounded-lg">
              <thead>
                <tr>
                  <th>Vari√°vel</th>
                  <th class="w-24">Escore</th>
                  <th class="w-24">Selecionar</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Obstru√ß√£o de via a√©rea</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>Dificuldade respirat√≥ria grave</td><td>5</td><td><label><input type="checkbox" value="5"></label></td></tr>
                <tr><td>Confus√£o/agita√ß√£o</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Sonol√™ncia/desorienta√ß√£o</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>Inconsci√™ncia</td><td>5</td><td><label><input type="checkbox" value="5"></label></td></tr>
                <tr><td>Dor leve (1‚Äì3)</td><td>1</td><td><label><input type="checkbox" value="1"></label></td></tr>
                <tr><td>Dor moderada (4‚Äì6)</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Dor intensa (7‚Äì10)</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>PA &lt; 90 ou FC &gt; 130</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>Extremidades frias/sudorese</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Sangramento leve</td><td>1</td><td><label><input type="checkbox" value="1"></label></td></tr>
                <tr><td>Sangramento moderado</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Sangramento grave</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>Febre moderada (38‚Äì39&#8451;)</td><td>1</td><td><label><input type="checkbox" value="1"></label></td></tr>
                <tr><td>Febre alta (&gt;39&#8451;)</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Hipotermia (&lt;36&#8451;)</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
                <tr><td>Fraqueza/paralisia focal</td><td>3</td><td><label><input type="checkbox" value="3"></label></td></tr>
                <tr><td>Convuls√£o recente</td><td>4</td><td><label><input type="checkbox" value="4"></label></td></tr>
                <tr><td>Altera√ß√£o visual/auditiva s√∫bita</td><td>2</td><td><label><input type="checkbox" value="2"></label></td></tr>
              </tbody>
            </table>
          </div>
        </form>

        <div id="resultado" class="resultado" aria-live="polite"></div>

        <div id="bibliografia" class="ref font-inter text-gray-custom">
          <strong>Refer√™ncia bibliogr√°fica:</strong><br />
          <p class="mt-2">
            Brasil. Minist√©rio da Sa√∫de. Protocolo de Acolhimento com Classifica√ß√£o de Risco em Servi√ßos de Urg√™ncia ‚Äì Adulto. Bras√≠lia: Minist√©rio da Sa√∫de, 2014.<br>
            Dispon√≠vel em: <a href="https://www.gov.br/saude/pt-br/acesso-a-informacao/gestao-do-sus/atencao-especializada/urgencia-e-emergencia/acesso/protocolos" target="_blank" class="text-light-blue hover:underline">https://www.gov.br/saude/...</a>
          </p>
        </div>
      </div>

      <div class="flex flex-wrap justify-start gap-4 mt-6">
        <button id="btnCalcular" class="btn-primary" aria-label="Calcular Classifica√ß√£o de Risco">
          Calcular
        </button>
        <button id="btnLimpar" class="btn-primary" aria-label="Limpar sele√ß√µes">
          Limpar
        </button>
        <button id="btnGerarPDF" class="btn-secondary" aria-label="Gerar PDF">
          Gerar PDF
        </button>
        <!-- Bot√£o NANDA, NIC, NOC adicionado aqui -->
        <button id="btnNandaNicNoc" class="btn-primary" aria-label="Pesquisar NANDA, NIC, NOC">
            NANDA, NIC, NOC
        </button>
      </div>

    </main>
  </div>  
  
  <!-- Modal de Mensagem Personalizado -->
  <div id="messageModalOverlay" class="message-modal-overlay">
      <div class="message-modal-content">
          <button id="messageModalClose" class="message-modal-close">&times;</button>
          <p id="messageModalText" class="text-gray-700 text-lg"></p>
      </div>
  </div>

  <!-- Cookie Consent Banner -->
  <div id="cookieConsentBanner">
      <p>Utilizamos cookies para melhorar sua experi√™ncia em nosso site. Ao continuar navegando, voc√™ concorda com nossa <a href="politica.html" class="underline text-blue-200 hover:text-blue-100">Pol√≠tica de Cookies</a>.</p>
      <div class="cookie-buttons">
          <button id="acceptCookiesBtn">Aceitar todos os cookies</button>
          <button id="refuseCookiesBtn" class="secondary">Recusar cookies</button>
      </div>
  </div>

  <!-- Bot√£o Hamb√∫rguer de Acessibilidade -->
  <div id="accessibilityHamburgerBtn" class="accessibility-hamburger-btn" role="button" aria-label="Abrir menu de acessibilidade">
      <i class="fas fa-universal-access"></i>
  </div>

  <!-- Off-canvas Menu de Acessibilidade (Adaptado do padr√£o Aldrete) -->
  <div id="accessibilityOffCanvasMenu" class="accessibility-off-canvas-menu">
      <div class="accessibility-menu-header">
          <h3>Acessibilidade</h3>
          <button id="closeAccessibilityMenuBtn" class="close-accessibility-menu-btn" aria-label="Fechar menu de acessibilidade">&times;</button>
      </div>
      <div class="accessibility-option">
          <label>Tamanho da Fonte:</label>
          <button id="toggleFontSizeBtn" aria-label="Alternar tamanho da fonte">A</button>
      </div>
      <div class="accessibility-option">
          <label>Contraste:</label>
          <button id="toggleContrastBtn" aria-label="Alternar alto contraste">Contraste</button>
      </div>
      <div class="accessibility-option">
          <label>Modo de Leitura:</label>
          <button id="toggleDarkModeBtn" aria-label="Alternar modo escuro">Escuro</button>
      </div>
      <div class="accessibility-option">
          <button id="resetAccessibilityBtn" aria-label="Redefinir configura√ß√µes de acessibilidade">Redefinir</button>
      </div>
  </div>

  <!-- Overlay para o menu de acessibilidade -->
  <div id="accessibilityOverlay" class="accessibility-overlay"></div>

  <!-- Bot√£o Fixo "Ajude-nos a manter o site gratuito" -->
  <a href="doacoes.html" class="fixed bottom-4 right-4 bg-dark-blue text-white text-sm px-4 py-2 rounded-full shadow hover:bg-blue-900 transition fixed-donation-button">
    Ajude-nos a manter o site gratuito
  </a>
  
  <div id="footer-container"></div>

  <script src="topbar111.js" defer></script>
  <script>
    // Refer√™ncias para o modal de mensagem
    const messageModalOverlay = document.getElementById('messageModalOverlay');
    const messageModalText = document.getElementById('messageModalText');
    const messageModalClose = document.getElementById('messageModalClose');

    function showCustomMessage(message) {
        messageModalText.textContent = message;
        messageModalOverlay.style.display = 'flex';
    }

    function hideCustomMessage() {
        messageModalOverlay.style.display = 'none';
    }

    messageModalClose.addEventListener('click', hideCustomMessage);
    messageModalOverlay.addEventListener('click', (e) => {
        if (e.target === messageModalOverlay) {
            hideCustomMessage();
        }
    });

    function calcularManchester() {
      const checkboxes = document.querySelectorAll('#formManchester input[type="checkbox"]:checked');
      let total = 0;
      checkboxes.forEach(c => total += parseInt(c.value));
      
      const resultadoDiv = document.getElementById("resultado");
      let classificacao = '';
      let corClasse = '';
      let corTextoClasse = ''; // Adicionado para controlar a cor do texto no Tailwind

      // Resetar classes de cor
      resultadoDiv.classList.remove('bg-red', 'bg-orange', 'bg-yellow', 'bg-green', 'bg-blue', 
                                   'text-red-600', 'text-orange-700', 'text-yellow-700', 
                                   'text-green-700', 'text-blue-700');
      resultadoDiv.style.display = 'block'; // Garante que o resultado seja exibido

      if (total >= 12) {
        classificacao = "Vermelho ‚Äì Imediato"; // Texto para o dataset
        corClasse = "bg-red";
        corTextoClasse = "text-red-600";
      } else if (total >= 9) {
        classificacao = "Laranja ‚Äì At√© 10 min"; // Texto para o dataset
        corClasse = "bg-orange";
        corTextoClasse = "text-orange-700";
      } else if (total >= 6) {
        classificacao = "Amarelo ‚Äì At√© 60 min"; // Texto para o dataset
        corClasse = "bg-yellow";
        corTextoClasse = "text-yellow-700";
      } else if (total >= 3) {
        classificacao = "Verde ‚Äì At√© 120 min"; // Texto para o dataset
        corClasse = "bg-green";
        corTextoClasse = "text-green-700";
      } else {
        classificacao = "Azul ‚Äì At√© 240 min"; // Texto para o dataset
        corClasse = "bg-blue";
        corTextoClasse = "text-blue-700";
      }
      
      // Adiciona o emoji de volta apenas na exibi√ß√£o para o usu√°rio
      let classificacaoDisplay = '';
      if (total >= 12) {
        classificacaoDisplay = "üî¥ Vermelho ‚Äì Imediato";
      } else if (total >= 9) {
        classificacaoDisplay = "üü† Laranja ‚Äì At√© 10 min";
      } else if (total >= 6) {
        classificacaoDisplay = "üü° Amarelo ‚Äì At√© 60 min";
      } else if (total >= 3) {
        classificacaoDisplay = "üü¢ Verde ‚Äì At√© 120 min";
      } else {
        classificacaoDisplay = "üîµ Azul ‚Äì At√© 240 min";
      }

      resultadoDiv.innerHTML = `<strong>${classificacaoDisplay}</strong><br>Escore total: ${total}`;
      resultadoDiv.classList.add(corClasse, corTextoClasse);

      // Armazena a classifica√ß√£o e o escore nos data-attributes
      resultadoDiv.dataset.classificacao = classificacao;
      resultadoDiv.dataset.escore = total;
      resultadoDiv.dataset.scaleName = "Protocolo de Manchester"; // Adiciona o nome da escala
    }

    function limparCampos() {
      const checkboxes = document.querySelectorAll('#formManchester input[type="checkbox"]');
      checkboxes.forEach(c => c.checked = false);

      const resultadoDiv = document.getElementById("resultado");
      resultadoDiv.innerHTML = '';
      resultadoDiv.style.display = 'none';
      // Remover todas as classes de cor espec√≠ficas
      resultadoDiv.classList.remove('bg-red', 'bg-orange', 'bg-yellow', 'bg-green', 'bg-blue', 
                                   'text-red-600', 'text-orange-700', 'text-yellow-700', 
                                   'text-green-700', 'text-blue-700');
      // Limpa os data-attributes
      delete resultadoDiv.dataset.classificacao;
      delete resultadoDiv.dataset.escore;
      delete resultadoDiv.dataset.scaleName;
    }

    // Fun√ß√£o para gerar PDF (Aprimorada)
    function gerarPDF() {
        console.log('Fun√ß√£o gerarPDF() iniciada.');

        const mainTitle = document.getElementById('main-title');
        const descricaoHeader = document.getElementById('descricao-header');
        const tabelaSintomas = document.getElementById('tabela-sintomas');
        const resultadoDiv = document.getElementById('resultado');
        const bibliografiaDiv = document.getElementById('bibliografia');

        // 1. Verifica se um c√°lculo v√°lido foi realizado antes de gerar o PDF.
        if (resultadoDiv.style.display === 'none' || resultadoDiv.innerHTML.trim() === '' || resultadoDiv.innerHTML.includes('Nenhuma classifica√ß√£o de risco foi calculada')) {
            showCustomMessage('Por favor, clique em "Calcular" primeiro para obter o resultado antes de gerar o PDF.');
            return; // Aborta PDF generation
        }

        // Cria um container tempor√°rio para os elementos que ir√£o para o PDF
        const pdfContentWrapper = document.createElement('div');
        pdfContentWrapper.style.padding = '20px'; // Adiciona um padding geral ao conte√∫do do PDF
        pdfContentWrapper.style.fontFamily = 'Inter, sans-serif'; // Garante a fonte no PDF
        pdfContentWrapper.style.color = '#333'; // Cor do texto padr√£o no PDF

        // Adiciona o t√≠tulo principal (conforme instru√ß√£o global)
        const pdfTitle = document.createElement('h1');
        pdfTitle.style.fontSize = '24px';
        pdfTitle.style.fontWeight = 'bold';
        pdfTitle.style.textAlign = 'center';
        pdfTitle.style.marginBottom = '5px';
        pdfTitle.style.color = '#1A3E74';
        pdfTitle.textContent = "Escala NIHSS"; // T√≠tulo do PDF conforme instru√ß√£o global
        pdfContentWrapper.appendChild(pdfTitle);

        const pdfSubtitle = document.createElement('h2');
        pdfSubtitle.style.fontSize = '18px';
        pdfSubtitle.style.textAlign = 'center';
        pdfSubtitle.style.marginBottom = '20px';
        pdfSubtitle.style.color = '#1FA4E5';
        pdfSubtitle.textContent = "Relat√≥rio de Avalia√ß√£o do Acidente Vascular Encef√°lico"; // Subt√≠tulo do PDF conforme instru√ß√£o global
        pdfContentWrapper.appendChild(pdfSubtitle);

        // Adiciona a data de gera√ß√£o
        const dateDiv = document.createElement('p');
        dateDiv.style.fontSize = '12px';
        dateDiv.style.color = '#777';
        dateDiv.style.textAlign = 'center';
        dateDiv.style.marginBottom = '20px';
        dateDiv.innerText = `Gerado em: ${new Date().toLocaleDateString('pt-BR')} ${new Date().toLocaleTimeString('pt-BR')}`;
        pdfContentWrapper.appendChild(dateDiv);

        // Adiciona a descri√ß√£o
        if (descricaoHeader) {
            const clonedDescricao = descricaoHeader.cloneNode(true);
            clonedDescricao.style.fontSize = '12px';
            clonedDescricao.style.color = '#555';
            clonedDescricao.style.marginBottom = '15px';
            pdfContentWrapper.appendChild(clonedDescricao);
        }

        // Adiciona os sintomas selecionados e seus escores
        if (tabelaSintomas) {
            const selectedSymptomsDiv = document.createElement('div');
            selectedSymptomsDiv.innerHTML = '<h3 style="font-size: 16px; font-weight: bold; color: #1A3E74; margin-bottom: 10px;">Sintomas Selecionados:</h3>';
            
            const symptomsList = document.createElement('ul');
            symptomsList.style.listStyle = 'none';
            symptomsList.style.paddingLeft = '0';
            symptomsList.style.fontSize = '12px';

            const checkboxes = document.querySelectorAll('#formManchester input[type="checkbox"]');
            let hasSelectedSymptoms = false;
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    hasSelectedSymptoms = true;
                    // Encontra a linha (<tr>) pai do checkbox
                    const row = checkbox.closest('tr');
                    if (row) {
                        const variableName = row.cells[0].textContent.trim();
                        const score = checkbox.value; // O valor do checkbox √© o escore

                        const listItem = document.createElement('li');
                        listItem.style.marginBottom = '5px';
                        listItem.innerHTML = `<strong>${variableName}:</strong> ${score} pontos`;
                        symptomsList.appendChild(listItem);
                    }
                }
            });

            if (!hasSelectedSymptoms) {
                const noSymptomsMessage = document.createElement('li');
                noSymptomsMessage.innerHTML = 'Nenhum sintoma foi selecionado.';
                noSymptomsMessage.style.fontStyle = 'italic';
                noSymptomsMessage.style.color = '#777';
                symptomsList.appendChild(noSymptomsMessage);
            }
            selectedSymptomsDiv.appendChild(symptomsList);
            pdfContentWrapper.appendChild(selectedSymptomsDiv);
        }

        // Adiciona o resultado da classifica√ß√£o se estiver vis√≠vel
        if (resultadoDiv && resultadoDiv.style.display !== 'none' && resultadoDiv.innerHTML.trim() !== '' && !resultadoDiv.innerHTML.includes('Nenhuma classifica√ß√£o de risco foi calculada')) {
            const clonedResultado = resultadoDiv.cloneNode(true);
            clonedResultado.style.marginTop = '20px';
            clonedResultado.style.padding = '15px';
            clonedResultado.style.borderRadius = '8px';
            clonedResultado.style.whiteSpace = 'pre-wrap';
            clonedResultado.style.fontSize = '14px'; // Ajusta o tamanho da fonte para o PDF

            // Ajusta cores de fundo e texto para o PDF conforme a classifica√ß√£o
            const currentClasses = Array.from(resultadoDiv.classList);
            if (currentClasses.includes('bg-red')) {
                clonedResultado.style.backgroundColor = '#fee2e2'; clonedResultado.style.color = '#dc2626';
            } else if (currentClasses.includes('bg-orange')) {
                clonedResultado.style.backgroundColor = '#fff7ed'; clonedResultado.style.color = '#ea580c';
            } else if (currentClasses.includes('bg-yellow')) {
                clonedResultado.style.backgroundColor = '#fefce8'; clonedResultado.style.color = '#d97706';
            } else if (currentClasses.includes('bg-green')) {
                clonedResultado.style.backgroundColor = '#dcfce7'; clonedResultado.style.color = '#15803d';
            } else if (currentClasses.includes('bg-blue')) {
                clonedResultado.style.backgroundColor = '#eff6ff'; clonedResultado.style.color = '#2563eb';
            }
            pdfContentWrapper.appendChild(clonedResultado);
        } else {
            // Mensagem caso o c√°lculo n√£o tenha sido feito
            const noResultP = document.createElement('p');
            noResultP.style.fontSize = '14px';
            noResultP.style.color = '#dc2626';
            noResultP.style.marginTop = '20px';
            noResultP.innerText = 'Nenhuma classifica√ß√£o de risco foi calculada. Por favor, selecione os sintomas e clique em "Calcular" antes de gerar o PDF.';
            pdfContentWrapper.appendChild(noResultP);
        }

        // Adiciona a bibliografia
        if (bibliografiaDiv) {
            const clonedBibliografia = bibliografiaDiv.cloneNode(true);
            clonedBibliografia.style.marginTop = '25px';
            clonedBibliografia.style.fontSize = '12px';
            clonedBibliografia.style.color = '#666';
            clonedBibliografia.querySelectorAll('a').forEach(a => {
                a.style.color = '#1FA4E5';
                a.style.textDecoration = 'underline';
            });
            clonedBibliografia.querySelector('p.mt-2').style.marginTop = '5px'; // Ajusta margem do par√°grafo da ref
            pdfContentWrapper.appendChild(clonedBibliografia);
        }

        // Esconde o bot√£o de doa√ß√£o antes de gerar o PDF
        const fixedButton = document.querySelector('.fixed-donation-button');
        if (fixedButton) {
            fixedButton.style.display = 'none';
        }

        const opt = {
            margin:       0.5,
            filename:     'protocolo_manchester.pdf',
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 3, scrollY: 0, useCORS: true },
            jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' },
        };
        
        html2pdf().set(opt).from(pdfContentWrapper).save().then(() => {
            // Volta a exibir o bot√£o de doa√ß√£o ap√≥s a gera√ß√£o do PDF
            if (fixedButton) {
                fixedButton.style.display = '';
            }
        }).catch(error => {
            console.error('Erro ao gerar PDF:', error);
            showCustomMessage('Ocorreu um erro ao gerar o PDF. Por favor, tente novamente.');
            if (fixedButton) {
                fixedButton.style.display = '';
            }
        });
    }

    // --- L√≥gica do Cookie Consent Banner ---
    const cookieConsentBanner = document.getElementById('cookieConsentBanner');
    const acceptCookiesBtn = document.getElementById('acceptCookiesBtn');
    const refuseCookiesBtn = document.getElementById('refuseCookiesBtn');
    const cookiesAcceptedKey = 'cookiesAccepted'; // Chave para localStorage

    function showCookieBanner() {
        if (localStorage.getItem(cookiesAcceptedKey) === null) {
            cookieConsentBanner.classList.add('show');
        }
    }

    function hideCookieBanner() {
        cookieConsentBanner.classList.remove('show');
    }

    if (acceptCookiesBtn) {
        acceptCookiesBtn.addEventListener('click', () => {
            localStorage.setItem(cookiesAcceptedKey, 'true');
            hideCookieBanner();
            // Atualiza o consentimento do Google Analytics para 'granted'
            gtag('consent', 'update', {
                'analytics_storage': 'granted'
            });
        });
    }

    if (refuseCookiesBtn) {
        refuseCookiesBtn.addEventListener('click', () => {
            localStorage.setItem(cookiesAcceptedKey, 'false');
            hideCookieBanner();
            // O consentimento j√° est√° 'denied' por padr√£o, ent√£o n√£o precisa de 'update' aqui
        });
    }
    // --- Fim da L√≥gica do Cookie Consent Banner ---

    // --- L√≥gica de Acessibilidade (Adaptada do padr√£o Aldrete e com persist√™ncia) ---
    const accessibilityHamburgerBtn = document.getElementById('accessibilityHamburgerBtn');
    const accessibilityOffCanvasMenu = document.getElementById('accessibilityOffCanvasMenu');
    const closeAccessibilityMenuBtn = document.getElementById('closeAccessibilityMenuBtn');
    const accessibilityOverlay = document.getElementById('accessibilityOverlay');

    // Refer√™ncias aos novos bot√µes de acessibilidade (padr√£o Aldrete)
    const toggleFontSizeBtn = document.getElementById('toggleFontSizeBtn');
    const toggleContrastBtn = document.getElementById('toggleContrastBtn');
    const toggleDarkModeBtn = document.getElementById('toggleDarkModeBtn');
    const resetAccessibilityBtn = document.getElementById('resetAccessibilityBtn');

    let currentFontSize = localStorage.getItem('fontSize') || 'normal'; // 'normal', 'small', 'large'
    let isHighContrast = localStorage.getItem('isHighContrast') === 'true';
    let isDarkMode = localStorage.getItem('isDarkMode') === 'true';

    // Fun√ß√£o para aplicar/remover classes de acessibilidade e atualizar bot√µes
    function applyAccessibilitySettings() {
        const body = document.body;
        
        // Reset classes
        body.classList.remove('font-size-small', 'font-size-large', 'high-contrast', 'dark-mode');

        // Apply font size
        if (currentFontSize === 'small') {
            body.classList.add('font-size-small');
        } else if (currentFontSize === 'large') {
            body.classList.add('font-size-large');
        }

        // Apply contrast
        if (isHighContrast) {
            body.classList.add('high-contrast');
        }

        // Apply reading mode
        if (isDarkMode) {
            body.classList.add('dark-mode');
        }

        // Update active states for the toggle buttons (optional, but good for UX)
        // For toggle buttons, we don't have 'active' classes in the same way as multi-option buttons.
        // The visual feedback is the change in the page itself.
        // If you want visual feedback on the buttons, you'd add/remove classes here.
        // Example: if (isHighContrast) toggleContrastBtn.classList.add('active'); else toggleContrastBtn.classList.remove('active');
    }

    // Fun√ß√µes de Toggle
    if (toggleFontSizeBtn) {
        toggleFontSizeBtn.addEventListener('click', () => {
            if (currentFontSize === 'normal') {
                currentFontSize = 'large';
            } else if (currentFontSize === 'large') {
                currentFontSize = 'small';
            } else {
                currentFontSize = 'normal';
            }
            localStorage.setItem('fontSize', currentFontSize);
            applyAccessibilitySettings();
        });
    }
    if (toggleContrastBtn) {
        toggleContrastBtn.addEventListener('click', () => {
            isHighContrast = !isHighContrast;
            localStorage.setItem('isHighContrast', isHighContrast);
            applyAccessibilitySettings();
        });
    }
    if (toggleDarkModeBtn) {
        toggleDarkModeBtn.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('isDarkMode', isDarkMode);
            applyAccessibilitySettings();
        });
    }
    if (resetAccessibilityBtn) {
        resetAccessibilityBtn.addEventListener('click', () => {
            currentFontSize = 'normal';
            isHighContrast = false;
            isDarkMode = false;
            localStorage.removeItem('fontSize');
            localStorage.removeItem('isHighContrast');
            localStorage.removeItem('isDarkMode');
            applyAccessibilitySettings();
        });
    }

    // L√≥gica para abrir/fechar o menu de acessibilidade
    if (accessibilityHamburgerBtn) {
        accessibilityHamburgerBtn.addEventListener('click', () => {
            accessibilityOffCanvasMenu.classList.add('is-open');
            accessibilityOverlay.style.display = 'block';
        });
    }
    if (closeAccessibilityMenuBtn) {
        closeAccessibilityMenuBtn.addEventListener('click', () => {
            accessibilityOffCanvasMenu.classList.remove('is-open');
            accessibilityOverlay.style.display = 'none';
        });
    }
    if (accessibilityOverlay) {
        accessibilityOverlay.addEventListener('click', (e) => {
            if (e.target === accessibilityOverlay) {
                accessibilityOffCanvasMenu.classList.remove('is-open');
                accessibilityOverlay.style.display = 'none';
            }
        });
    }
    // Fechar com a tecla ESC
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && accessibilityOffCanvasMenu.classList.contains('is-open')) {
            accessibilityOffCanvasMenu.classList.remove('is-open');
            accessibilityOverlay.style.display = 'none';
        }
    });

    // Aplica as configura√ß√µes iniciais ao carregar a p√°gina
    applyAccessibilitySettings();
    // --- Fim da L√≥gica de Acessibilidade ---


    document.addEventListener('DOMContentLoaded', () => {
      // Anexa eventos aos bot√µes
      document.getElementById('btnCalcular').addEventListener('click', calcularManchester);
      document.getElementById('btnLimpar').addEventListener('click', limparCampos);
      document.getElementById('btnGerarPDF').addEventListener('click', gerarPDF);

      // NOVO: Adiciona o event listener para o bot√£o NANDA, NIC, NOC
      const btnNandaNicNoc = document.getElementById('btnNandaNicNoc');
      if (btnNandaNicNoc) {
          btnNandaNicNoc.addEventListener('click', () => {
              const resultadoDiv = document.getElementById('resultado');
              let currentEscore = '';
              let currentClassificacao = '';
              const scaleName = resultadoDiv.dataset.scaleName; // Pega o nome da escala

              // Verifica se resultadoDiv tem conte√∫do e est√° vis√≠vel
              if (resultadoDiv.style.display !== 'none' && resultadoDiv.innerText.trim() !== '' && !resultadoDiv.innerText.includes('Nenhuma classifica√ß√£o de risco foi calculada')) {
                  // Extrai a classifica√ß√£o e o escore dos data-attributes
                  currentClassificacao = resultadoDiv.dataset.classificacao;
                  currentEscore = resultadoDiv.dataset.escore;
              }

              // Se alguma parte crucial estiver faltando ap√≥s a an√°lise, exibe erro
              if (!currentEscore || !currentClassificacao || !scaleName) {
                  showCustomMessage('Por favor, clique em "Calcular" primeiro para obter o escore e a classifica√ß√£o e habilitar a pesquisa NANDA, NIC, NOC.');
                  return;
              }

              // Constr√≥i a string de pesquisa detalhada
              const detailedSearchQuery = `Classifica√ß√£o: ${currentClassificacao} - ${scaleName} GERAR diagnosticos de enfermagem da NANDA, GERAR interven√ß√µes de enfermagem do NIC, Gerar um exemplo de mensura√ß√£o dos resultados implementados pelo enfermeiro (NOC)`;
              const encodedSearchQuery = encodeURIComponent(detailedSearchQuery);
              
              // Abre uma nova aba com a pesquisa do Google
              window.open(`https://www.google.com/search?q=${encodedSearchQuery}`, '_blank');
          });
      }

      // Carrega o rodap√© (rodape111.html)
      fetch("rodape111.html")
        .then(res => res.text())
        .then(data => {
          const footerContainer = document.getElementById("footer-container");
          if (footerContainer) {
            footerContainer.innerHTML = data;
          } else {
            console.error('Elemento footer-container n√£o encontrado.');
          }
        })
        .catch(err => console.error("Erro ao carregar rodape111.html:", err));
    });
  </script>
</body>
</html>
