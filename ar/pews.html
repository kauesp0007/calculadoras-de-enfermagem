<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" href="menu-global.html" as="fetch" crossorigin />
    <link
      rel="preload"
      href="global-body-elements.html"
      as="fetch"
      crossorigin
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>مقياس PEWS - حاسبات التمريض</title>

    <link
      rel="canonical"
      href="https://www.calculadorasdeenfermagem.com.br/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="pt-br"
      href="https://www.calculadorasdeenfermagem.com.br/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="en"
      href="https://www.calculadorasdeenfermagem.com.br/en/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="es"
      href="https://www.calculadorasdeenfermagem.com.br/es/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="fr"
      href="https://www.calculadorasdeenfermagem.com.br/fr/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="de"
      href="https://www.calculadorasdeenfermagem.com.br/de/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="it"
      href="https://www.calculadorasdeenfermagem.com.br/it/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="ja"
      href="https://www.calculadorasdeenfermagem.com.br/ja/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="zh"
      href="https://www.calculadorasdeenfermagem.com.br/zh/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="hi"
      href="https://www.calculadorasdeenfermagem.com.br/hi/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="ar"
      href="https://www.calculadorasdeenfermagem.com.br/ar/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="ru"
      href="https://www.calculadorasdeenfermagem.com.br/ru/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="tr"
      href="https://www.calculadorasdeenfermagem.com.br/tr/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="ko"
      href="https://www.calculadorasdeenfermagem.com.br/ko/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="nl"
      href="https://www.calculadorasdeenfermagem.com.br/nl/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="pl"
      href="https://www.calculadorasdeenfermagem.com.br/pl/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="sv"
      href="https://www.calculadorasdeenfermagem.com.br/sv/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="id"
      href="https://www.calculadorasdeenfermagem.com.br/id/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="vi"
      href="https://www.calculadorasdeenfermagem.com.br/vi/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="uk"
      href="https://www.calculadorasdeenfermagem.com.br/uk/ar/pews.html"
    />
    <link
      rel="alternate"
      hreflang="x-default"
      href="https://www.calculadorasdeenfermagem.com.br/ar/pews.html"
    />
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <meta
      name="description"
      content="احسب مقياس PEWS (مقياس الإنذار المبكر للأطفال) لتحديد علامات التدهور السريري لدى الأطفال مبكرًا."
    />
    <meta property="og:title" content="مقياس PEWS - حاسبات التمريض" />
    <meta
      property="og:description"
      content="مقياس PEWS (مقياس الإنذار المبكر للأطفال) هو أداة لمراقبة العلامات الحيوية لدى الأطفال وتحديد علامات التدهور السريري مبكرًا."
    />
    <meta
      property="og:url"
      content="https://www.calculadorasdeenfermagem.com.br/ar/pews.html"
    />
    <meta
      property="og:image"
      content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="مقياس PEWS - حاسبات التمريض" />
    <meta
      name="twitter:description"
      content="مقياس PEWS (مقياس الإنذار المبكر للأطفال) هو أداة لمراقبة العلامات الحيوية لدى الأطفال وتحديد علامات التدهور السريري مبكرًا."
    />
    <meta
      name="twitter:image"
      content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp"
    />

    <link href="/public/output.css" rel="stylesheet" />
    <script
      async
      src="https://kit.fontawesome.com/083bed182a.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="../global-styles.css"
      media="print"
      onload="this.media='all'"
    />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- GFonts para Árabe (Cairo) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Nunito+Sans:wght@700;900&family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css"
    /></noscript>

    <script src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("consent", "default", {
        analytics_storage: "denied",
        ad_storage: "denied",
        wait_for_update: 500,
      });
      gtag("config", "AW-952633102");
      gtag("config", "G-8FLJ59XXDK");
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "MedicalEntity",
        "name": "مقياس PEWS",
        "url": "https://www.calculadorasdeenfermagem.com.br/ar/pews.html",
        "description": "مقياس PEWS (مقياس الإنذار المبكر للأطفال) هو أداة لمراقبة العلامات الحيوية لدى الأطفال وتحديد علامات التدهور السريري مبكرًا.",
        "alternateName": [
          "Pediatric Early Warning Score",
          "مقياس الإنذار المبكر للأطفال"
        ]
      }
    </script>

    <style>
      /* Adicionando a fonte Cairo para o árabe */
      body,
      .font-inter {
        font-family: "Cairo", "Inter", sans-serif;
      }
      .font-nunito {
        font-family: "Cairo", "Nunito Sans", sans-serif;
      }

      .resultado.bg-pews-0 {
        background-color: #d4edda;
        color: #155724;
      }
      .resultado.bg-pews-1-2 {
        background-color: #fff3cd;
        color: #856404;
      }
      .resultado.bg-pews-3 {
        background-color: #f8d7da;
        color: #721c24;
      }
      .resultado.bg-pews-4-6 {
        background-color: #fce2e2;
        color: #cc0000;
      }
      .resultado.bg-pews-7-mais {
        background-color: #c9302c;
        color: #ffffff;
      }
      .bg-info-orange-light {
        background-color: #ffeeba;
        border-color: #ffb366;
        color: #856404;
      }

      .pews-criteria-container {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }
      .pews-criterion-card {
        background-color: #fff;
        border: 1px solid #d1d5db;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease;
      }
      .pews-criterion-card:hover {
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
      }
      .pews-criterion-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        text-align: right; /* RTL */
      }
      .pews-criterion-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1a3e74;
      }
      .pews-score-display {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1fa4e5;
      }
      .pews-select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ccc;
        border-radius: 0.375rem;
        font-size: 1rem;
        color: #333;
        background-color: #fff;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: left 0.75rem center; /* RTL */
        background-size: 1.5em 1.5em;
        padding-right: 0.75rem; /* RTL */
        padding-left: 2.5rem; /* RTL */
      }
      .pews-select:focus {
        outline: none;
        border-color: #1fa4e5;
        box-shadow: 0 0 0 3px rgba(31, 164, 229, 0.2);
      }

      .pews-extra-points-section {
        background-color: #eff6ff; /* Tailwind blue-50 */
        border: 1px solid #c8d3e6;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9472305505608641"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="bg-gray-50 text-gray-800 font-inter">
    <nav
      aria-label="اختصارات إمكانية الوصول"
      class="sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-50 focus-within:bg-white focus-within:text-blue-700 focus-within:p-4 focus-within:underline"
    >
      <a href="index.html" accesskey="I" class="block mb-2"
        >الانتقال إلى البداية [Alt + Shift + I]</a
      >
      <a href="#main-content" accesskey="C" class="block mb-2"
        >الانتقال إلى المحتوى الرئيسي [Alt + Shift + C]</a
      >
      <a href="#barraAcessibilidade" accesskey="A" class="block mb-2"
        >تفعيل شريط إمكانية الوصول [Alt + Shift + A]</a
      >
      <a href="#backToTopBtn" accesskey="T" class="block"
        >العودة إلى أعلى الصفحة [Alt + Shift + T]</a
      >
    </nav>

    <div
      id="statusMessage"
      class="sr-only"
      aria-live="polite"
      aria-atomic="true"
    ></div>

    <div id="global-header-container"></div>
    <div
      id="language-dropdown-wrapper"
      class="flex justify-end w-full"
      style="
        position: relative;
        z-index: 100;
        padding-left: 2rem;
        padding-right: 0;
      "
    >
      <div class="relative inline-block text-left z-50">
        <button
          id="langButton"
          class="flex items-center space-x-2 border px-3 py-1 rounded-lg shadow bg-gray-100"
        >
          <img
            id="langFlag"
            width="20"
            height="16"
            src="../bandeira-arabia.webp"
            alt="AR"
            class="w-5 h-4 rounded-sm"
          />
          <span id="langText" class="text-gray-700 font-medium">العربية</span>
          <svg
            class="w-4 h-4 text-gray-500"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>

        <div
          id="langMenu"
          class="hidden absolute left-0 mt-2 w-44 bg-white border rounded-lg shadow-lg"
        >
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="pt"
            data-flag="../bandeira-brasil.webp"
          >
            <img
              src="../bandeira-brasil.webp"
              class="w-5 h-4 rounded-sm"
              alt="PT"
              width="20"
              height="16"
            /><span>البرتغالية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="en"
            data-flag="../bandeira-eua.webp"
          >
            <img
              src="../bandeira-eua.webp"
              class="w-5 h-4 rounded-sm"
              alt="EN"
              width="20"
              height="16"
            /><span>الإنجليزية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="es"
            data-flag="../bandeira-espanha.webp"
          >
            <img
              src="../bandeira-espanha.webp"
              class="w-5 h-4 rounded-sm"
              alt="ES"
              width="20"
              height="16"
            /><span>الإسبانية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="de"
            data-flag="../bandeira-alemanha.webp"
          >
            <img
              src="../bandeira-alemanha.webp"
              class="w-5 h-4 rounded-sm"
              alt="DE"
              width="20"
              height="16"
            /><span>الألمانية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="it"
            data-flag="../bandeira-italia.webp"
          >
            <img
              src="../bandeira-italia.webp"
              class="w-5 h-4 rounded-sm"
              alt="IT"
              width="20"
              height="16"
            /><span>الإيطالية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="fr"
            data-flag="../bandeira-franca.webp"
          >
            <img
              src="../bandeira-franca.webp"
              class="w-5 h-4 rounded-sm"
              alt="FR"
              width="20"
              height="16"
            /><span>الفرنسية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="hi"
            data-flag="../bandeira-india.webp"
          >
            <img
              src="../bandeira-india.webp"
              class="w-5 h-4 rounded-sm"
              alt="HI"
              width="20"
              height="16"
            /><span>الهندية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="zh"
            data-flag="../bandeira-china.webp"
          >
            <img
              src="../bandeira-china.webp"
              class="w-5 h-4 rounded-sm"
              alt="ZH"
              width="20"
              height="16"
            /><span>الصينية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="ar"
            data-flag="../bandeira-arabia.webp"
          >
            <img
              src="../bandeira-arabia.webp"
              class="w-5 h-4 rounded-sm"
              alt="AR"
              width="20"
              height="16"
            /><span>العربية</span>
          </div>
          <div
            class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2"
            data-value="ja"
            data-flag="../bandeira-japao.webp"
          >
            <img
              src="../bandeira-japao.webp"
              class="w-5 h-4 rounded-sm"
              alt="JA"
              width="20"
              height="16"
            /><span>اليابانية</span>
          </div>
        </div>
      </div>
    </div>
    <main id="main-content" class="flex-grow p-4 sm:p-8">
      <div class="main-content-wrapper max-w-4xl mx-auto px-4 py-8">
        <nav class="breadcrumb" aria-label="breadcrumb">
          <ol>
            <li><a href="index.html">البداية</a></li>
            <li><a href="#">حاسبات</a></li>
            <li>مقياس PEWS</li>
          </ol>
        </nav>

        <div
          class="flex flex-col items-center justify-center gap-4 mb-3 text-center"
        >
          <h1
            id="main-title"
            class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl"
          >
            مقياس PEWS
          </h1>
        </div>
        <div class="title-bar w-full h-1 bg-dark-blue mx-auto mb-6"></div>

        <h2
          id="main-subtitle"
          class="font-inter font-semibold text-light-blue text-xl lg:text-2xl mb-3 text-center"
        >
          تقييم التدهور السريري لمرضى الأطفال
        </h2>
        <p id="description-text" class="text-gray-700 mb-6 text-right">
          مقياس PEWS (مقياس الإنذار المبكر للأطفال) هو أداة منهجية لمراقبة
          العلامات الحيوية لدى الأطفال، بهدف التحديد المبكر لعلامات التدهور
          السريري. يعتمد على نظام تسجيل، حيث تتلقى المعلمات الحيوية المختلفة
          قيمًا تُجمع لتوليد درجة إجمالية. تشير الدرجة الأعلى إلى خطر أكبر
          للتدهور السريري، ويتم تحديد بروتوكول رعاية بناءً على النتيجة.
        </p>
        <p
          class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right"
        >
          <strong>سنة الإنشاء:</strong> ٢٠٠٥
        </p>
        <p
          class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right"
        >
          <strong>المؤلفون:</strong> بيتر ب. ه. أوهير وكارين ج. و. أوهير
        </p>
        <p
          class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right"
        >
          <strong>المجال المستخدم:</strong> طب الأطفال.
        </p>
        <p
          class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right"
        >
          <strong>المعايير المقيمة:</strong> الحالة العصبية، القلب والأوعية
          الدموية، والجهاز التنفسي.
        </p>
        <p
          class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right"
        >
          <strong>من يستخدمه؟:</strong> أطباء الأطفال وممرضو الأطفال.
        </p>
        <p
          class="font-inter font-normal text-light-blue text-base lg:text-lg mb-6 text-right"
        >
          حدد النتيجة لكل معامل فسيولوجي:
        </p>

        <div id="conteudo" class="pews-criteria-container"></div>

        <div id="resultado" class="resultado hidden" aria-live="polite"></div>

        <div class="flex flex-wrap justify-start gap-4 mt-6">
          <button
            id="btnCalcular"
            class="btn-primary"
            aria-label="احسب درجة PEWS"
          >
            احسب
          </button>
          <button id="btnLimpar" class="btn-primary" aria-label="مسح الحقول">
            مسح
          </button>
          <button id="btnGerarPDF" class="btn-secondary" aria-label="تصدير PDF">
            تصدير PDF
          </button>
          <button
            id="btnNandaNicNoc"
            class="btn-primary"
            aria-label="بحث NANDA, NIC, NOC"
          >
            NANDA, NIC, NOC
          </button>
        </div>

        <div
          id="bibliografia"
          class="ref font-inter text-gray-custom text-right mt-8 border-t pt-4"
        >
          <strong>المراجع:</strong>
          <p class="mt-2" dir="ltr">
            Parshuram, C. S., Duncan, H. P., Joffe, A. R., Farrell, C. A.,
            Lacroix, J. R., & Middaugh, K. L. (2011). Multicentre validation of
            the bedside paediatric early warning system score.
            <em>Critical Care</em>, 15(4), R184.
            <a
              href="https://ccforum.biomedcentral.com/articles/10.1186/cc10337"
              target="_blank"
              rel="noopener noreferrer"
              class="text-light-blue hover:underline"
            >
              متوفر في:
              https://ccforum.biomedcentral.com/articles/10.1186/cc10337
            </a>
          </p>
          <p class="mt-2" dir="ltr">
            Akre, M., Finkelstein, M., Erickson, M., Liu, M., & Vanderbilt, L.
            (2010). Sensitivity of the Pediatric Early Warning Score to identify
            patient deterioration.
            <em>Pediatrics</em>, 125(4), e763-e769.
            <a
              href="https://publications.aap.org/pediatrics/article/125/4/e763/72763/Sensitivity-of-the-Pediatric-Early-Warning-Score"
              target="_blank"
              rel="noopener noreferrer"
              class="text-light-blue hover:underline"
            >
              متوفر في:
              https://publications.aap.org/pediatrics/article/125/4/e763/72763
            </a>
          </p>
        </div>
      </div>
    </main>

    <div id="footer-placeholder"></div>
    <script>
      fetch("footer.html") // ١. جلب الملف
        .then((response) => response.text()) // ٢. تحويل الاستجابة إلى نص (HTML)
        .then((data) => {
          // ٣. إدراج HTML داخل العنصر النائب
          document.getElementById("footer-placeholder").innerHTML = data;
        });
    </script>

    <script src="../global-scripts.js" defer></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const resultadoDiv = document.getElementById("resultado");
        const btnCalcular = document.getElementById("btnCalcular");
        const btnLimpar = document.getElementById("btnLimpar");
        const btnGerarPDF = document.getElementById("btnGerarPDF");
        const btnNandaNicNoc = document.getElementById("btnNandaNicNoc");
        const conteudoDiv = document.getElementById("conteudo");

        const pewsData = [
          {
            parameter: "الحالة العصبية",
            nameAttr: "estadoNeurologico",
            options: [
              { description: "نشط", score: 0 },
              { description: "نعسان/غير نشط", score: 1 },
              { description: "متهيج", score: 2 },
              {
                description: "خامل/متبلد الذهن أو استجابة منخفضة للألم",
                score: 3,
              },
            ],
          },
          {
            parameter: "القلب والأوعية الدموية",
            nameAttr: "cardiovascular",
            options: [
              {
                description: "وردي أو زمن امتلاء الشعيرات الدموية ١-٢ ثانية",
                score: 0,
              },
              {
                description:
                  "شاحب أو زمن امتلاء الشعيرات الدموية ٣ ثوانٍ أو معدل ضربات القلب أعلى من الحد الأعلى للعمر",
                score: 1,
              },
              {
                description:
                  "مبقع أو زمن امتلاء الشعيرات الدموية ٤ ثوانٍ أو معدل ضربات القلب ≥ ٢٠ نبضة/دقيقة فوق الحد الأعلى للعمر",
                score: 2,
              },
              {
                description:
                  "رمادي/مزرق أو زمن امتلاء الشعيرات الدموية ≥ ٥ ثوانٍ أو معدل ضربات القلب ≥ ٣٠ نبضة/دقيقة فوق الحد الأعلى للعمر أو بطء ضربات القلب بالنسبة للعمر",
                score: 3,
              },
            ],
          },
          {
            parameter: "الجهاز التنفسي",
            nameAttr: "respiratorio",
            options: [
              {
                description: "معدل التنفس طبيعي للعمر، لا توجد سحوبات",
                score: 0,
              },
              {
                description:
                  "معدل التنفس أعلى من الحد الأعلى للعمر، استخدام العضلات المساعدة أو FiO₂ ≥ ٣٠٪ أو ٦ لتر/دقيقة من الأكسجين",
                score: 1,
              },
              {
                description:
                  "معدل التنفس ≥ ٢٠ مرة/دقيقة فوق الحد الأعلى للعمر، سحوبات تحت الضلوع، بين الضلوع، وفوق الترقوة (انخفاض) عظمة القص أو FiO₂ ≥ ٤٠٪ أو ٦ لتر/دقيقة من الأكسجين",
                score: 2,
              },
              {
                description:
                  "معدل التنفس ≤ ٥ مرات/دقيقة أقل من الحد الأدنى للعمر، سحوبات تحت الضلوع، بين الضلوع، فوق الترقوة، عظمة القص وأنين أو FiO₂ ≥ ٥٠٪ أو ٨ لتر/دقيقة من الأكسجين",
                score: 3,
              },
            ],
          },
        ];

        const pewsExtraPointsData = {
          question:
            "إضافة ٢ نقطتين إضافيتين (إذا تلقى رذاذًا قبل ١٥ دقيقة على الأقل من التقييم أو قيء مستمر بعد الجراحة - ٣ نوبات على الأقل)",
          nameAttr: "extraPointsCheckbox",
        };

        // --- وظائف حاسبة PEWS ---
        function updateScoreDisplay(criterionId) {
          const selectElement = document.getElementById(criterionId);
          const scoreDisplayElement = document.getElementById(
            `${criterionId}_score_display`,
          );
          if (selectElement && scoreDisplayElement) {
            scoreDisplayElement.innerText =
              selectElement.value === ""
                ? "٠"
                : selectElement.value
                    .replace(/0/g, "٠")
                    .replace(/1/g, "١")
                    .replace(/2/g, "٢")
                    .replace(/3/g, "٣");
          }
        }

        // تحويل الأرقام الغربية إلى عربية شرقية للنص
        function toArabicNumerals(numStr) {
          if (numStr === "7+") return "+٧"; // حالة خاصة
          return numStr
            .toString()
            .replace(/0/g, "٠")
            .replace(/1/g, "١")
            .replace(/2/g, "٢")
            .replace(/3/g, "٣")
            .replace(/4/g, "٤")
            .replace(/5/g, "٥")
            .replace(/6/g, "٦")
            .replace(/7/g, "٧")
            .replace(/8/g, "٨")
            .replace(/9/g, "٩");
        }

        function calcularPontuacao() {
          let totalScore = 0;
          let allItemsSelected = true;

          pewsData.forEach((item) => {
            const selectElement = document.getElementById(item.nameAttr);
            if (selectElement.value === "") {
              allItemsSelected = false;
            } else {
              totalScore += parseInt(selectElement.value, 10);
            }
          });

          const extraPointsCheckbox = document.getElementById(
            pewsExtraPointsData.nameAttr,
          );
          if (extraPointsCheckbox && extraPointsCheckbox.checked) {
            totalScore += 2;
          }

          resultadoDiv.style.display = "block";
          if (!allItemsSelected) {
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">يرجى تحديد خيار لكل عنصر</strong> قبل الحساب.';
            resultadoDiv.className = "resultado bg-info-orange-light";
            delete resultadoDiv.dataset.score;
            return;
          }

          let classificacao = "";
          let acaoRecomendada = "";
          let resultadoClasse = "";
          let displayScore = toArabicNumerals(totalScore.toString());

          if (totalScore >= 7) {
            classificacao = "نتيجة PEWS: +٧";
            acaoRecomendada =
              "تدفق الإنعاش القلبي الرئوي (توقف القلب والجهاز التنفسي).";
            resultadoClasse = "bg-pews-7-mais";
          } else if (totalScore >= 4 && totalScore <= 6) {
            classificacao = `نتيجة PEWS: ${displayScore}`;
            acaoRecomendada =
              "إعادة PEWS خلال ٢٠ دقيقة. تقييم/متابعة من قبل الممرض. فتح دعوة للتدخل. تسجيل التوجيهات الطبية في تطور التمريض.";
            resultadoClasse = "bg-pews-4-6";
          } else if (totalScore === 3) {
            classificacao = `نتيجة PEWS: ${displayScore}`;
            acaoRecomendada =
              "إعادة PEWS خلال ٣٠ دقيقة. تقييم فوري من قبل الممرض. إبلاغ الطبيب المعالج وتحديد الحاجة إلى دعوة للتدخل. تسجيل التوجيهات الطبية في تطور التمريض.";
            resultadoClasse = "bg-pews-3";
          } else if (totalScore >= 1 && totalScore <= 2) {
            classificacao = `نتيجة PEWS: ${displayScore}`;
            acaoRecomendada =
              "تقييم فوري من قبل الممرض. إعادة PEWS خلال ٦٠ دقيقة، إذا استمرت النتيجة، إبلاغ الطبيب المعالج. تسجيل التوجيهات الطبية في تطور التمريض.";
            resultadoClasse = "bg-pews-1-2";
          } else if (totalScore === 0) {
            classificacao = "نتيجة PEWS: ٠";
            acaoRecomendada =
              "الحفاظ على روتين فحص العلامات الحيوية كل ٦ ساعات.";
            resultadoClasse = "bg-pews-0";
          } else {
            classificacao = "نتيجة غير صالحة";
            acaoRecomendada =
              "النتيجة المحسوبة خارج الحدود المتوقعة للمقياس. تحقق من الاختيارات.";
            resultadoClasse = "bg-info-orange-light";
          }

          resultadoDiv.innerHTML = `<p>${classificacao}</p><p>الإجراء الموصى به: <strong class="font-bold">${acaoRecomendada}</strong></p>`;
          resultadoDiv.className = `resultado ${resultadoClasse}`;

          resultadoDiv.dataset.score = totalScore;
          resultadoDiv.dataset.classificacao = classificacao;
          resultadoDiv.dataset.conduta = acaoRecomendada;
          resultadoDiv.dataset.scaleName = "مقياس PEWS";
        }

        function limparCampos() {
          pewsData.forEach((item) => {
            const selectElement = document.getElementById(item.nameAttr);
            selectElement.selectedIndex = 0;
            document.getElementById(
              `${item.nameAttr}_score_display`,
            ).innerText = "٠";
          });
          const extraPointsCheckbox = document.getElementById(
            pewsExtraPointsData.nameAttr,
          );
          if (extraPointsCheckbox) {
            extraPointsCheckbox.checked = false;
          }

          resultadoDiv.innerHTML = "";
          resultadoDiv.className = "resultado hidden";
          delete resultadoDiv.dataset.score;
          delete resultadoDiv.dataset.classificacao;
          delete resultadoDiv.dataset.conduta;
          delete resultadoDiv.dataset.scaleName;
        }

        // يملأ النموذج ديناميكيًا
        pewsData.forEach((item, index) => {
          const sectionDiv = document.createElement("div");
          sectionDiv.className = "pews-criterion-card";

          const headerDiv = document.createElement("div");
          headerDiv.className = "pews-criterion-header";

          const titleH3 = document.createElement("h3");
          titleH3.className = "pews-criterion-title";
          titleH3.innerText = item.parameter;
          headerDiv.appendChild(titleH3);

          const scoreSpan = document.createElement("span");
          scoreSpan.className = "pews-score-display";
          scoreSpan.id = `${item.nameAttr}_score_display`;
          scoreSpan.innerText = "٠";
          headerDiv.appendChild(scoreSpan);

          sectionDiv.appendChild(headerDiv);

          const optionsDiv = document.createElement("div");
          optionsDiv.className = "pews-criterion-options";

          const selectElement = document.createElement("select");
          selectElement.id = item.nameAttr;
          selectElement.className = "pews-select";
          selectElement.onchange = () => updateScoreDisplay(item.nameAttr);

          const defaultOption = document.createElement("option");
          defaultOption.value = "";
          defaultOption.text = "اختر...";
          defaultOption.disabled = true;
          defaultOption.selected = true;
          selectElement.appendChild(defaultOption);

          item.options.forEach((option) => {
            const optionElement = document.createElement("option");
            optionElement.value = option.score;
            // Monta o texto da opção, usando numerais arábicos orientais
            let scoreDisplay = toArabicNumerals(option.score.toString());
            optionElement.text = `${option.description} (${scoreDisplay})`;
            selectElement.appendChild(optionElement);
          });

          optionsDiv.appendChild(selectElement);
          sectionDiv.appendChild(optionsDiv);
          conteudoDiv.appendChild(sectionDiv);
        });

        // يضيف قسم النقاط الإضافية
        const extraPointsSection = document.createElement("div");
        extraPointsSection.className = "pews-extra-points-section";
        const extraPointsLabel = document.createElement("label");
        extraPointsLabel.className = "flex items-center cursor-pointer";

        const extraPointsInput = document.createElement("input");
        extraPointsInput.type = "checkbox";
        extraPointsInput.id = pewsExtraPointsData.nameAttr;
        extraPointsInput.className =
          "form-checkbox h-5 w-5 text-blue-600 rounded-md";

        const extraPointsSpan = document.createElement("span");
        extraPointsSpan.className = "mr-2 text-gray-800"; // RTL: ml-2 -> mr-2
        extraPointsSpan.innerText = pewsExtraPointsData.question;

        extraPointsLabel.appendChild(extraPointsInput);
        extraPointsLabel.appendChild(extraPointsSpan);
        extraPointsSection.appendChild(extraPointsLabel);
        conteudoDiv.appendChild(extraPointsSection);

        // يضيف مستمعي الأحداث إلى الأزرار
        btnCalcular?.addEventListener("click", calcularPontuacao);
        btnLimpar?.addEventListener("click", limparCampos);

        btnGerarPDF?.addEventListener("click", () => {
          if (!resultadoDiv.dataset.score) {
            // Substitui o alert por uma mensagem no div de resultado
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">يرجى النقر فوق "احسب" أولاً</strong> لإنشاء ملف PDF.';
            resultadoDiv.className = "resultado bg-info-orange-light";
            resultadoDiv.style.display = "block";
            return;
          }
          if (typeof gerarPDFGlobal === "function") {
            gerarPDFGlobal({
              titulo: "مقياس PEWS",
              subtitulo: "تقرير تقييم التدهور السريري للأطفال",
              nomeArquivo: "relatorio_escala_pews.pdf",
              seletorConteudo: ".main-content-wrapper",
            });
          } else {
            console.error("الوظيفة gerarPDFGlobal غير معرفة.");
          }
        });

        btnNandaNicNoc?.addEventListener("click", () => {
          const score = resultadoDiv.dataset.score;
          const scaleName = resultadoDiv.dataset.scaleName;
          const classificacao = resultadoDiv.dataset.classificacao;
          if (!score || !classificacao) {
            // Substitui o alert por uma mensagem no div de resultado
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">احسب النتيجة أولاً</strong> للبحث عن NANDA, NIC, NOC.';
            resultadoDiv.className = "resultado bg-info-orange-light";
            resultadoDiv.style.display = "block";
            return;
          }
          const searchQuery = encodeURIComponent(
            `${scaleName} نتيجة ${score} تصنيف ${classificacao} إنشاء تصنيف NANDA, إنشاء تصنيف NIC وإنشاء تصنيف NOC`,
          );
          window.open(
            `https://www.google.com/search?q=${searchQuery}`,
            "_blank",
          );
        });
      });
    </script>

    <script src="../lang-selector.js" defer></script>
  </body>
</html>
