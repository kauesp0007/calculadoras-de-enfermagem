

  
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6472730056006847" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link rel="preload" href="menu-global.html" as="fetch" crossorigin="">
    <link rel="preload" href="global-body-elements.html" as="fetch" crossorigin="">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOFA - تقييم فشل الأعضاء المتسلسل - حاسبات التمريض</title>

    <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/ar/sofa.html">
    <link rel="alternate" hreflang="pt-br" href="https://www.calculadorasdeenfermagem.com.br/ar/sofa.html">
    <link rel="alternate" hreflang="en" href="https://www.calculadorasdeenfermagem.com.br/en/ar/sofa.html">
    <link rel="alternate" hreflang="es" href="https://www.calculadorasdeenfermagem.com.br/es/ar/sofa.html">
    <link rel="alternate" hreflang="fr" href="https://www.calculadorasdeenfermagem.com.br/fr/ar/sofa.html">
    <link rel="alternate" hreflang="de" href="https://www.calculadorasdeenfermagem.com.br/de/ar/sofa.html">
    <link rel="alternate" hreflang="it" href="https://www.calculadorasdeenfermagem.com.br/it/ar/sofa.html">
    <link rel="alternate" hreflang="ja" href="https://www.calculadorasdeenfermagem.com.br/ja/ar/sofa.html">
    <link rel="alternate" hreflang="zh" href="https://www.calculadorasdeenfermagem.com.br/zh/ar/sofa.html">
    <link rel="alternate" hreflang="hi" href="https://www.calculadorasdeenfermagem.com.br/hi/ar/sofa.html">
    <link rel="alternate" hreflang="ar" href="https://www.calculadorasdeenfermagem.com.br/ar/ar/sofa.html">
    <link rel="alternate" hreflang="ru" href="https://www.calculadorasdeenfermagem.com.br/ru/ar/sofa.html">
    <link rel="alternate" hreflang="tr" href="https://www.calculadorasdeenfermagem.com.br/tr/ar/sofa.html">
    <link rel="alternate" hreflang="ko" href="https://www.calculadorasdeenfermagem.com.br/ko/ar/sofa.html">
    <link rel="alternate" hreflang="nl" href="https://www.calculadorasdeenfermagem.com.br/nl/ar/sofa.html">
    <link rel="alternate" hreflang="pl" href="https://www.calculadorasdeenfermagem.com.br/pl/ar/sofa.html">
    <link rel="alternate" hreflang="sv" href="https://www.calculadorasdeenfermagem.com.br/sv/ar/sofa.html">
    <link rel="alternate" hreflang="id" href="https://www.calculadorasdeenfermagem.com.br/id/ar/sofa.html">
    <link rel="alternate" hreflang="vi" href="https://www.calculadorasdeenfermagem.com.br/vi/ar/sofa.html">
    <link rel="alternate" hreflang="uk" href="https://www.calculadorasdeenfermagem.com.br/uk/ar/sofa.html">
    <link rel="alternate" hreflang="x-default" href="https://www.calculadorasdeenfermagem.com.br/ar/sofa.html">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <meta name="description" content="احسب درجة SOFA (تقييم فشل الأعضاء المتسلسل) لتقييم خلل الأعضاء لدى المرضى الحرجين، وتحديد شدة الخلل في ستة أنظمة عضوية والمساعدة في المراقبة والقرارات السريرية.">
    <meta property="og:title" content="SOFA - تقييم فشل الأعضاء المتسلسل - حاسبات التمريض">
    <meta property="og:description" content="حاسبة تفاعلية لدرجة SOFA لتقييم خلل الأعضاء لدى المرضى الحرجين، وتحديد شدة الخلل في ستة أنظمة عضوية والمساعدة في المراقبة والقرارات السريرية.">
    <meta property="og:url" content="https://www.calculadorasdeenfermagem.com.br/ar/sofa.html">
    <meta property="og:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SOFA - تقييم فشل الأعضاء المتسلسل - حاسبات التمريض">
    <meta name="twitter:description" content="حاسبة تفاعلية لدرجة SOFA لتقييم خلل الأعضاء لدى المرضى الحرجين، وتحديد شدة الخلل في ستة أنظمة عضوية والمساعدة في المراقبة والقرارات السريرية.">
    <meta name="twitter:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp">

    <link href="/public/output.css" rel="stylesheet">
    <script async="" src="https://kit.fontawesome.com/083bed182a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../global-styles.css" media="print" onload="this.media='all'">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <!-- GFonts para Árabe (Cairo) -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&amp;family=Nunito+Sans:wght@700;900&amp;family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css"
    /></noscript>

    <script src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("consent", "default", {
        analytics_storage: "denied",
        ad_storage: "denied",
        wait_for_update: 500,
      });
      gtag("config", "AW-952633102");
      gtag("config", "G-8FLJ59XXDK");
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "MedicalEntity",
        "name": "SOFA - تقييم فشل الأعضاء المتسلسل",
        "url": "https://www.calculadorasdeenfermagem.com.br/ar/sofa.html",
        "description": "حاسبة تفاعلية لدرجة SOFA لتقييم خلل الأعضاء لدى المرضى الحرجين، وتحديد شدة الخلل في ستة أنظمة عضوية والمساعدة في المراقبة والقرارات السريرية.",
        "alternateName": [
          "SOFA Score Calculator",
          "Sequential Organ Failure Assessment",
          "درجة SOFA"
        ]
      }
    </script>

    <style>
      /* Adicionando a fonte Cairo para o árabe */
      body,
      .font-inter {
        font-family: "Cairo", "Inter", sans-serif;
      }
      .font-nunito {
        font-family: "Cairo", "Nunito Sans", sans-serif;
      }

      .resultado.bg-sofa-low {
        background-color: #d4edda;
        color: #155724;
      }
      .resultado.bg-sofa-medium {
        background-color: #fff3cd;
        color: #856404;
      }
      .resultado.bg-sofa-high {
        background-color: #f8d7da;
        color: #721c24;
      }
      .bg-info-orange-light {
        background-color: #ffeeba;
        border-color: #ffb366;
        color: #856404;
      }

      .sofa-criteria-container {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }
      .sofa-criterion-card {
        background-color: #fff;
        border: 1px solid #d1d5db;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease;
      }
      .sofa-criterion-card:hover {
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
      }
      .sofa-criterion-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        text-align: right; /* RTL */
      }
      .sofa-criterion-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1a3e74;
      }
      .sofa-score-display {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1fa4e5;
      }
      .sofa-select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ccc;
        border-radius: 0.375rem;
        font-size: 1rem;
        color: #333;
        background-color: #fff;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: left 0.75rem center; /* RTL */
        background-size: 1.5em 1.5em;
        padding-right: 0.75rem; /* RTL */
        padding-left: 2.5rem; /* RTL */
      }
      .sofa-select:focus {
        outline: none;
        border-color: #1fa4e5;
        box-shadow: 0 0 0 3px rgba(31, 164, 229, 0.2);
      }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&amp;family=Inter:wght@400;700&amp;display=swap" rel="stylesheet">
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9472305505608641" crossorigin="anonymous"></script>
  
  
    <nav aria-label="اختصارات إمكانية الوصول" class="sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-50 focus-within:bg-white focus-within:text-blue-700 focus-within:p-4 focus-within:underline">
      <a href="index.html" accesskey="I" class="block mb-2">الانتقال إلى البداية [Alt + Shift + I]</a>
      <a href="#main-content" accesskey="C" class="block mb-2">الانتقال إلى المحتوى الرئيسي [Alt + Shift + C]</a>
      <a href="#barraAcessibilidade" accesskey="A" class="block mb-2">تفعيل شريط إمكانية الوصول [Alt + Shift + A]</a>
      <a href="#backToTopBtn" accesskey="T" class="block">العودة إلى أعلى الصفحة [Alt + Shift + T]</a>
    </nav>

    <div id="statusMessage" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <div id="global-header-container"></div>
    <div id="language-dropdown-wrapper" class="flex justify-end w-full" style="
        position: relative;
        z-index: 100;
        padding-left: 2rem;
        padding-right: 0;
      ">
      <div class="relative inline-block text-left z-50">
        <button id="langButton" class="flex items-center space-x-2 border px-3 py-1 rounded-lg shadow bg-gray-100">
          <img id="langFlag" width="20" height="16" src="../bandeira-arabia.webp" alt="AR" class="w-5 h-4 rounded-sm" loading="lazy">
          <span id="langText" class="text-gray-700 font-medium">العربية</span>
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>

        <div id="langMenu" class="hidden absolute left-0 mt-2 w-44 bg-white border rounded-lg shadow-lg">
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="pt" data-flag="../bandeira-brasil.webp">
            <img src="../bandeira-brasil.webp" class="w-5 h-4 rounded-sm" alt="PT" width="20" height="16" loading="lazy"><span>البرتغالية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="en" data-flag="../bandeira-eua.webp">
            <img src="../bandeira-eua.webp" class="w-5 h-4 rounded-sm" alt="EN" width="20" height="16" loading="lazy"><span>الإنجليزية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="es" data-flag="../bandeira-espanha.webp">
            <img src="../bandeira-espanha.webp" class="w-5 h-4 rounded-sm" alt="ES" width="20" height="16" loading="lazy"><span>الإسبانية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="de" data-flag="../bandeira-alemanha.webp">
            <img src="../bandeira-alemanha.webp" class="w-5 h-4 rounded-sm" alt="DE" width="20" height="16" loading="lazy"><span>الألمانية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="it" data-flag="../bandeira-italia.webp">
            <img src="../bandeira-italia.webp" class="w-5 h-4 rounded-sm" alt="IT" width="20" height="16" loading="lazy"><span>الإيطالية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="fr" data-flag="../bandeira-franca.webp">
            <img src="../bandeira-franca.webp" class="w-5 h-4 rounded-sm" alt="FR" width="20" height="16" loading="lazy"><span>الفرنسية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="hi" data-flag="../bandeira-india.webp">
            <img src="../bandeira-india.webp" class="w-5 h-4 rounded-sm" alt="HI" width="20" height="16" loading="lazy"><span>الهندية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="zh" data-flag="../bandeira-china.webp">
            <img src="../bandeira-china.webp" class="w-5 h-4 rounded-sm" alt="ZH" width="20" height="16" loading="lazy"><span>الصينية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ar" data-flag="../bandeira-arabia.webp">
            <img src="../bandeira-arabia.webp" class="w-5 h-4 rounded-sm" alt="AR" width="20" height="16" loading="lazy"><span>العربية</span>
          </div>
          <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ja" data-flag="../bandeira-japao.webp">
            <img src="../bandeira-japao.webp" class="w-5 h-4 rounded-sm" alt="JA" width="20" height="16" loading="lazy"><span>اليابانية</span>
          </div>
        </div>
      </div>
    </div>
    <main id="main-content" class="flex-grow p-4 sm:p-8">
      <div class="main-content-wrapper max-w-4xl mx-auto px-4 py-8">
        <nav class="breadcrumb" aria-label="breadcrumb">
          <ol>
            <li><a href="index.html">البداية</a></li>
            <li><a href="#">حاسبات</a></li>
            <li>مقياس SOFA</li>
          </ol>
        </nav>

        <div class="flex flex-col items-center justify-center gap-4 mb-3 text-center">
          <h1 id="main-title" class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl">
            مقياس SOFA
          </h1>
        </div>
        <div class="title-bar w-full h-1 bg-dark-blue mx-auto mb-6"></div>

        <h2 id="main-subtitle" class="font-inter font-semibold text-light-blue text-xl lg:text-2xl mb-3 text-center">
          تقييم فشل الأعضاء المتسلسل
        </h2>
        <p id="description-text" class="text-gray-700 mb-6 text-right">
          يشير مصطلح "مقياس SOFA" إلى درجة تقييم فشل الأعضاء المتسلسل، وهي أداة
          حاسمة تستخدم لتقييم خلل الأعضاء لدى المرضى الحرجين، خاصة أولئك الذين
          يعانون من إنتان الدم. يقيّم هذا المقياس شدة الخلل في ستة أنظمة عضوية
          رئيسية: الجهاز التنفسي، والقلب والأوعية الدموية، والكبد، والكلى،
          والجهاز العصبي، والدم. يحصل كل نظام على درجة تتراوح من ٠ إلى ٤، حيث
          تشير الدرجات الأعلى إلى خلل أكبر. يمكن أن يتراوح إجمالي درجة SOFA من ٠
          إلى ٢٤. تشير درجة SOFA الأعلى إلى شدة أكبر للمرض، وبالتالي، زيادة خطر
          الوفاة. غالبًا ما يتم استخدام SOFA في وحدات العناية المركزة (ICU)
          لمراقبة تطور خلل الأعضاء، والمساعدة في اتخاذ القرارات السريرية، وتقييم
          الاستجابة للعلاج لدى المرضى الحرجين.
        </p>
        <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
          <strong>سنة الإنشاء:</strong> ١٩٩٤
        </p>
        <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
          <strong>المؤلفون:</strong> خبراء من الجمعية الأوروبية لطب العناية
          المركزة.
        </p>
        <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
          <strong>المجال المستخدم:</strong> وحدات العناية المركزة (ICU).
        </p>
        <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
          <strong>المعايير المقيمة:</strong> الجهاز التنفسي، التخثر، الكبد،
          القلب والأوعية الدموية، الجهاز العصبي المركزي (CNS)، والكلى.
        </p>
        <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
          <strong>من يستخدمه؟:</strong> أطباء وممرضو العناية المركزة.
        </p>
        <p class="font-inter font-normal text-light-blue text-base lg:text-lg mb-6 text-right">
          حدد النتيجة لكل من المعايير أدناه:
        </p>

        <div id="conteudo" class="sofa-criteria-container"></div>

        <div id="resultado" class="resultado hidden" aria-live="polite"></div>

        <div class="flex flex-wrap justify-start gap-4 mt-6">
          <button id="btnCalcular" class="btn-primary" aria-label="احسب درجة SOFA">
            احسب
          </button>
          <button id="btnLimpar" class="btn-primary" aria-label="مسح الحقول">
            مسح
          </button>
          <button id="btnGerarPDF" class="btn-secondary" aria-label="تصدير PDF">
            تصدير PDF
          </button>
          <button id="btnNandaNicNoc" class="btn-primary" aria-label="بحث NANDA, NIC, NOC">
            NANDA, NIC, NOC
          </button>
        </div>

        <div class="ref font-inter text-gray-custom text-right mt-8 border-t pt-4">
          <strong>المراجع:</strong>
          <p class="mt-2" dir="ltr">
            Vincent, J. L., Moreno, R., Takala, J., Willatts, S., De Mendonça,
            A., Bruining, H., ... &amp; Thijs, L. G. (1996).
            <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC2703722/" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">
              The SOFA (Sepsis-related Organ Failure Assessment) score to
              describe organ dysfunction/failure.
            </a>
            On behalf of the Working Group on Sepsis-Related Problems of the
            European Society of Intensive Care Medicine. Intensive Care
            Medicine, 22(7), 707-710.
          </p>
        </div>
      </div>
    </main>

    <div id="footer-placeholder"></div>
    <script>
      fetch("footer.html") // ١. جلب الملف
        .then((response) => response.text()) // ٢. تحويل الاستجابة إلى نص (HTML)
        .then((data) => {
          // ٣. إدراج HTML داخل العنصر النائب
          document.getElementById("footer-placeholder").innerHTML = data;
        });
    </script>

    <script src="../global-scripts.js" defer=""></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const resultadoDiv = document.getElementById("resultado");
        const btnCalcular = document.getElementById("btnCalcular");
        const btnLimpar = document.getElementById("btnLimpar");
        const btnGerarPDF = document.getElementById("btnGerarPDF");
        const btnNandaNicNoc = document.getElementById("btnNandaNicNoc");
        const conteudoDiv = document.getElementById("conteudo");

        // تحويل الأرقام الغربية إلى عربية شرقية للنص
        function toArabicNumerals(numStr) {
          return numStr
            .toString()
            .replace(/0/g, "٠")
            .replace(/1/g, "١")
            .replace(/2/g, "٢")
            .replace(/3/g, "٣")
            .replace(/4/g, "٤")
            .replace(/5/g, "٥")
            .replace(/6/g, "٦")
            .replace(/7/g, "٧")
            .replace(/8/g, "٨")
            .replace(/9/g, "٩");
        }

        // بيانات SOFA مع ترجمة الأرقام
        const sofaData = [
          {
            category: "الجهاز التنفسي (PaO₂/FiO₂)",
            nameAttr: "respiratorio",
            explanation: "قيّم نسبة PaO₂/FiO₂ للمريض. PaO₂ بـ مم زئبق.",
            options: [
              { description: "> ٤٠٠ مم زئبق", score: 0 },
              { description: "< ٤٠٠ مم زئبق", score: 1 },
              { description: "< ٣٠٠ مم زئبق", score: 2 },
              { description: "< ٢٠٠ مم زئبق مع دعم تنفسي", score: 3 },
              { description: "< ١٠٠ مم زئبق مع دعم تنفسي", score: 4 },
            ],
          },
          {
            category: "التخثر (الصفائح الدموية)",
            nameAttr: "coagulacao",
            explanation: "قيّم عدد الصفائح الدموية للمريض (x١٠³ /ميكرولتر).",
            options: [
              { description: "≥ ١٥٠ x ١٠³", score: 0 },
              { description: "< ١٥٠ x ١٠³", score: 1 },
              { description: "< ١٠٠ x ١٠³", score: 2 },
              { description: "< ٥٠ x ١٠³", score: 3 },
              { description: "< ٢٠ x ١٠³", score: 4 },
            ],
          },
          {
            category: "الكبد (البيليروبين)",
            nameAttr: "hepatico",
            explanation: "قيّم مستوى البيليروبين لدى المريض (ملغ/ديسيلتر).",
            options: [
              { description: "< ١.٢ ملغ/ديسيلتر", score: 0 },
              { description: "١.٢-١.٩ ملغ/ديسيلتر", score: 1 },
              { description: "٢-٥.٩ ملغ/ديسيلتر", score: 2 },
              { description: "٦-١١.٩ ملغ/ديسيلتر", score: 3 },
              { description: "> ١٢ ملغ/ديسيلتر", score: 4 },
            ],
          },
          {
            category: "القلب والأوعية الدموية (MAP والأدوية الفعالة وعائيًا)",
            nameAttr: "cardiovascular",
            explanation:
              "قيّم متوسط ضغط الشرايين (MAP) أو استخدام الأدوية الفعالة وعائيًا.",
            options: [
              { description: "MAP ≥ ٧٠ مم زئبق", score: 0 },
              { description: "MAP < ٧٠ مم زئبق", score: 1 },
              {
                description:
                  "دوبامين < ٥ ميكروغرام/كغم/دقيقة أو أي جرعة من دوبوتامين",
                score: 2,
              },
              {
                description:
                  "دوبامين ٥.١-١٥ ميكروغرام/كغم/دقيقة أو إبينفرين ≤ ٠.١ ميكروغرام/كغم/دقيقة أو نورإبينفرين ≤ ٠.١ ميكروغرام/كغم/دقيقة",
                score: 3,
              },
              {
                description:
                  "دوبامين > ١٥ ميكروغرام/كغم/دقيقة أو إبينفرين > ٠.١ ميكروغرام/كغم/دقيقة أو نورإبينفرين > ٠.١ ميكروغرام/كغم/دقيقة",
                score: 4,
              },
            ],
          },
          {
            category: "الجهاز العصبي المركزي (غلاسكو)",
            nameAttr: "snc",
            explanation: "قيّم مقياس غلاسكو للغيبوبة (GCS) للمريض.",
            options: [
              { description: "GCS ١٥", score: 0 },
              { description: "GCS ١٣-١٤", score: 1 },
              { description: "GCS ١٠-١٢", score: 2 },
              { description: "GCS ٦-٩", score: 3 },
              { description: "GCS < ٦", score: 4 },
            ],
          },
          {
            category: "الكلى (الكرياتينين/كمية البول)",
            nameAttr: "renal",
            explanation:
              "قيّم كرياتينين المصل (ملغ/ديسيلتر) أو كمية البول (مل/٢٤ ساعة).",
            options: [
              { description: "كرياتينين المصل < ١.٢ ملغ/ديسيلتر", score: 0 },
              { description: "كرياتينين المصل ١.٢-١.٩ ملغ/ديسيلتر", score: 1 },
              { description: "كرياتينين المصل ٢-٣.٤ ملغ/ديسيلتر", score: 2 },
              {
                description:
                  "كرياتينين المصل ٣.٥-٤.٩ ملغ/ديسيلتر أو كمية البول < ٥٠٠ مل/٢٤ ساعة",
                score: 3,
              },
              {
                description:
                  "كرياتينين المصل > ٥ ملغ/ديسيلتر أو كمية البول < ٢٠٠ مل/٢٤ ساعة",
                score: 4,
              },
            ],
          },
        ];

        // --- وظائف حاسبة SOFA ---
        function updateScoreDisplay(criterionId) {
          const selectElement = document.getElementById(criterionId);
          const scoreDisplayElement = document.getElementById(
            `${criterionId}_score_display`,
          );
          if (selectElement && scoreDisplayElement) {
            scoreDisplayElement.innerText =
              selectElement.value === ""
                ? "٠"
                : toArabicNumerals(selectElement.value);
          }
        }

        function calcularPontuacao() {
          let totalSOFAScore = 0;
          let allItemsSelected = true;

          sofaData.forEach((item) => {
            const selectElement = document.getElementById(item.nameAttr);
            if (selectElement.value === "") {
              allItemsSelected = false;
            } else {
              totalSOFAScore += parseInt(selectElement.value, 10);
            }
          });

          resultadoDiv.style.display = "block";
          if (!allItemsSelected) {
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">يرجى تحديد خيار لكل معيار</strong> قبل الحساب.';
            resultadoDiv.className =
              "resultado bg-info-orange-light text-right";
            delete resultadoDiv.dataset.score;
            return;
          }

          let interpretacao = "";
          let conduta = "";
          let resultadoClasse = "";
          let displayScore = toArabicNumerals(totalSOFAScore.toString());

          if (totalSOFAScore >= 0 && totalSOFAScore <= 4) {
            interpretacao = "خلل عضوي منخفض. التكهن جيد بشكل عام.";
            resultadoClasse = "bg-sofa-low";
            conduta =
              "الحفاظ على المراقبة السريرية. إعادة التقييم حسب تطور حالة المريض.";
          } else if (totalSOFAScore >= 5 && totalSOFAScore <= 9) {
            interpretacao = "خلل عضوي متوسط. زيادة خطر الوفاة.";
            resultadoClasse = "bg-sofa-medium";
            conduta =
              "تقييم وإدارة مكثفة. النظر في التحقيق في إنتان الدم وأسباب أخرى للخلل.";
          } else {
            // totalSOFAScore >= 10
            interpretacao = "خلل عضوي شديد. خطر وفاة مرتفع.";
            resultadoClasse = "bg-sofa-high";
            conduta =
              "إدارة عدوانية للخلل العضوي. دعم حياة متقدم وبحث نشط عن أسباب قابلة للعكس.";
          }

          resultadoDiv.innerHTML = `<p>إجمالي نقاط SOFA: <strong class="font-bold">${displayScore}</strong></p><p>التفسير: <strong class="font-bold">${interpretacao}</strong></p><p>الإجراء المقترح: <strong class="font-bold">${conduta}</strong></p>`;
          resultadoDiv.className = `resultado ${resultadoClasse} text-right`;

          resultadoDiv.dataset.score = totalSOFAScore;
          resultadoDiv.dataset.interpretacao = interpretacao;
          resultadoDiv.dataset.conduta = conduta;
          resultadoDiv.dataset.scaleName = "مقياس SOFA";
        }

        function limparCampos() {
          sofaData.forEach((item) => {
            const selectElement = document.getElementById(item.nameAttr);
            selectElement.selectedIndex = 0;
            document.getElementById(
              `${item.nameAttr}_score_display`,
            ).innerText = "٠";
          });
          resultadoDiv.innerHTML = "";
          resultadoDiv.className = "resultado hidden";
          delete resultadoDiv.dataset.score;
          delete resultadoDiv.dataset.interpretacao;
          delete resultadoDiv.dataset.conduta;
          delete resultadoDiv.dataset.scaleName;
        }

        // يملأ النموذج ديناميكيًا
        sofaData.forEach((item, index) => {
          const sectionDiv = document.createElement("div");
          sectionDiv.className = "sofa-criterion-card";

          const headerDiv = document.createElement("div");
          headerDiv.className = "sofa-criterion-header";

          const titleH3 = document.createElement("h3");
          titleH3.className = "sofa-criterion-title";
          titleH3.innerText = `${item.category}`;
          headerDiv.appendChild(titleH3);

          const scoreSpan = document.createElement("span");
          scoreSpan.className = "sofa-score-display";
          scoreSpan.id = `${item.nameAttr}_score_display`;
          scoreSpan.innerText = "٠";
          headerDiv.appendChild(scoreSpan);

          sectionDiv.appendChild(headerDiv);

          const optionsDiv = document.createElement("div");
          optionsDiv.className = "sofa-criterion-options";

          const selectElement = document.createElement("select");
          selectElement.id = item.nameAttr;
          selectElement.className = "sofa-select";
          selectElement.onchange = () => updateScoreDisplay(item.nameAttr);

          const defaultOption = document.createElement("option");
          defaultOption.value = "";
          defaultOption.text = "اختر...";
          defaultOption.disabled = true;
          defaultOption.selected = true;
          selectElement.appendChild(defaultOption);

          item.options.forEach((option) => {
            const optionElement = document.createElement("option");
            optionElement.value = option.score;
            let scoreDisplay = toArabicNumerals(option.score.toString());
            // Substitui números nos campos de descrição
            let descriptionDisplay = option.description.replace(
              /(\d+(\.\d+)?)/g,
              (match) => toArabicNumerals(match),
            );

            optionElement.text = `${descriptionDisplay} (${scoreDisplay})`;
            selectElement.appendChild(optionElement);
          });

          optionsDiv.appendChild(selectElement);
          sectionDiv.appendChild(optionsDiv);

          const explanationP = document.createElement("p");
          explanationP.className = "text-gray-600 text-sm mt-2 text-right"; // RTL
          explanationP.innerText = item.explanation;
          sectionDiv.appendChild(explanationP);

          conteudoDiv.appendChild(sectionDiv);
        });

        // يضيف مستمعي الأحداث إلى الأزرار
        btnCalcular?.addEventListener("click", calcularPontuacao);
        btnLimpar?.addEventListener("click", limparCampos);

        btnGerarPDF?.addEventListener("click", () => {
          if (!resultadoDiv.dataset.score) {
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">يرجى النقر فوق "احسب" أولاً</strong> لإنشاء ملف PDF.';
            resultadoDiv.className =
              "resultado bg-info-orange-light text-right";
            resultadoDiv.style.display = "block";
            return;
          }
          if (typeof gerarPDFGlobal === "function") {
            gerarPDFGlobal({
              titulo: "مقياس SOFA",
              subtitulo: "تقرير تقييم فشل الأعضاء",
              nomeArquivo: "relatorio_escala_sofa.pdf",
              seletorConteudo: ".main-content-wrapper",
            });
          } else {
            console.error("الوظيفة gerarPDFGlobal غير معرفة.");
          }
        });

        btnNandaNicNoc?.addEventListener("click", () => {
          const score = resultadoDiv.dataset.score;
          const scaleName = resultadoDiv.dataset.scaleName;
          const conduta = resultadoDiv.dataset.conduta;
          if (!score || !conduta) {
            resultadoDiv.innerHTML =
              '⚠️ <strong class="font-bold">احسب النتيجة أولاً</strong> للبحث عن الإجراء.';
            resultadoDiv.className =
              "resultado bg-info-orange-light text-right";
            resultadoDiv.style.display = "block";
            return;
          }
          const searchQuery = encodeURIComponent(
            `${scaleName} نتيجة ${score} الإجراء ${conduta} إنشاء تصنيف NANDA, إنشاء تصنيف NIC وإنشاء تصنيف NOC`,
          );
          window.open(
            `https://www.google.com/search?q=${searchQuery}`,
            "_blank",
          );
        });
      });
    </script>

    <script src="../lang-selector.js" defer=""></script>
  

