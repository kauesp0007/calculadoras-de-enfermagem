<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Ajustado para carregar o menu da pasta 'ar/' -->
    <link rel="preload" href="menu-global.html" as="fetch" crossorigin>
    <link rel="preload" href="global-body-elements.html" as="fetch" crossorigin>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Título e SEO Otimizado para Árabe -->
    <title>مقياس أباتشي ٢ (APACHE II) - تقييم شدة المرض - حاسبات التمريض</title>
    <meta name="google-adsense-account" content="ca-pub-6472730056006847">
    
    <!-- Metatags e SEO -->
    <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/ar/apache.html" />
<link rel="alternate" hreflang="pt-br" href="https://www.calculadorasdeenfermagem.com.br/ar/apache.html" />
<link rel="alternate" hreflang="en" href="https://www.calculadorasdeenfermagem.com.br/en/ar/apache.html" />
<link rel="alternate" hreflang="es" href="https://www.calculadorasdeenfermagem.com.br/es/ar/apache.html" />
<link rel="alternate" hreflang="fr" href="https://www.calculadorasdeenfermagem.com.br/fr/ar/apache.html" />
<link rel="alternate" hreflang="de" href="https://www.calculadorasdeenfermagem.com.br/de/ar/apache.html" />
<link rel="alternate" hreflang="it" href="https://www.calculadorasdeenfermagem.com.br/it/ar/apache.html" />
<link rel="alternate" hreflang="ja" href="https://www.calculadorasdeenfermagem.com.br/ja/ar/apache.html" />
<link rel="alternate" hreflang="zh" href="https://www.calculadorasdeenfermagem.com.br/zh/ar/apache.html" />
<link rel="alternate" hreflang="hi" href="https://www.calculadorasdeenfermagem.com.br/hi/ar/apache.html" />
<link rel="alternate" hreflang="ar" href="https://www.calculadorasdeenfermagem.com.br/ar/ar/apache.html" />
<link rel="alternate" hreflang="ru" href="https://www.calculadorasdeenfermagem.com.br/ru/ar/apache.html" />
<link rel="alternate" hreflang="tr" href="https://www.calculadorasdeenfermagem.com.br/tr/ar/apache.html" />
<link rel="alternate" hreflang="ko" href="https://www.calculadorasdeenfermagem.com.br/ko/ar/apache.html" />
<link rel="alternate" hreflang="nl" href="https://www.calculadorasdeenfermagem.com.br/nl/ar/apache.html" />
<link rel="alternate" hreflang="pl" href="https://www.calculadorasdeenfermagem.com.br/pl/ar/apache.html" />
<link rel="alternate" hreflang="sv" href="https://www.calculadorasdeenfermagem.com.br/sv/ar/apache.html" />
<link rel="alternate" hreflang="id" href="https://www.calculadorasdeenfermagem.com.br/id/ar/apache.html" />
<link rel="alternate" hreflang="vi" href="https://www.calculadorasdeenfermagem.com.br/vi/ar/apache.html" />
<link rel="alternate" hreflang="uk" href="https://www.calculadorasdeenfermagem.com.br/uk/ar/apache.html" />
<link rel="alternate" hreflang="x-default" href="https://www.calculadorasdeenfermagem.com.br/ar/apache.html" />

    <!-- Caminho do favicon ajustado -->
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    
    <!-- Descrição e Palavras-chave traduzidas para o árabe -->
    <meta name="description" content="احسب درجة مقياس أباتشي ٢ (APACHE II) لتقييم شدة المرض والتنبؤ بمعدل الوفيات في مرضى وحدة العناية المركزة." />
    <meta name="keywords" content="أباتشي ٢, APACHE II, تقييم الفسيولوجيا الحادة والصحة المزمنة, وحدة العناية المركزة, شدة المرض, معدل الوفيات, التنبؤ, التمريض, الطب الحرج, مقياس المخاطر" />
    
    <!-- Open Graph (og:) tags traduzidos -->
    <meta property="og:title" content="مقياس أباتشي ٢ (APACHE II) - تقييم شدة المرض - حاسبات التمريض" />
    <meta property="og:description" content="احسب درجة مقياس أباتشي ٢ (APACHE II) لتقييم شدة المرض والتنبؤ بمعدل الوفيات في مرضى وحدة العناية المركزة." />
    <meta property="og:url" content="https://www.calculadorasdeenfermagem.com.br/ar/apache.html" />
    <meta property="og:image" content="https://www.calculadorasdeenfermagem.com.br/iconpages.webp" />
    
    <!-- Twitter card tags traduzidos -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="مقياس أباتشي ٢ (APACHE II) - تقييم شدة المرض - حاسبات التمريض" />
    <meta name="twitter:description" content="احسب درجة مقياس أباتشي ٢ (APACHE II) لتقييم شدة المرض والتنبؤ بمعدل الوفيات في مرضى وحدة العناية المركزة." />
    <meta name="twitter:image" content="https://www.calculadorasdeenfermagem.com.br/assets/iconpages.webp" />

    <!-- Scripts e Estilos Globais -->
    <link href="/public/output.css" rel="stylesheet">
    <script async src="https://kit.fontawesome.com/083bed182a.js" crossorigin="anonymous"></script>
    <!-- Caminho dos estilos globais ajustado -->
    <link rel="stylesheet" href="../global-styles.css" media="print" onload="this.media='all'">

    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Adicionando fontes árabes (Cairo) -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Inter:wght@400;700&family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/open-dyslexic-regular.min.css"></noscript>

    <!-- Google Analytics & Consent Mode -->
    <script src="https://www.googletagmanager.com/gtag/js?id=AW-952633102"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('consent', 'default', {
            'analytics_storage': 'denied',
            'ad_storage': 'denied',
            'wait_for_update': 500
        });
        gtag('config', 'AW-952633102');
        gtag('config', 'G-8FLJ59XXDK');
    </script>

    <!-- Schema.org Structured Data (traduzido) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MedicalEntity",
      "name": "مقياس أباتشي ٢ (APACHE II) - تقييم شدة المرض",
      "url": "https://www.calculadorasdeenfermagem.com.br/ar/apache.html",
      "description": "حاسبة عبر الإنترنت لدرجة APACHE II لتقييم شدة المرض والتنبؤ بمعدل الوفيات في مرضى وحدة العناية المركزة.",
      "alternateName": ["Acute Physiology and Chronic Health Evaluation II", "تقييم الفسيولوجيا الحادة والصحة المزمنة ٢"]
    }
    </script>

    <!-- Estilos Específicos da Página -->
    <style>
        /* Aplicando a fonte Cairo para o árabe */
        body, h1, h2, h3, p, span, div, button, label, summary, strong, input, form {
            font-family: 'Cairo', 'Inter', sans-serif;
        }
        .font-nunito { font-family: 'Nunito Sans', 'Cairo', sans-serif; }
        .font-inter { font-family: 'Inter', 'Cairo', sans-serif; }

        .resultado.bg-apache-low { background-color: #D4EDDA; color: #006400; }
        .resultado.bg-apache-medium { background-color: #FFF3CD; color: #856404; }
        .resultado.bg-apache-high { background-color: #F8D7DA; color: #8B0000; }
        .bg-info-orange-light { background-color: #ffeeba; color: #856404; }

        .modal-option-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .modal-option-label:hover {
            background-color: #f1f5f9;
        }

        .modal-option-label input[type="radio"] {
            accent-color: #1A3E74;
            width: 1.1rem;
            height: 1.1rem;
            margin-left: 0.5rem; /* Adiciona margem para RTL */
        }

        /* Ajustes RTL para o modal */
        html[dir="rtl"] #selection-modal {
            text-align: right;
        }
        html[dir="rtl"] .modal-option-label {
            gap: 0.75rem;
        }
    </style>
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    </head>
<body class="bg-gray-50 text-gray-800 font-inter">

    <div class="w-full flex justify-center py-2 bg-gray-100" aria-label="مساحة إعلانية علوية" style="min-height: 90px;"> 
        <script type="text/javascript">
            atOptions = {
                'key' : '1e009bba81deb2bc366b3c4ac030f6be',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        
    </div>
    
    <!-- Skip Links (traduzido) -->
    <nav aria-label="روابط سريعة للوصول" class="sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-50 focus-within:bg-white focus-within:text-blue-700 focus-within:p-4 focus-within:underline">
        <a href="../index.html" accesskey="I" class="block mb-2">الانتقال إلى البداية [Alt + Shift + I]</a>
        <a href="#main-content" accesskey="C" class="block mb-2">الانتقال إلى المحتوى الرئيسي [Alt + Shift + C]</a>
        <a href="#barraAcessibilidade" accesskey="A" class="block mb-2">تفعيل شريط الوصول [Alt + Shift + A]</a>
        <a href="#backToTopBtn" accesskey="T" class="block">العودة إلى أعلى الصفحة [Alt + Shift + T]</a>
    </nav>

    <div id="statusMessage" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    
    <!-- Container para o Menu Global (chamado da pasta 'ar/') -->
    <div id="global-header-container"></div>
<!-- Wrapper do seletor de idioma ajustado para RTL -->
<div id="language-dropdown-wrapper" class="flex justify-start w-full" style="position:relative; z-index:100; padding-left:2rem;">
  <div class="relative inline-block text-left z-50">
    <button id="langButton" class="flex items-center space-x-2 border px-3 py-1 rounded-lg shadow bg-gray-100">
      <!-- Caminhos das bandeiras ajustados -->
      <img id="langFlag" width="20" height="16" src="../bandeira-arabia.webp" alt="AR" class="w-5 h-4 rounded-sm">
      <span id="langText" class="text-gray-700 font-medium">العربية</span>
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>

    <div id="langMenu" class="hidden absolute left-0 mt-2 w-44 bg-white border rounded-lg shadow-lg">
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="pt" data-flag="../bandeira-brasil.webp">
    <img src="../bandeira-brasil.webp" class="w-5 h-4 rounded-sm" alt="PT" width="20" height="16"><span>Português</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="en" data-flag="../bandeira-eua.webp">
    <img src="../bandeira-eua.webp" class="w-5 h-4 rounded-sm" alt="EN" width="20" height="16"><span>English</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="es" data-flag="../bandeira-espanha.webp">
    <img src="../bandeira-espanha.webp" class="w-5 h-4 rounded-sm" alt="ES" width="20" height="16"><span>Español</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="de" data-flag="../bandeira-alemanha.webp">
    <img src="../bandeira-alemanha.webp" class="w-5 h-4 rounded-sm" alt="DE" width="20" height="16"><span>Deutsch</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="it" data-flag="../bandeira-italia.webp">
    <img src="../bandeira-italia.webp" class="w-5 h-4 rounded-sm" alt="IT" width="20" height="16"><span>Italiano</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="fr" data-flag="../bandeira-franca.webp">
    <img src="../bandeira-franca.webp" class="w-5 h-4 rounded-sm" alt="FR" width="20" height="16"><span>Français</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="hi" data-flag="../bandeira-india.webp">
    <img src="../bandeira-india.webp" class="w-5 h-4 rounded-sm" alt="HI" width="20" height="16"><span>हिन्दी</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="zh" data-flag="../bandeira-china.webp">
    <img src="../bandeira-china.webp" class="w-5 h-4 rounded-sm" alt="ZH" width="20" height="16"><span>中文</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ar" data-flag="../bandeira-arabia.webp">
    <img src="../bandeira-arabia.webp" class="w-5 h-4 rounded-sm" alt="AR" width="20" height="16"><span>العربية</span>
  </div>
  <div class="flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer space-x-2" data-value="ja" data-flag="../bandeira-japao.webp">
    <img src="../bandeira-japao.webp" class="w-5 h-4 rounded-sm" alt="JA" width="20" height="16"><span>日本語</span>
  </div>
</div>
  </div>
</div><div class="main-container-with-sidebar"></div>

    <main id="main-content" class="flex-grow p-4 md:p-8">
        <div class="main-content-wrapper max-w-4xl mx-auto">
            <!-- Breadcrumb (traduzido) -->
            <nav class="breadcrumb" aria-label="المسار">
                <ol>
                    <li><a href="../index.html">البداية</a></li>
                    <li><a href="#">الحاسبات</a></li>
                    <li>مقياس أباتشي ٢</li>
                </ol>
            </nav>

            <!-- Títulos (traduzidos) -->
            <div class="text-center mb-8">
                <h1 id="main-title" class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl">
                    مقياس أباتشي ٢ (APACHE II)
                </h1>
                <div class="title-bar mx-auto mt-2"></div>
                <h2 id="main-subtitle" class="font-inter font-semibold text-light-blue text-xl lg:text-2xl mt-4">
                    تقييم الفسيولوجيا الحادة والصحة المزمنة
                </h2>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md">
                <!-- Textos (traduzidos e alinhados para RTL) -->
                <p class="font-inter text-black-custom text-base lg:text-lg mb-6 text-center sm:text-right">
                    مقياس أباتشي ٢ (APACHE II) هو نظام نقاط يُستخدم لتقييم شدة المرض لدى المرضى ذوي الحالات الحرجة، خاصة أولئك المقبولين في وحدات العناية المركزة (ICUs). يجمع بين البيانات الفسيولوجية الحادة، والعمر، وتاريخ الصحة المزمنة لتقديم تقدير لخطر الوفاة في المستشفى. يُطبق المقياس خلال الـ ٢٤ ساعة الأولى من قبول المريض.
                </p>
                <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
                    <strong>سنة الإنشاء:</strong> ١٩٨٥
                </p>
                <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
                    <strong>المؤلفون:</strong> Knaus WA, Draper EA, Wagner DP, Zimmerman JE
                </p>
                <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
                    <strong>المجال المستخدم:</strong> وحدة العناية المركزة (ICU)
                </p>
                <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
                    <strong>المعايير المقيمة:</strong> ١٢ متغيرًا فسيولوجيًا، العمر، والحالات الصحية المزمنة
                </p>
                <p class="font-inter text-black-custom text-base lg:text-lg text-center sm:text-right">
                    <strong>من يستخدمه؟:</strong> أطباء وممرضو العناية المركزة
                </p>
                <p class="font-inter font-normal text-light-blue text-base lg:text-lg mb-6 text-center sm:text-right">
                    انقر على كل معيار لاختيار الخيار المناسب:
                </p>

                <div id="conteudo" role="form" aria-labelledby="main-title" class="space-y-3">
                    <!-- Conteúdo gerado pelo JS -->
                </div>
                
                <!-- Resultado (alinhado para RTL) -->
                <div id="resultado" class="resultado hidden mt-6 p-4 rounded-md font-medium text-right" aria-live="polite"></div>

                <!-- Botões (traduzidos) -->
                <div class="flex flex-wrap justify-start gap-4 mt-6">
                    <button id="btnCalcular" class="btn-primary">احسب</button>
                    <button id="btnLimpar" class="btn-primary">مسح</button>
                    <button id="btnGerarPDF" class="btn-secondary">إنشاء PDF</button>
                    <button id="btnNandaNicNoc" class="btn-primary">NANDA, NIC, NOC</button>
                </div>

                <!-- Referência (substituída e alinhada para RTL) -->
                <div class="ref font-inter text-gray-custom text-right mt-8 border-t pt-4">
                    <strong>مرجع ببليوغرافي:</strong>
                    <ul class="list-disc list-inside space-y-1 mt-2">
                        <li>Knaus WA, Draper EA, Wagner DP, Zimmerman JE. APACHE II: a severity of disease classification system. Crit Care Med. 1985 Oct;13(10):818-29.
                            <a href="https://pubmed.ncbi.nlm.nih.gov/3928249/" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">
                                الوصول إلى الوثيقة (PubMed)
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal (traduzido) -->
    <div id="selection-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg max-h-full overflow-y-auto">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="modal-title" class="text-xl font-bold text-dark-blue">اختر الخيار</h3>
                <button id="modal-close-btn" class="text-gray-500 hover:text-gray-800">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div id="modal-content" class="p-4 space-y-2">
                <!-- Conteúdo do modal gerado pelo JS -->
            </div>
        </div>
    </div>

<!-- Seção Newsletter (traduzida) -->
<form id="newsletters-section" action="https://formspree.io/f/movlvvzp" method="POST" role="form" aria-label="الاشتراك في النشرة الإخبارية">
    <h2 class="newsletter-heading">اشترك في نشرتنا الإخبارية</h2>
    <p class="newsletter-description">احصل على آخر الأخبار والمقالات والتحديثات مباشرة في بريدك الوارد!</p>
    <div class="newsletter-form-container">
        <label for="email">البريد الإلكتروني</label>
        <input type="email" id="email" name="email" placeholder="بريدك الإلكتروني" class="newsletter-email-input" aria-label="البريد الإلكتروني" required aria-describedby="erro-email ajuda-email">
        <div id="ajuda-email" class="sr-only">أدخل عنوان بريد إلكتروني صالحًا لتلقي التحديثات.</div>

        <div class="newsletter-consent-checkbox-group">
            <input type="checkbox" id="newsletterConsent" name="consent" class="newsletter-consent-checkbox" required>
            <label for="newsletterConsent" class="newsletter-consent-label">أوافق على تلقي المعلومات والتحديثات.</label>
        </div>

        <button type="submit" id="subscribeNewsletterBtn" class="newsletter-subscribe-button" aria-label="الاشتراك في النشرة الإخبارية" disabled>اشتراك</button>
    </div>
    <span id="erro-email" class="newsletter-error-message" aria-live="assertive"></span>
</form>
    
    <!-- Rodapé (chamado da pasta 'ar/') -->
    <div id="footer-placeholder"></div>

    <!-- Caminho do script global ajustado -->
    <script src="../global-scripts.js" defer></script> 
    
    <!-- Script Específico da Página (Tradução e numeração árabe) -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // Função para converter números ocidentais para orientais (árabes)
        function toArabicNumeral(n) {
            if (n === null || typeof n === 'undefined') return '';
            const arabic = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩', '٪', '>', '<', '.', '(', ')', '-', '+', '≥', '≤', '°', 'م', 'ل', 'ج', 'د', 'س', 'ش', 'ص', 'ض', 'ط', 'ظ', 'ع', 'غ', 'ف', 'ق', 'ك', 'هـ', 'و', 'ي', 'أ', 'إ', 'آ', 'ء', 'ؤ', 'ئ', 'ى', 'ة', ' '];
            const western = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '%', '>', '<', '.', '(', ')', '-', '+', '≥', '≤', '°', 'm', 'L', 'g', 'd', 's', 'sh', 's', 'd', 't', 'z', 'a', 'gh', 'f', 'q', 'k', 'h', 'w', 'y', 'A', 'I', 'A', '', 'O', 'Y', 'a', 'T', ' '];
            
            // Tratamento especial para números com decimais ou símbolos
            let str = String(n);
            
            // Substitui símbolos comuns primeiro
            str = str.replace(/°C/g, '°س')
                     .replace(/mmHg/g, ' مم زئبق')
                     .replace(/bpm/g, ' ن/د') // نبضة في الدقيقة
                     .replace(/rpm/g, ' ن/د') // نفس في الدقيقة
                     .replace(/mmol\/L/g, ' مليمول/لتر')
                     .replace(/mg\/dL/g, ' ملغ/ديسيلتر')
                     .replace(/%/g, '٪')
                     .replace(/≥/g, '≥')
                     .replace(/≤/g, '≤')
                     .replace(/>/g, '>')
                     .replace(/</g, '<')
                     .replace(/\./g, '٫'); // Vírgula árabe

            // Substitui os dígitos
            return str.split('').map(char => {
                const index = western.indexOf(char);
                return index !== -1 ? arabic[index] : (/\d/.test(char) ? arabic[parseInt(char)] : char);
            }).join('');
        }
        
        // Função para determinar a palavra correta para "ponto(s)" em árabe
        function scoreText(score) {
            if (score === 0) return 'نقطة';
            if (score === 1) return 'نقطة';
            if (score === 2) return 'نقطتان';
            if (score >= 3 && score <= 10) return 'نقاط';
            return 'نقطة'; // Padrão
        }

        // Elementos da página
        const resultadoDiv = document.getElementById('resultado');
        const conteudoDiv = document.getElementById('conteudo');
        const btnCalcular = document.getElementById('btnCalcular');
        const btnLimpar = document.getElementById('btnLimpar');
        const btnGerarPDF = document.getElementById('btnGerarPDF');
        const btnNandaNicNoc = document.getElementById('btnNandaNicNoc');

        // Elementos do Modal
        const modal = document.getElementById('selection-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        // Dados da escala (traduzidos para o árabe)
        const apacheData = [
            { category: "درجة الحرارة الشرجية (درجة مئوية)", nameAttr: "tempRetal", options: [{ description: "> ٤٠٫٩", score: 4 }, { description: "٣٩-٤٠٫٩", score: 3 }, { description: "٣٨٫٥-٣٨٫٩", score: 1 }, { description: "٣٦-٣٨٫٤", score: 0 }, { description: "٣٤-٣٥٫٩", score: 1 }, { description: "٣٢-٣٣٫٩", score: 2 }, { description: "٣٠-٣١٫٩", score: 3 }, { description: "< ٣٠", score: 4 }] },
            { category: "متوسط ضغط الدم الشرياني (مم زئبق)", nameAttr: "pam", options: [{ description: "> ١٥٩", score: 4 }, { description: "١٣٠-١٥٩", score: 3 }, { description: "١١٠-١٢٩", score: 2 }, { description: "٧٠-١٠٩", score: 0 }, { description: "٥٥-٦٩", score: 2 }, { description: "٤٠-٥٤", score: 3 }, { description: "< ٤٠", score: 4 }] },
            { category: "معدل ضربات القلب (ن/د)", nameAttr: "fc", options: [{ description: "> ١٧٩", score: 4 }, { description: "١٤٠-١٧٩", score: 3 }, { description: "١١٠-١٢٩", score: 2 }, { description: "٧٠-١٠٩", score: 0 }, { description: "٥٥-٦٩", score: 2 }, { description: "٤٠-٥٤", score: 3 }, { description: "< ٤٠", score: 4 }] },
            { category: "معدل التنفس (ن/د)", nameAttr: "fr", options: [{ description: "> ٤٩", score: 4 }, { description: "٣٥-٤٩", score: 3 }, { description: "٢٥-٣٤", score: 1 }, { description: "١٢-٢٤", score: 0 }, { description: "١٠-١١", score: 1 }, { description: "٦-٩", score: 2 }, { description: "< ٦", score: 4 }] },
            { category: "الأكسجة (PaO2/FiO2 أو A-aDO2)", nameAttr: "oxigenacao", options: [{ description: "إذا FiO2 ≥ ٠٫٥ (A-aDO2) > ٤٩٩", score: 4 }, { description: "إذا FiO2 ≥ ٠٫٥ (A-aDO2) ٣٥٠-٤٩٩", score: 3 }, { description: "إذا FiO2 ≥ ٠٫٥ (A-aDO2) ٢٠٠-٣٤٩", score: 2 }, { description: "إذا FiO2 ≥ ٠٫٥ (A-aDO2) < ٢٠٠", score: 0 }, { description: "إذا FiO2 < ٠٫٥ (PaO2) > ٧٠", score: 0 }, { description: "إذا FiO2 < ٠٫٥ (PaO2) ٦١-٧٠", score: 1 }, { description: "إذا FiO2 < ٠٫٥ (PaO2) ٥٦-٦٠", score: 3 }, { description: "إذا FiO2 < ٠٫٥ (PaO2) < ٥٦", score: 4 }] },
            { category: "درجة الحموضة الشريانية (pH)", nameAttr: "phArterial", options: [{ description: "> ٧٫٦٩", score: 4 }, { description: "٧٫٦٠-٧٫٦٩", score: 3 }, { description: "٧٫٥٠-٧٫٥٩", score: 1 }, { description: "٧٫٣٣-٧٫٤٩", score: 0 }, { description: "٧٫٢٥-٧٫٣٢", score: 2 }, { description: "٧٫١٥-٧٫٢٤", score: 3 }, { description: "< ٧٫١٥", score: 4 }] },
            { category: "صوديوم البلازما (مليمول/لتر)", nameAttr: "sodioPlasmatico", options: [{ description: "> ١٧٩", score: 4 }, { description: "١٦٠-١٧٩", score: 3 }, { description: "١٥٥-١٥٩", score: 2 }, { description: "١٥٠-١٥٤", score: 1 }, { description: "١٣٠-١٤٩", score: 0 }, { description: "١٢٠-١٢٩", score: 2 }, { description: "١١١-١١٩", score: 3 }, { description: "< ١١١", score: 4 }] },
            { category: "بوتاسيوم البلازما (مليمول/لتر)", nameAttr: "potassioPlasmatico", options: [{ description: "> ٦٫٩", score: 4 }, { description: "٦٫٠-٦٫٩", score: 3 }, { description: "٥٫٥-٥٫٩", score: 1 }, { description: "٣٫٥-٥٫٤", score: 0 }, { description: "٣٫٠-٣٫٤", score: 1 }, { description: "٢٫٥-٢٫٩", score: 2 }, { description: "< ٢٫٥", score: 4 }] },
            { category: "الكرياتينين (ملغ/ديسيلتر)", nameAttr: "creatinina", options: [{ description: "> ٣٫٤", score: 4 }, { description: "٢٫٠-٣٫٤", score: 3 }, { description: "١٫٥-١٫٩", score: 2 }, { description: "٠٫٦-١٫٤", score: 0 }, { description: "< ٠٫٦", score: 2 }] },
            { category: "الهيماتوكريت (٪)", nameAttr: "hematocrito", options: [{ description: "> ٥٩٫٩", score: 4 }, { description: "٥٠-٥٩٫٩", score: 2 }, { description: "٤٦-٤٩٫٩", score: 1 }, { description: "٣٠-٤٥٫٩", score: 0 }, { description: "٢٠-٢٩٫٩", score: 2 }, { description: "< ٢٠", score: 4 }] },
            { category: "خلايا الدم البيضاء (x١٠٠٠)", nameAttr: "globulosBrancos", options: [{ description: "> ٣٩٫٩", score: 4 }, { description: "٢٠-٣٩٫٩", score: 2 }, { description: "١٥-١٩٫٩", score: 1 }, { description: "٣-١٤٫٩", score: 0 }, { description: "١-٢٫٩", score: 2 }, { description: "< ١", score: 4 }] },
            { category: "مقياس غلاسكو للغيبوبة (GCS)", nameAttr: "gcs", options: [{ description: "١٥ (GCS الحالي)", score: 0 }, { description: "١٤ (GCS الحالي)", score: 1 }, { description: "١٣ (GCS الحالي)", score: 2 }, { description: "١٢ (GCS الحالي)", score: 3 }, { description: "١١ (GCS الحالي)", score: 4 }, { description: "١٠ (GCS الحالي)", score: 5 }, { description: "٩ (GCS الحالي)", score: 6 }, { description: "٨ (GCS الحالي)", score: 7 }, { description: "٧ (GCS الحالي)", score: 8 }, { description: "٦ (GCS الحالي)", score: 9 }, { description: "٥ (GCS الحالي)", score: 10 }, { description: "٤ (GCS الحالي)", score: 11 }, { description: "٣ (GCS الحالي)", score: 12 }] },
            { category: "عمر المريض", nameAttr: "idadePaciente", options: [{ description: "< ٤٥ سنة", score: 0 }, { description: "٤٥-٥٤ سنة", score: 2 }, { description: "٥٥-٦٤ سنة", score: 3 }, { description: "٦٥-٧٤ سنة", score: 5 }, { description: "≥ ٧٥ سنة", score: 6 }] },
            { category: "الحالات المزمنة", nameAttr: "condicoesCronicas", options: [{ description: "لا يوجد تاريخ لحالات مزمنة", score: 0 }, { description: "مع تاريخ لحالات مزمنة، إذا تم قبول المريض بعد جراحة اختيارية", score: 2 }, { description: "مع تاريخ لحالات مزمنة، إذا تم قبول المريض لجراحة طارئة أو لسبب آخر", score: 5 }] }
        ];

        // Armazena as seleções do usuário
        let userSelections = {};

        function openModalForCriterion(paramGroup) {
            modalTitle.textContent = paramGroup.category;
            modalContent.innerHTML = ''; // Limpa opções anteriores
            
            paramGroup.options.forEach(option => {
                const label = document.createElement('label');
                label.className = 'modal-option-label';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'modal-option';
                radio.value = option.score;
                
                // Marca a opção previamente selecionada, se houver
                if (userSelections[paramGroup.nameAttr] && userSelections[paramGroup.nameAttr].score === option.score) {
                    radio.checked = true;
                }

                radio.addEventListener('click', () => handleSelection(paramGroup.nameAttr, option.score, option.description));
                
                const descriptionSpan = document.createElement('span');
                // Exibe o numeral árabe e o texto de ponto correto
                descriptionSpan.textContent = `${toArabicNumeral(option.description)} (${toArabicNumeral(option.score)} ${scoreText(option.score)})`;
                
                label.appendChild(radio);
                label.appendChild(descriptionSpan);
                modalContent.appendChild(label);
            });
            
            modal.classList.remove('hidden');
        }

        function handleSelection(nameAttr, score, description) {
            userSelections[nameAttr] = { score: parseInt(score, 10), description: description };
            
            // Atualiza o texto na lista principal
            const listItem = document.querySelector(`[data-name="${nameAttr}"] .selected-value`);
            if (listItem) {
                listItem.textContent = toArabicNumeral(description);
                listItem.classList.remove('text-gray-400');
                listItem.classList.add('text-blue-600', 'font-semibold');
            }
            
            modal.classList.add('hidden');
        }

        function createCriteriaList() {
            conteudoDiv.innerHTML = ''; // Limpa o conteúdo
            apacheData.forEach((paramGroup, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex justify-between items-center p-3 bg-gray-50 border rounded-lg shadow-sm cursor-pointer hover:bg-gray-100';
                itemDiv.dataset.name = paramGroup.nameAttr;
                
                itemDiv.innerHTML = `
                    <span class="font-medium text-gray-700">${toArabicNumeral(index + 1)}. ${paramGroup.category}</span>
                    <span class="selected-value text-gray-400 text-sm text-right">انقر للاختيار</span>
                `;
                
                itemDiv.addEventListener('click', () => openModalForCriterion(paramGroup));
                conteudoDiv.appendChild(itemDiv);
            });
        }
        
        function calcular() {
            let totalScore = 0;
            const totalCriteria = apacheData.length;
            const selectedCriteriaCount = Object.keys(userSelections).length;

            if (selectedCriteriaCount < totalCriteria) {
                resultadoDiv.innerHTML = '⚠️ <strong class="font-bold">يرجى تحديد خيار لكل معيار.</strong>';
                resultadoDiv.className = 'resultado p-4 rounded-md font-medium bg-info-orange-light text-right';
                resultadoDiv.style.display = 'block';
                delete resultadoDiv.dataset.score;
                return;
            }

            for (const key in userSelections) {
                totalScore += userSelections[key].score;
            }

            let interpretacao = '';
            let probabilidadeMorte = '';
            let resultadoClasse = '';

            // Lógica de JS permanece com numerais ocidentais
            if (totalScore <= 9) {
                interpretacao = "خطر منخفض للوفاة في المستشفى.";
                probabilidadeMorte = "حوالي ٥-١٠٪";
                resultadoClasse = 'bg-apache-low';
            } else if (totalScore <= 19) {
                interpretacao = "خطر متوسط للوفاة في المستشفى.";
                probabilidadeMorte = "حوالي ١٠-٣٠٪";
                resultadoClasse = 'bg-apache-medium';
            } else {
                interpretacao = "خطر مرتفع للوفاة في المستشفى.";
                probabilidadeMorte = "حوالي >٣٠٪";
                resultadoClasse = 'bg-apache-high';
            }

            resultadoDiv.innerHTML = `
                <p>إجمالي نقاط أباتشي ٢: <strong class="font-bold">${toArabicNumeral(totalScore)}</strong></p>
                <p>احتمالية الوفاة المقدرة: <strong class="font-bold">${toArabicNumeral(probabilidadeMorte)}</strong></p>
                <p>التفسير: <strong class="font-bold">${interpretacao}</strong></p>
            `;
            resultadoDiv.className = `resultado p-4 rounded-md font-medium ${resultadoClasse} text-right`;
            resultadoDiv.style.display = 'block';
            resultadoDiv.dataset.score = totalScore;
            resultadoDiv.dataset.interpretacao = interpretacao;
        }

        function limpar() {
            userSelections = {};
            createCriteriaList(); // Recria a lista com os valores padrão
            resultadoDiv.innerHTML = '';
            resultadoDiv.className = 'resultado hidden text-right';
            delete resultadoDiv.dataset.score;
            delete resultadoDiv.dataset.interpretacao;
        }

        // Event Listeners dos Botões e Modal
        btnCalcular?.addEventListener('click', calcular);
        btnLimpar?.addEventListener('click', limpar);
        modalCloseBtn?.addEventListener('click', () => modal.classList.add('hidden'));
        modal?.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
            }
        });

        btnGerarPDF?.addEventListener('click', () => {
            if (typeof resultadoDiv.dataset.score === 'undefined') {
                alert('يرجى النقر على "احسب" أولاً لإنشاء ملف PDF.');
                return;
            }
            if (typeof gerarPDFGlobal === 'function') {
                gerarPDFGlobal({
                    titulo: 'مقياس أباتشي ٢ (APACHE II)',
                    subtitulo: 'تقرير تقييم الفسيولوجيا الحادة والصحة المزمنة',
                    nomeArquivo: 'relatorio_apache_ii.pdf',
                    seletorConteudo: '.main-content-wrapper',
                    direcao: 'rtl' // Adiciona direção RTL para o PDF
                });
            } else {
                console.error('Função gerarPDFGlobal não definida.');
            }
        });

        btnNandaNicNoc?.addEventListener('click', () => {
            const interpretacao = resultadoDiv.dataset.interpretacao;
            if (!interpretacao) {
                alert('احسب النتيجة للبحث عن الإجراء.');
                return;
            }
            // Traduz a consulta de pesquisa
            const searchQuery = encodeURIComponent(`${interpretacao} تصنيف NANDA, NIC و NOC`);
            window.open(`https://www.google.com/search?q=${searchQuery}`, '_blank');
        });

        // Inicializa a calculadora
        createCriteriaList();
        
        // Carrega o footer
        fetch('footer.html') 
            .then(response => response.text()) 
            .then(data => {
                const footerPlaceholder = document.getElementById('footer-placeholder');
                if (footerPlaceholder) {
                    footerPlaceholder.innerHTML = data;
                }
            });
    });
    </script>
    
<script type="text/javascript">
	atOptions = {
		'key' : '1e009bba81deb2bc366b3c4ac030f6be',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>

<!-- Caminho do seletor de idioma ajustado -->
<script src="../lang-selector.js" defer></script>

</body>
</html>