<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Escala de Richmond (RASS) - Avaliação de Agitação e Sedação</title>
    <link rel="canonical" href="https://www.calculadorasdeenfermagem.com.br/richmond.html" />
    <!-- Meta description atualizada para ser mais concisa -->
    <meta name="description" content="Calcule a Escala de Agitação e Sedação de Richmond (RASS) para avaliar o nível de sedação ou agitação em pacientes críticos. Ferramenta essencial para UTIs." />
    <!-- Removida a tag meta name="keywords" conforme auditoria -->

    <!-- Google Analytics (Movido para o topo do head conforme instrução) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FLJ59XXDK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8FLJ59XXDK');
    </script>

    <!-- Schema.org Structured Data (Adicionado conforme auditoria) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "MedicalEntity",
      "name": "Escala de Richmond (RASS)",
      "url": "https://www.calculadorasdeenfermagem.com.br/richmond.html",
      "description": "Calculadora da Escala de Agitação e Sedação de Richmond (RASS) para avaliação de pacientes em terapia intensiva.",
      "alternateName": ["RASS Scale", "Richmond Agitation-Sedation Scale"]
    }
    </script>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="./topbar111.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Reset básico e Box-sizing para consistência */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Fontes personalizadas */
        @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700&family=Inter:wght@300;400;500;600&display=swap');

        /* Estilos das classes de fonte e cor personalizadas (para uso no HTML com Tailwind) */
        .font-nunito { font-family: 'Nunito Sans', sans-serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        .text-dark-blue { color: #1A3E74; } /* Azul Escuro */
        .text-light-blue { color: #1FA4E5; } /* Azul Claro */
        .text-gray-custom { color: #666666; } /* Cinza */
        .text-success-green { color: #1ED760; } /* Verde */

        /* Padrão de Botões (Componentes CSS para reuso) */
        .btn-primary {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            background-color: #1A3E74; /* Cor primária azul escuro */
            color: #FFF;
            padding: 12px 24px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: center;
        }
        .btn-primary:hover { background-color: #122c54; } /* Tom mais escuro no hover */
        .btn-secondary {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            background-color: #1FA4E5; /* Cor secundária azul claro */
            color: #FFF;
            padding: 12px 24px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: center;
        }
        .btn-secondary:hover { background-color: #178ac7; } /* Tom mais escuro no hover */
        .btn-success {
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            background-color: #1ED760;
            color: #FFF;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: center;
        }
        .btn-success:hover { background-color: #17b351; }

        /* Estilos para a área de resultado da calculadora (Componente específico) */
        .resultado {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #e0f2fe; /* Tailwind blue-50 */
            border-radius: 0.5rem;
            font-weight: 600;
            color: #1A3E74; /* text-dark-blue */
            text-align: left;
            white-space: pre-wrap;
        }
        /* Cores de resultado ajustadas para as novas cores */
        .resultado.bg-success-green-light { background-color: #D4EDDA; border-color: #C3E6CB; color: #155724; } /* Similar ao green-100 */
        .resultado.bg-warning-yellow-light { background-color: #FFF3CD; border-color: #FFEEDA; color: #856404; } /* Similar ao yellow-100 */
        .resultado.bg-danger-red-light { background-color: #F8D7DA; border-color: #F5C6CB; color: #721C24; } /* Similar ao red-100 */
        .resultado.bg-info-orange-light { background-color: #ffeeba; border-color: #ffb366; color: #856404; } /* Para alertas */

        /* Estilos para a referência/bibliografia (Componente específico) */
        .ref {
            margin-top: 2rem;
            font-size: 14px;
            color: #666666; /* text-gray-custom */
            text-align: left;
        }

        /* Layout principal com Topbar fixa */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Garante que o body ocupe a altura total da viewport */
            background-color: #f8fafc; /* Tailwind bg-gray-50 */
            color: #333; /* Tailwind text-gray-800 */
            font-family: 'Inter', sans-serif; /* Aplica a fonte Inter ao body */
        }

        /* ESTILOS DOS DROPDOWNS DA TOPBAR (MOVIDOS DE TOPBAR111.HTML) */
        .dropdown-menu { display: none; }
        .dropdown-menu.show { display: block; }
        nav { justify-content: flex-end; }
        nav button { cursor: pointer; }
        nav .dropdown-menu a:hover { background-color: #bfdbfe; }
        /* FIM DOS ESTILOS DA TOPBAR */

        /* Estilos para garantir que o menu mobile fique acima de outros conteúdos quando aberto */
        #mainNav.flex {
            z-index: 40; /* Um z-index alto para o menu mobile */
            max-height: 70vh; /* Limita a altura do menu móvel conforme auditoria */
            overflow-y: auto; /* Adiciona scroll se o conteúdo for muito longo */
            -webkit-overflow-scrolling: touch; /* Suaviza o scroll em iOS */
        }
        .dropdown-menu {
            position: static; /* Por padrão, estático (fluxo normal) no mobile */
            margin-top: 0; /* Remove margin-top padrão no mobile */
            width: 100%; /* Ocupa a largura total do item pai no mobile */
            box-shadow: none; /* Remove sombra no mobile */
            border: none; /* Remove borda no mobile */
            background-color: transparent; /* Fundo transparente no mobile para se misturar ao menu principal */
            padding: 0; /* Remove padding extra no mobile */
        }

        /* Estilos específicos para desktop para os dropdowns */
        @media (min-width: 768px) { /* md breakpoint */
            .dropdown-menu {
                position: absolute; /* Torna-se absoluto no desktop */
                margin-top: 0.5rem; /* mt-2 (8px) para desktop */
                width: auto; /* Largura automática para se ajustar ao conteúdo */
                box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); /* Sombra padrão do Tailwind */
                border: 1px solid #e5e7eb; /* Borda padrão do Tailwind */
                background-color: #fff; /* Fundo branco para os dropdowns no desktop */
                padding: 0.5rem; /* p-2 */
                border-radius: 0.25rem; /* rounded */
            }
        }

        /* Espaçamento para o conteúdo abaixo da topbar fixa */
        .main-content-wrapper {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding-top: 64px; /* Garante que o conteúdo comece abaixo da topbar fixa (64px de altura) */
            width: 100%;
        }

        /* Conteúdo principal (main) */
        main {
            flex-grow: 1;
            max-width: 1280px; /* max-w-7xl */
            margin-left: auto;
            margin-right: auto;
            padding: 2rem 1rem; /* Equivalente a p-8 px-4 */
            width: 100%; /* Garante que ocupe a largura total disponível */
        }

        /* Estilos gerais da tabela */
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
            border-radius: 8px; /* Cantos arredondados para a tabela */
            overflow: hidden; /* Garante que os cantos arredondados sejam aplicados */
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* Sombra suave */
        }
        th, td {
            border: 1px solid #e2e8f0; /* Borda das células */
            padding: 1rem; /* p-4 */
            text-align: left;
        }
        th {
            background-color: #f0f8ff; /* Fundo do cabeçalho da tabela */
            color: #1A3E74; /* Cor do texto do cabeçalho */
            font-weight: 600;
            text-align: center;
        }
        tr:hover {
            background-color: #e0f7fa; /* Tailwind blue-50 */
            cursor: pointer;
        }
        .selected {
            background-color: #bfdbfe !important; /* Tailwind blue-200 */
        }

        /* Responsividade da tabela para mobile */
        @media (max-width: 640px) {
            table, thead, tbody, th, td, tr { display: block; }
            thead tr { position: absolute; top: -9999px; left: -9999px; }
            tr { border: 1px solid #e2e8f0; margin-bottom: 0.5rem; display: block; }
            td {
                border: none;
                border-bottom: 1px solid #eee;
                position: relative;
                padding-left: 50%;
                text-align: right;
            }
            td:before {
                position: absolute;
                top: 6px;
                left: 6px;
                width: 45%;
                padding-right: 10px;
                white-space: nowrap;
                text-align: left;
                font-weight: bold;
                color: #1A3E74; /* Cor para os rótulos em mobile */
            }
            /* Estilos específicos para os rótulos da tabela em mobile para RASS */
            #tabelaRASS td:nth-of-type(1):before { content: "Pontuação:"; }
            #tabelaRASS td:nth-of-type(2):before { content: "Descrição:"; }

            /* Ajustes para o cabeçalho e parágrafos introdutórios em telas menores */
            .text-4xl { font-size: 2.25rem; } /* Ajuste o tamanho da fonte para 36px */
            .text-2xl { font-size: 1.5rem; } /* Ajuste o tamanho da fonte para 24px */
            .text-lg { font-size: 1rem; } /* Ajuste o tamanho da fonte para 16px */
            
            /* Centraliza os títulos e parágrafos para melhor visualização em mobile */
            .text-left { text-align: center; } 
            .max-w-4xl { width: 100%; } /* Garante que ocupem a largura total */
            .px-4 { padding-left: 1rem; padding-right: 1rem; } /* Garante espaçamento lateral */

            /* Ajuste dos botões em telas pequenas */
            .flex-wrap.justify-start.gap-4 {
                justify-content: center; /* Centraliza os botões */
            }
            .btn-primary, .btn-secondary {
                width: 100%; /* Botões ocupam a largura total */
                margin-bottom: 0.75rem; /* Espaçamento entre os botões */
            }
        }
        /* Estilo para o modal de mensagem */
        .message-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none; /* Hidden by default */
        }
        .message-modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 90%;
            position: relative;
        }
        .message-modal-close {
            color: #aaa;
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
        }
        .message-modal-close:hover {
            color: #1F2937;
        }

        /* --- Cookie Consent Banner Styles --- */
        #cookieConsentBanner {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1A3E74; /* Cor azul escuro da identidade */
            color: #fff;
            padding: 1rem;
            text-align: center;
            z-index: 1000; /* Acima do rodapé e outros elementos */
            display: none; /* Oculto por padrão, mostrado via JS */
            flex-direction: column; /* Empilha conteúdo em mobile */
            align-items: center;
            gap: 1rem;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }

        #cookieConsentBanner.show {
            display: flex; /* Mostra o banner */
        }

        #cookieConsentBanner p {
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        #cookieConsentBanner .cookie-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap; /* Permite quebrar em telas menores */
        }

        #cookieConsentBanner button {
            background-color: #2563eb; /* Tailwind blue-600 */
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease;
            border: none;
            cursor: pointer;
            white-space: nowrap; /* Evita quebra de linha no texto do botão */
        }

        #cookieConsentBanner button.secondary {
            background-color: transparent;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        #cookieConsentBanner button.secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: white;
        }

        /* Responsive adjustments for cookie banner */
        @media (min-width: 768px) {
            #cookieConsentBanner {
                flex-direction: row; /* Layout em linha para desktop */
                justify-content: space-between;
                padding: 1rem 2rem;
            }
            #cookieConsentBanner .cookie-buttons {
                justify-content: flex-end;
            }
        }

        /* Estilos para o menu off-canvas de acessibilidade */
        .accessibility-off-canvas-menu {
            position: fixed;
            top: 0;
            right: -300px; /* Escondido por padrão */
            width: 300px;
            height: 100%;
            background-color: #fff;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: right 0.3s ease-in-out;
            padding: 1rem;
            display: none; /* Oculto por padrão, só aparece com is-open */
            flex-direction: column;
            gap: 1rem;
        }

        .accessibility-off-canvas-menu.is-open {
            right: 0; /* Visível quando aberto */
            display: flex; /* Torna-se flex quando aberto */
        }

        .accessibility-overlay {
            display: none; /* Oculto por padrão */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .accessibility-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .accessibility-header h4 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #1A3E74;
        }

        .accessibility-close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            color: #666;
        }

        .accessibility-option-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            padding: 0.75rem 1rem;
            background-color: #f1f5f9; /* Tailwind gray-100 */
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0; /* Tailwind gray-200 */
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .accessibility-option-btn:hover {
            background-color: #e2e8f0; /* Tailwind gray-200 */
        }

        .accessibility-option-btn i {
            color: #1A3E74;
        }

        .accessibility-option-btn span {
            font-weight: 600;
            color: #333;
        }

        /* Estilos para as classes de acessibilidade aplicadas ao body */
        body.font-size-small { font-size: 0.85em; }
        body.font-size-large { font-size: 1.15em; }

        body.high-contrast {
            background-color: #000 !important;
            color: #FFF !important;
        }
        body.high-contrast a { color: #FFFF00 !important; }
        body.high-contrast button, body.high-contrast .btn-primary, body.high-contrast .btn-secondary {
            background-color: #FFF !important;
            color: #000 !important;
            border: 1px solid #FFFF00 !important;
        }
        body.high-contrast .bg-white, body.high-contrast .bg-blue-50 {
            background-color: #333 !important;
            color: #FFF !important;
            border: 1px solid #FFFF00 !important;
        }
        body.high-contrast .text-gray-600, body.high-contrast .text-gray-700, body.high-contrast .text-gray-800 {
            color: #FFF !important;
        }
        body.high-contrast .text-dark-blue, body.high-contrast .text-light-blue {
            color: #FFFF00 !important;
        }
        body.high-contrast .shadow, body.high-contrast .shadow-md {
            box-shadow: 0 0 5px #FFFF00 !important;
        }
        body.high-contrast .border, body.high-contrast .border-gray-300 {
            border-color: #FFFF00 !important;
        }

        body.dark-mode {
            background-color: #1F2937 !important; /* Dark Gray */
            color: #E5E7EB !important; /* Light Gray */
        }
        body.dark-mode a { color: #93C5FD !important; /* Light Blue */ }
        body.dark-mode .bg-white, body.dark-mode .bg-blue-50 {
            background-color: #374151 !important; /* Medium Dark Gray */
            color: #E5E7EB !important;
        }
        body.dark-mode .text-gray-600, body.dark-mode .text-gray-700, body.dark-mode .text-gray-800 {
            color: #E5E7EB !important;
        }
        body.dark-mode .text-dark-blue, body.dark-mode .text-light-blue {
            color: #93C5FD !important;
        }
        body.dark-mode .shadow, body.dark-mode .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.3), 0 2px 4px -1px rgba(0,0,0,0.2) !important;
        }
        body.dark-mode .border, body.dark-mode .border-gray-300 {
            border-color: #4B5563 !important;
        }
        body.dark-mode .btn-primary, body.dark-mode .btn-secondary {
            background-color: #4B5563 !important;
            color: #E5E7EB !important;
        }
        body.dark-mode .btn-primary:hover, body.dark-mode .btn-secondary:hover {
            background-color: #6B7280 !important;
        }
        body.dark-mode #cookieConsentBanner {
            background-color: #374151 !important;
        }
        body.dark-mode #cookieConsentBanner button {
            background-color: #60A5FA !important;
            color: #1F2937 !important;
        }
        body.dark-mode #cookieConsentBanner button.secondary {
            background-color: transparent !important;
            border-color: #93C5FD !important;
            color: #93C5FD !important;
        }
        body.dark-mode #cookieConsentBanner button.secondary:hover {
            background-color: rgba(147, 197, 253, 0.1) !important;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-inter">

    <div id="topbar-container"></div>

    <!-- Botão Hambúrguer de Acessibilidade Visual (Adicionado) -->
    <button id="accessibilityHamburgerBtn" class="fixed bottom-4 left-4 bg-blue-700 text-white p-3 rounded-full shadow-lg z-50">
        <i class="fas fa-universal-access text-xl"></i>
    </button>

    <!-- Off-canvas Menu de Acessibilidade (Adicionado) -->
    <div id="accessibilityOffCanvasMenu" class="accessibility-off-canvas-menu">
        <div class="accessibility-header">
            <h4>Acessibilidade</h4>
            <button id="closeAccessibilityMenuBtn" class="accessibility-close-btn">&times;</button>
        </div>
        <button id="toggleFontSizeBtn" class="accessibility-option-btn">
            <i class="fas fa-font"></i>
            <span>Tamanho da Fonte</span>
        </button>
        <button id="toggleContrastBtn" class="accessibility-option-btn">
            <i class="fas fa-adjust"></i>
            <span>Alto Contraste</span>
        </button>
        <button id="toggleDarkModeBtn" class="accessibility-option-btn">
            <i class="fas fa-moon"></i>
            <span>Modo Escuro</span>
        </button>
        <button id="resetAccessibilityBtn" class="accessibility-option-btn">
            <i class="fas fa-sync-alt"></i>
            <span>Resetar</span>
        </button>
    </div>

    <!-- Overlay para o menu off-canvas (Adicionado) -->
    <div id="accessibilityOverlay" class="accessibility-overlay"></div>

    <div class="main-content-wrapper">
        <main class="mx-auto px-4 py-8 max-w-4xl">
            <div class="flex flex-wrap items-center justify-center gap-4 mb-3">
                <img src="iconpages.png" alt="Ícone da Escala de Richmond (RASS)" class="w-32 h-auto" />
                <h1 class="font-nunito font-extrabold text-dark-blue text-4xl lg:text-5xl text-center">
                    Escala de Richmond (RASS)
                </h1>
            </div>

            <h2 class="font-inter font-semibold text-light-blue text-2xl lg:text-3xl mb-3 text-left max-w-4xl mx-auto px-4">
                Avalia o nível de sedação ou agitação em pacientes críticos.
            </h2>
            <p class="font-inter font-normal text-gray-custom text-base lg:text-lg mb-6 text-left max-w-4xl mx-auto px-4">
                Escolha o nível que melhor representa o estado atual do paciente:
            </p>

            <div id="conteudo">
                <table id="tabelaRASS" class="w-full border-collapse border border-gray-300 mb-6 text-left">
                    <thead>
                        <tr>
                            <th class="border border-gray-300 p-4 font-semibold text-center">Pontuação</th>
                            <th class="border border-gray-300 p-4 font-semibold text-center">Descrição</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-score="4"><td>+4</td><td>Muito agitado: Agressivo, perigoso para si e para os outros.</td></tr>
                        <tr data-score="3"><td>+3</td><td>Agitado: Puxa ou remove tubos/cateteres, comportamento combativo.</td></tr>
                        <tr data-score="2"><td>+2</td><td>Muito inquieto: Movimentos frequentes e descoordenados, sem agressividade.</td></tr>
                        <tr data-score="1"><td>+1</td><td>Inquieto: Ansioso, com movimentos não agressivos.</td></tr>
                        <tr data-score="0"><td>0</td><td>Alerta e calmo: Estado ideal.</td></tr>
                        <tr data-score="-1"><td>-1</td><td>Sonolento: Acorda por >10s, contato visual sustentado.</td></tr>
                        <tr data-score="-2"><td>-2</td><td>Sedação leve: Contato visual breve.</td></tr>
                        <tr data-score="-3"><td>-3</td><td>Sedação moderada: Movimenta-se sem contato visual.</td></tr>
                        <tr data-score="-4"><td>-4</td><td>Sedação profunda: Reage a estímulo doloroso.</td></tr>
                        <tr data-score="-5"><td>-5</td><td>Sem resposta: Nenhuma resposta a estímulos.</td></tr>
                    </tbody>
                </table>

                <div id="resultado" class="resultado" aria-live="polite" style="display:none;"></div>

                <div class="ref font-inter text-gray-custom text-left">
                    <p class="font-bold mb-2">Referências bibliográficas:</p>
                    <p>Sessler CN, Gosnell MS, Grap MJ et al. The Richmond Agitation-Sedation Scale (RASS): Validity and reliability in adult intensive care unit patients. Am J Respir Crit Care Med. 2002;166:1338-44.</p>
                    <p class="mt-2">Universidade Federal de Pelotas – UFPel. Escala de Agitação e Sedação de Richmond (RASS). Disponível em:
                        <a href="https://dms.ufpel.edu.br/static/bib/apoio/escala_de_rass.pdf" target="_blank" class="text-light-blue hover:underline">
                            https://dms.ufpel.edu.br/static/bib/apoio/escala_de_rass.pdf
                        </a>
                    </p>
                </div>
            </div>
            <div class="flex flex-wrap justify-start gap-4 mt-6">
                <button id="btnCalcular" class="btn-primary" aria-label="Mostrar resultado">
                    Mostrar Resultado
                </button>
                <button id="btnLimpar" class="btn-primary" aria-label="Limpar campos">
                    Limpar
                </button>
                <button id="btnGerarPDF" class="btn-secondary" aria-label="Gerar PDF">
                    Gerar PDF
                </button>
                <!-- Botão NANDA, NIC, NOC adicionado aqui -->
                <button id="btnNandaNicNoc" class="btn-primary" aria-label="Pesquisar NANDA, NIC, NOC">
                    NANDA, NIC, NOC
                </button>
            </div>
        </main>
    </div>

    <!-- Botão de doação removido conforme instrução -->
    <!-- <a href="doacoes.html" class="fixed bottom-4 right-4 bg-dark-blue text-white text-sm px-4 py-2 rounded-full shadow hover:bg-blue-900 transition fixed-donation-button z-30">
        Ajude-nos a manter o site gratuito
    </a> -->

    <div id="footer-container"></div>

    <!-- Modal de Mensagem Personalizado -->
    <div id="messageModalOverlay" class="message-modal-overlay">
        <div class="message-modal-content">
            <button id="messageModalClose" class="message-modal-close">&times;</button>
            <p id="messageModalText" class="text-gray-700 text-lg"></p>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookieConsentBanner">
        <p>Utilizamos cookies para melhorar sua experiência em nosso site. Ao continuar navegando, você concorda com nossa <a href="politica.html" class="underline text-blue-200 hover:text-blue-100">Política de Cookies</a>.</p>
        <div class="cookie-buttons">
            <button id="acceptCookiesBtn">Aceitar todos os cookies</button>
            <button id="refuseCookiesBtn" class="secondary">Recusar cookies</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
        let scoreSelecionado = null; // Variável global para armazenar a pontuação selecionada
        let interpretacaoSelecionada = null; // Variável global para armazenar a interpretação selecionada

        // Referências para o modal de mensagem
        const messageModalOverlay = document.getElementById('messageModalOverlay');
        const messageModalText = document.getElementById('messageModalText');
        const messageModalClose = document.getElementById('messageModalClose');

        // --- Funções do Modal de Mensagem ---
        function showCustomMessage(message) {
            messageModalText.textContent = message;
            messageModalOverlay.style.display = 'flex';
        }

        function hideCustomMessage() {
            messageModalText.textContent = ''; // Limpa o texto ao esconder
            messageModalOverlay.style.display = 'none';
        }

        messageModalClose.addEventListener('click', hideCustomMessage);
        messageModalOverlay.addEventListener('click', (e) => {
            if (e.target === messageModalOverlay) {
                hideCustomMessage();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Carrega o rodapé
            fetch('rodape111.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('footer-container').innerHTML = html;
                })
                .catch(error => console.error('Erro ao carregar o rodapé:', error));

            // Adiciona event listeners para a seleção das linhas da tabela
            const linhas = document.querySelectorAll('#tabelaRASS tr[data-score]');
            linhas.forEach(linha => {
                linha.addEventListener('click', () => {
                    linhas.forEach(l => l.classList.remove('selected')); // Remove seleção de todas as linhas
                    linha.classList.add('selected'); // Adiciona seleção à linha clicada
                    scoreSelecionado = parseInt(linha.getAttribute('data-score'), 10); // Atualiza o scoreSelecionado
                    interpretacaoSelecionada = linha.cells[1].textContent.trim(); // Pega a descrição da segunda célula
                });
            });

            // Adiciona event listeners aos botões
            document.getElementById('btnCalcular').addEventListener('click', calcularRASS);
            document.getElementById('btnLimpar').addEventListener('click', limparCamposRASS);
            document.getElementById('btnGerarPDF').addEventListener('click', gerarPDFRASS);

            // NOVO: Adiciona o event listener para o botão NANDA, NIC, NOC
            const btnNandaNicNoc = document.getElementById('btnNandaNicNoc');
            if (btnNandaNicNoc) {
                btnNandaNicNoc.addEventListener('click', () => {
                    const resultadoDiv = document.getElementById('resultado');
                    let currentScore = resultadoDiv.dataset.score;
                    let currentInterpretacao = resultadoDiv.dataset.interpretacao;
                    const scaleName = "Escala de Richmond (RASS)"; // Nome da escala fixo

                    // Se alguma parte crucial estiver faltando, exibe erro
                    if (!currentScore || !currentInterpretacao || resultadoDiv.style.display === 'none' || resultadoDiv.innerHTML.includes('Por favor, selecione')) {
                        showCustomMessage('Por favor, clique em "Mostrar Resultado" primeiro para obter a pontuação e a interpretação e habilitar a pesquisa NANDA, NIC, NOC.');
                        return;
                    }

                    // Constrói a string de pesquisa detalhada
                    const detailedSearchQuery = `Pontuação RASS: ${currentScore}, Interpretação: ${currentInterpretacao} - ${scaleName} GERAR diagnosticos de enfermagem da NANDA, GERAR intervenções de enfermagem do NIC, Gerar um exemplo de mensuração dos resultados implementados pelo enfermeiro (NOC)`;
                    const encodedSearchQuery = encodeURIComponent(detailedSearchQuery);
                    
                    // Abre uma nova aba com a pesquisa do Google
                    window.open(`https://www.google.com/search?q=${encodedSearchQuery}`, '_blank');
                });
            }

            // --- Lógica do Cookie Consent Banner ---
            const cookieConsentBanner = document.getElementById('cookieConsentBanner');
            const acceptCookiesBtn = document.getElementById('acceptCookiesBtn');
            const refuseCookiesBtn = document.getElementById('refuseCookiesBtn');
            const cookiesAcceptedKey = 'cookiesAccepted'; // Chave para localStorage

            function showCookieBanner() {
                if (localStorage.getItem(cookiesAcceptedKey) === null) {
                    cookieConsentBanner.classList.add('show');
                }
            }

            function hideCookieBanner() {
                cookieConsentBanner.classList.remove('show');
            }

            if (acceptCookiesBtn) {
                acceptCookiesBtn.addEventListener('click', () => {
                    localStorage.setItem(cookiesAcceptedKey, 'true');
                    hideCookieBanner();
                    // Atualiza o consentimento do GTM para 'granted'
                    gtag('consent', 'update', {
                        'analytics_storage': 'granted'
                    });
                });
            }

            if (refuseCookiesBtn) {
                refuseCookiesBtn.addEventListener('click', () => {
                    localStorage.setItem(cookiesAcceptedKey, 'false');
                    hideCookieBanner();
                    // O consentimento já está 'denied' por padrão, então não precisa de 'update' aqui
                });
            }
            // Mostra o banner de cookies ao carregar a página, se necessário
            showCookieBanner();

            // --- Lógica da Nova Barra de Acessibilidade Hambúrguer ---
            const accessibilityHamburgerBtn = document.getElementById('accessibilityHamburgerBtn');
            const accessibilityOffCanvasMenu = document.getElementById('accessibilityOffCanvasMenu');
            const closeAccessibilityMenuBtn = document.getElementById('closeAccessibilityMenuBtn');
            const accessibilityOverlay = document.getElementById('accessibilityOverlay');
            // Botões de Acessibilidade
            const toggleFontSizeBtn = document.getElementById('toggleFontSizeBtn');
            const toggleContrastBtn = document.getElementById('toggleContrastBtn');
            const toggleDarkModeBtn = document.getElementById('toggleDarkModeBtn');
            const resetAccessibilityBtn = document.getElementById('resetAccessibilityBtn');
            let currentFontSize = 'normal'; // 'normal', 'small', 'large'
            let isHighContrast = false;
            let isDarkMode = false;
            // Função para aplicar/remover classes de acessibilidade
            function applyAccessibilitySettings() {
                const body = document.body;
                // Tamanho da Fonte
                body.classList.remove('font-size-small', 'font-size-large');
                if (currentFontSize === 'small') {
                    body.classList.add('font-size-small');
                } else if (currentFontSize === 'large') {
                    body.classList.add('font-size-large');
                }
                // Alto Contraste
                if (isHighContrast) {
                    body.classList.add('high-contrast');
                } else {
                    body.classList.remove('high-contrast');
                }
                // Modo Escuro
                if (isDarkMode) {
                    body.classList.add('dark-mode');
                } else {
                    body.classList.remove('dark-mode');
                }
            }
            // Funções de Toggle
            if (toggleFontSizeBtn) {
                toggleFontSizeBtn.addEventListener('click', () => {
                    if (currentFontSize === 'normal') {
                        currentFontSize = 'large';
                    } else if (currentFontSize === 'large') {
                        currentFontSize = 'small';
                    } else {
                        currentFontSize = 'normal';
                    }
                    applyAccessibilitySettings();
                });
            }
            if (toggleContrastBtn) {
                toggleContrastBtn.addEventListener('click', () => {
                    isHighContrast = !isHighContrast;
                    applyAccessibilitySettings();
                });
            }
            if (toggleDarkModeBtn) {
                toggleDarkModeBtn.addEventListener('click', () => {
                    isDarkMode = !isDarkMode;
                    applyAccessibilitySettings();
                });
            }
            if (resetAccessibilityBtn) {
                resetAccessibilityBtn.addEventListener('click', () => {
                    currentFontSize = 'normal';
                    isHighContrast = false;
                    isDarkMode = false;
                    applyAccessibilitySettings();
                });
            }
            // Lógica para abrir/fechar o menu de acessibilidade
            if (accessibilityHamburgerBtn) {
                accessibilityHamburgerBtn.addEventListener('click', () => {
                    accessibilityOffCanvasMenu.classList.add('is-open');
                    accessibilityOverlay.style.display = 'block';
                });
            }
            if (closeAccessibilityMenuBtn) {
                closeAccessibilityMenuBtn.addEventListener('click', () => {
                    accessibilityOffCanvasMenu.classList.remove('is-open');
                    accessibilityOverlay.style.display = 'none';
                });
            }
            if (accessibilityOverlay) {
                accessibilityOverlay.addEventListener('click', (event) => {
                    if (event.target === accessibilityOverlay) { // Garante que só feche se clicar no overlay, não no menu
                        accessibilityOffCanvasMenu.classList.remove('is-open');
                        accessibilityOverlay.style.display = 'none';
                    }
                });
            }
            // Fechar com a tecla ESC
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && accessibilityOffCanvasMenu.classList.contains('is-open')) {
                    accessibilityOffCanvasMenu.classList.remove('is-open');
                    accessibilityOverlay.style.display = 'none';
                }
            });
            // Aplica as configurações iniciais (se houver alguma persistência futura)
            applyAccessibilitySettings();
        });

        function calcularRASS() {
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.className = 'resultado'; // Reseta para a classe base

            if (scoreSelecionado === null) {
                resultadoDiv.style.display = 'block';
                resultadoDiv.innerHTML = '⚠️ <strong class="font-bold">Por favor, selecione um nível da escala</strong> antes de continuar.';
                resultadoDiv.classList.add('bg-info-orange-light', 'text-orange-800');
                // Limpa os data-attributes se houver erro
                resultadoDiv.dataset.score = '';
                resultadoDiv.dataset.interpretacao = '';
                return;
            }

            let mensagem = `Pontuação RASS selecionada: <strong class="font-bold">${scoreSelecionado}</strong>\n\n`;
            let resultadoClasses = [];
            let interpretacaoParaNanda = ""; // Variável para armazenar a interpretação para o NANDA

            if (scoreSelecionado === 4) {
                mensagem += 'Muito agitado: Paciente agressivo, perigoso para si e para os outros. Requer atenção imediata e intervenção para segurança.';
                interpretacaoParaNanda = 'Muito agitado: Agressivo, perigoso para si e para os outros.';
                resultadoClasses = ['bg-danger-red-light', 'text-red-800'];
            } else if (scoreSelecionado === 3) {
                mensagem += 'Agitado: Paciente com comportamento combativo, puxa ou remove tubos/cateteres. Avaliar causa e considerar contenção ou sedação.';
                interpretacaoParaNanda = 'Agitado: Puxa ou remove tubos/cateteres, comportamento combativo.';
                resultadoClasses = ['bg-danger-red-light', 'text-red-800'];
            } else if (scoreSelecionado === 2) {
                mensagem += 'Muito inquieto: Paciente com movimentos frequentes e descoordenados, sem agressividade. Pode indicar desconforto ou agitação emergente.';
                interpretacaoParaNanda = 'Muito inquieto: Movimentos frequentes e descoordenados, sem agressividade.';
                resultadoClasses = ['bg-warning-yellow-light', 'text-yellow-800'];
            } else if (scoreSelecionado === 1) {
                mensagem += 'Inquieto: Paciente ansioso, com movimentos não agressivos. Monitorar para piora e avaliar causas de ansiedade.';
                interpretacaoParaNanda = 'Inquieto: Ansioso, com movimentos não agressivos.';
                resultadoClasses = ['bg-warning-yellow-light', 'text-yellow-800'];
            } else if (scoreSelecionado === 0) {
                mensagem += 'Alerta e calmo: Paciente em estado ideal. Manter acompanhamento e garantir conforto.';
                interpretacaoParaNanda = 'Alerta e calmo: Estado ideal.';
                resultadoClasses = ['bg-success-green-light', 'text-green-800'];
            } else if (scoreSelecionado === -1) {
                mensagem += 'Sonolento: Paciente acorda por >10s, com contato visual sustentado. Monitorar nível de sedação e desconforto.';
                interpretacaoParaNanda = 'Sonolento: Acorda por >10s, contato visual sustentado.';
                resultadoClasses = ['bg-success-green-light', 'text-green-800'];
            } else if (scoreSelecionado === -2) {
                mensagem += 'Sedação leve: Paciente com contato visual breve. Indica sedação adequada para procedimentos ou descanso.';
                interpretacaoParaNanda = 'Sedação leve: Contato visual breve.';
                resultadoClasses = ['bg-warning-yellow-light', 'text-yellow-800'];
            } else if (scoreSelecionado === -3) {
                mensagem += 'Sedação moderada: Paciente movimenta-se sem contato visual. Avaliar necessidade de manter este nível de sedação ou aprofundar/diminuir.';
                interpretacaoParaNanda = 'Sedação moderada: Movimenta-se sem contato visual.';
                resultadoClasses = ['bg-warning-yellow-light', 'text-yellow-800'];
            } else if (scoreSelecionado === -4) {
                mensagem += 'Sedação profunda: Paciente reage apenas a estímulo doloroso. Avaliar necessidade de ajuste da dose sedativa para evitar sedação excessiva.';
                interpretacaoParaNanda = 'Sedação profunda: Reage a estímulo doloroso.';
                resultadoClasses = ['bg-danger-red-light', 'text-red-800'];
            } else if (scoreSelecionado === -5) {
                mensagem += 'Sem resposta: Paciente sem nenhuma resposta a estímulos. Considerar reavaliação imediata, causas da inconsciência e suporte intensivo.';
                interpretacaoParaNanda = 'Sem resposta: Nenhuma resposta a estímulos.';
                resultadoClasses = ['bg-danger-red-light', 'text-red-800'];
            }

            resultadoDiv.textContent = mensagem;
            resultadoDiv.style.display = 'block';
            resultadoClasses.forEach(cls => resultadoDiv.classList.add(cls));

            // Armazena a pontuação e a interpretação nos atributos de dados da div de resultado
            resultadoDiv.dataset.score = scoreSelecionado;
            resultadoDiv.dataset.interpretacao = interpretacaoParaNanda;
        }

        function limparCamposRASS() {
            const linhas = document.querySelectorAll('#tabelaRASS tr[data-score]');
            linhas.forEach(l => l.classList.remove('selected'));
            scoreSelecionado = null; // Reseta a pontuação selecionada
            interpretacaoSelecionada = null; // Reseta a interpretação selecionada
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.style.display = 'none';
            resultadoDiv.innerHTML = '';
            resultadoDiv.className = 'resultado'; // Reseta as classes
            // Limpa os atributos de dados
            delete resultadoDiv.dataset.score;
            delete resultadoDiv.dataset.interpretacao;
        }

        function gerarPDFRASS() {
            // O botão de doação já foi removido do HTML, então esta parte não é mais necessária.
            // const fixedButton = document.querySelector('.fixed-donation-button');
            // if (fixedButton) {
            //     fixedButton.style.display = 'none'; // Esconde o botão de doação
            // }

            const contentToPrint = document.getElementById("conteudo").cloneNode(true);

            // Remove os botões clonados para não aparecerem no PDF
            // A div de botões está fora do #conteudo no HTML original, então não será clonada com contentToPrint.
            // Esta remoção pode ser redundante, mas é mantida para segurança caso a estrutura HTML mude.
            const clonedButtonsDiv = contentToPrint.querySelector('.flex.flex-wrap.justify-start.gap-4.mt-6');
            if (clonedButtonsDiv) {
                clonedButtonsDiv.remove();
            }
            
            // Garante que o resultado esteja visível e com o conteúdo correto para o PDF
            const originalResultDiv = document.getElementById('resultado');
            const resultDivInPdf = contentToPrint.querySelector('#resultado');

            if (originalResultDiv.style.display !== 'none' && originalResultDiv.innerHTML.trim() !== '' && !originalResultDiv.innerHTML.includes('Por favor, selecione')) {
                resultDivInPdf.style.display = 'block';
                resultDivInPdf.innerHTML = originalResultDiv.innerHTML;
                originalResultDiv.classList.forEach(cls => {
                    if (cls.startsWith('bg-') || cls.startsWith('text-')) {
                        resultDivInPdf.classList.add(cls);
                    }
                });
            } else {
                resultDivInPdf.style.display = 'block';
                resultDivInPdf.innerHTML = "Resultado não calculado ou seleção incompleta na página. Calcule antes de gerar o PDF.";
                resultDivInPdf.classList.add('bg-info-orange-light', 'text-orange-800');
                resultDivInPdf.style.backgroundColor = '#ffeeba';
                resultDivInPdf.style.color = '#856404';
            }

            // Cria o elemento do cabeçalho diretamente e adiciona os estilos
            const headerDiv = document.createElement('div');
            headerDiv.style.cssText = "text-align: center; margin-bottom: 20px; font-family: 'Nunito Sans', sans-serif; color: #1A3E74;";
            headerDiv.innerHTML = `
                <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 5px;">Escala de Richmond (RASS)</h1>
                <p style="font-size: 14px; color: #666666;">Relatório de Agitação e Sedação</p>
                <p style="font-size: 12px; color: #777;">Gerado em: ${new Date().toLocaleDateString('pt-BR')} ${new Date().toLocaleTimeString('pt-BR')}</p>
            `;
            contentToPrint.prepend(headerDiv); // Prepend o elemento div completo

            const opt = {
                margin: 0.5,
                filename: "escala-richmond.pdf",
                image: { type: "jpeg", quality: 0.98 },
                html2canvas: { scale: 3, scrollY: 0 },
                jsPDF: { unit: "in", format: "a4", orientation: "portrait" }
            };

            html2pdf().set(opt).from(contentToPrint).save().then(() => {
                // Não há botão fixo para reexibir, então esta parte é removida.
                // if (fixedButton) {
                //     fixedButton.style.display = ''; // Volta a exibir o botão de doação
                // }
            }).catch(error => {
                console.error('Erro ao gerar PDF:', error);
                showCustomMessage('Ocorreu um erro ao gerar o PDF. Por favor, tente novamente.');
            });
        }
    </script>
</body>
</html>
